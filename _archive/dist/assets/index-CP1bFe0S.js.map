{"version":3,"file":"index-CP1bFe0S.js","sources":["../../src/pages/data-backup/index.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useDashboardData } from '../../hooks/useDashboardData';\r\n\r\nconst DataBackup = () => {\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [backupInProgress, setBackupInProgress] = useState(false);\r\n  const [backupProgress, setBackupProgress] = useState(0);\r\n\r\n  const { user } = useAuth();\r\n  const { data, loading } = useDashboardData();\r\n\r\n  const toggleSidebar = () => {\r\n    setIsSidebarCollapsed(!isSidebarCollapsed);\r\n  };\r\n\r\n  // Debug pour voir les donn√©es utilisateur\r\n  console.log('üîç User data in data-backup:', user);\r\n  console.log('üîç User role:', user?.role);\r\n  console.log('üîç User full_name:', user?.full_name);\r\n  console.log('üîç User name:', user?.name);\r\n  console.log('üîç User email:', user?.email);\r\n\r\n  // Fonction pour r√©cup√©rer le nom utilisateur de mani√®re intelligente\r\n  const getUserDisplayName = () => {\r\n    // Priorit√© 1: full_name\r\n    if (user?.full_name && user.full_name !== '') return user.full_name;\r\n    \r\n    // Priorit√© 2: name\r\n    if (user?.name && user.name !== '') return user.name;\r\n    \r\n    // Priorit√© 3: schoolData.principal_name\r\n    if (user?.schoolData?.principal_name && user.schoolData.principal_name !== '') return user.schoolData.principal_name;\r\n    \r\n    // Priorit√© 4: first_name + last_name\r\n    if (user?.first_name && user?.last_name) return `${user.first_name} ${user.last_name}`;\r\n    \r\n    // Priorit√© 5: metadata.full_name\r\n    if (user?.user_metadata?.full_name) return user.user_metadata.full_name;\r\n    \r\n    // Priorit√© 6: email (sans domaine)\r\n    if (user?.email) {\r\n      const emailName = user.email.split('@')[0];\r\n      return emailName.charAt(0).toUpperCase() + emailName.slice(1);\r\n    }\r\n    \r\n    // Fallback\r\n    return \"Utilisateur\";\r\n  };\r\n\r\n  // Historique des sauvegardes depuis Supabase\r\n  const backupHistory = data?.backupHistory || [\r\n    {\r\n      id: 1,\r\n      date: new Date().toISOString(),\r\n      type: 'manual',\r\n      size: '1.2 GB',\r\n      status: 'completed',\r\n      duration: '5 min'\r\n    }\r\n  ];\r\n\r\n  // Statistiques depuis Supabase\r\n  const backupStats = [\r\n    {\r\n      title: 'Derni√®re sauvegarde',\r\n      value: data?.lastBackup || 'Jamais',\r\n      status: 'success',\r\n      icon: 'CheckCircle'\r\n    },\r\n    {\r\n      title: 'Taille totale',\r\n      value: data?.totalBackupSize || '0 GB',\r\n      status: 'info',\r\n      icon: 'HardDrive'\r\n    },\r\n    {\r\n      title: 'Sauvegardes r√©ussies',\r\n      value: data?.backupSuccessRate || '100%',\r\n      status: 'success',\r\n      icon: 'TrendingUp'\r\n    },\r\n    {\r\n      title: 'R√©tention',\r\n      value: data?.retentionPeriod || '30 jours',\r\n      status: 'info',\r\n      icon: 'Calendar'\r\n    }\r\n  ];\r\n\r\n  const handleManualBackup = () => {\r\n    setBackupInProgress(true);\r\n    setBackupProgress(0);\r\n\r\n    const incrementProgress = () => {\r\n      setBackupProgress(prev => {\r\n        if (prev >= 100) {\r\n          setBackupInProgress(false);\r\n          alert(`‚úÖ Sauvegarde termin√©e avec succ√®s pour ${user?.schoolData?.name || 'votre √©tablissement'} !`);\r\n          return 100;\r\n        }\r\n        return prev + 10;\r\n      });\r\n    };\r\n\r\n    const interval = setInterval(incrementProgress, 800);\r\n\r\n    setTimeout(() => {\r\n      clearInterval(interval);\r\n      setBackupInProgress(false);\r\n      setBackupProgress(0);\r\n    }, 8000);\r\n  };\r\n\r\n  const handleExportData = (format) => {\r\n    console.log(`Export des donn√©es de ${user?.schoolData?.name} au format ${format.toUpperCase()}`);\r\n    alert(`üìä Export des donn√©es de ${user?.schoolData?.name || 'votre √©tablissement'} au format ${format.toUpperCase()}...`);\r\n  };\r\n\r\n  const handleAutoBackupConfig = () => {\r\n    alert(`‚öôÔ∏è Configuration de l'auto-sauvegarde pour ${user?.schoolData?.name || 'votre √©tablissement'}\\n\\nAcc√®s aux param√®tres :\\n‚Ä¢ Planification automatique\\n‚Ä¢ Configuration des notifications\\n‚Ä¢ Gestion de la r√©tention\\n‚Ä¢ Surveillance des sauvegardes`);\r\n  };\r\n\r\n  const handleRefreshHistory = () => {\r\n    alert(`üîÑ Actualisation de l'historique des sauvegardes\\n\\nR√©cup√©ration des derni√®res sauvegardes depuis Supabase...`);\r\n  };\r\n\r\n  const handleViewFullHistory = () => {\r\n    alert(`üìú Historique complet des sauvegardes\\n\\nAcc√®s √† l'historique complet de ${user?.schoolData?.name || 'votre √©tablissement'} depuis Supabase.\\n\\nOptions disponibles :\\n‚Ä¢ Filtres avanc√©s\\n‚Ä¢ Recherche par p√©riode\\n‚Ä¢ D√©tails des sauvegardes\\n‚Ä¢ Export des rapports`);\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return 'CheckCircle';\r\n      case 'failed':\r\n        return 'XCircle';\r\n      case 'in_progress':\r\n        return 'Clock';\r\n      default:\r\n        return 'Circle';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return 'text-green-500';\r\n      case 'failed':\r\n        return 'text-red-500';\r\n      case 'in_progress':\r\n        return 'text-yellow-500';\r\n      default:\r\n        return 'text-gray-500';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return 'Termin√©e';\r\n      case 'failed':\r\n        return '√âchou√©e';\r\n      case 'in_progress':\r\n        return 'En cours';\r\n      default:\r\n        return 'Inconnue';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('fr-FR', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Sauvegarde et Donn√©es - EduTrack CM</title>\r\n        <meta name=\"description\" content=\"G√©rer les sauvegardes et l'export des donn√©es\" />\r\n      </Helmet>\r\n      \r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header \r\n          userRole=\"principal\"\r\n          userName={getUserDisplayName()}\r\n          isCollapsed={isSidebarCollapsed}\r\n          onToggleSidebar={toggleSidebar}\r\n        />\r\n        \r\n        <div className=\"flex pt-16\">\r\n          <Sidebar \r\n            userRole=\"principal\"\r\n            isCollapsed={isSidebarCollapsed}\r\n            onToggle={toggleSidebar}\r\n          />\r\n          \r\n          <main className={`flex-1 transition-all duration-300 ${\r\n            isSidebarCollapsed ? 'lg:ml-20' : 'lg:ml-64'\r\n          } p-6`}>\r\n            \r\n            {/* Page Header */}\r\n            <div className=\"mb-8\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center\">\r\n                    <Icon name=\"Database\" size={20} className=\"text-primary\" />\r\n                  </div>\r\n                  <h1 className=\"text-2xl font-heading font-heading-bold text-foreground\">\r\n                    Sauvegarde et Donn√©es\r\n                  </h1>\r\n                </div>\r\n              </div>\r\n\r\n              <p className=\"text-muted-foreground\">\r\n                G√©rer les sauvegardes et l'exportation des donn√©es de {user?.schoolData?.name || 'votre √©tablissement'}\r\n              </p>\r\n              \r\n              {loading && (\r\n                <div className=\"mt-4 flex items-center text-sm text-muted-foreground\">\r\n                  <Icon name=\"Loader2\" size={16} className=\"mr-2 animate-spin\" />\r\n                  Chargement des donn√©es...\r\n                </div>\r\n              )}\r\n              \r\n              {/* Debug info - √† enlever en production */}\r\n              <div className=\"mt-2 text-xs text-gray-500 bg-gray-100 p-2 rounded\">\r\n                üë§ Utilisateur connect√©: <strong>{getUserDisplayName()}</strong>\r\n                {user?.role && ` | R√¥le: ${user.role}`}\r\n                {user?.schoolData?.name && ` | √âcole: ${user.schoolData.name}`}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Statistiques */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n              {backupStats.map((stat, index) => (\r\n                <div key={index} className=\"bg-card border border-border rounded-lg p-6 shadow-card\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">{stat.title}</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">{stat.value}</p>\r\n                    </div>\r\n                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${\r\n                      stat.status === 'success' ? 'bg-green-100' :\r\n                      stat.status === 'warning' ? 'bg-yellow-100' : 'bg-blue-100'\r\n                    }`}>\r\n                      <Icon name={stat.icon} size={20} className={\r\n                        stat.status === 'success' ? 'text-green-600' :\r\n                        stat.status === 'warning' ? 'text-yellow-600' : 'text-blue-600'\r\n                      } />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n              {/* Actions de sauvegarde */}\r\n              <div className=\"lg:col-span-2 space-y-6\">\r\n                {/* Sauvegarde manuelle */}\r\n                <div className=\"bg-card border border-border rounded-lg p-6 shadow-card\">\r\n                  <div className=\"flex items-center space-x-3 mb-6\">\r\n                    <Icon name=\"Database\" size={20} className=\"text-primary\" />\r\n                    <h2 className=\"text-lg font-heading font-heading-semibold text-card-foreground\">\r\n                      Sauvegarde Manuelle\r\n                    </h2>\r\n                  </div>\r\n\r\n                  {backupInProgress && (\r\n                    <div className=\"mb-6\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <span className=\"text-sm text-foreground\">Sauvegarde en cours...</span>\r\n                        <span className=\"text-sm text-muted-foreground\">{backupProgress}%</span>\r\n                      </div>\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                        <div \r\n                          className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\" \r\n                          style={{ width: `${backupProgress}%` }}\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <Button \r\n                      onClick={handleManualBackup}\r\n                      disabled={backupInProgress}\r\n                      className=\"h-12\"\r\n                    >\r\n                      {backupInProgress ? (\r\n                        <>\r\n                          <Icon name=\"Loader2\" size={16} className=\"mr-2 animate-spin\" />\r\n                          Sauvegarde...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Icon name=\"Download\" size={16} className=\"mr-2\" />\r\n                          Sauvegarder maintenant\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                    <Button \r\n                      variant=\"outline\" \r\n                      className=\"h-12\"\r\n                      onClick={handleAutoBackupConfig}\r\n                    >\r\n                      <Icon name=\"Settings\" size={16} className=\"mr-2\" />\r\n                      Configurer auto-sauvegarde\r\n                    </Button>\r\n                  </div>\r\n\r\n                  <div className=\"mt-6 p-4 bg-muted/50 rounded-lg\">\r\n                    <div className=\"flex items-start space-x-3\">\r\n                      <Icon name=\"Info\" size={16} className=\"text-blue-600 mt-0.5\" />\r\n                      <div>\r\n                        <h4 className=\"font-medium text-foreground text-sm mb-1\">\r\n                          Information sur la sauvegarde\r\n                        </h4>\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                          La sauvegarde inclut toutes les donn√©es de {user?.schoolData?.name || 'votre √©tablissement'} : √©l√®ves, enseignants, notes, documents et param√®tres. Les sauvegardes sont crypt√©es et stock√©es de mani√®re s√©curis√©e dans Supabase.\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Export de donn√©es */}\r\n                <div className=\"bg-card border border-border rounded-lg p-6 shadow-card\">\r\n                  <div className=\"flex items-center space-x-3 mb-6\">\r\n                    <Icon name=\"Download\" size={20} className=\"text-primary\" />\r\n                    <h2 className=\"text-lg font-heading font-heading-semibold text-card-foreground\">\r\n                      Export de Donn√©es\r\n                    </h2>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <Button \r\n                      variant=\"outline\" \r\n                      onClick={() => handleExportData('excel')}\r\n                      className=\"h-12 flex-col space-y-1\"\r\n                    >\r\n                      <Icon name=\"FileSpreadsheet\" size={20} className=\"text-green-600\" />\r\n                      <span className=\"text-sm\">Excel</span>\r\n                    </Button>\r\n                    <Button \r\n                      variant=\"outline\"\r\n                      onClick={() => handleExportData('pdf')}\r\n                      className=\"h-12 flex-col space-y-1\"\r\n                    >\r\n                      <Icon name=\"FileText\" size={20} className=\"text-red-600\" />\r\n                      <span className=\"text-sm\">PDF</span>\r\n                    </Button>\r\n                    <Button \r\n                      variant=\"outline\"\r\n                      onClick={() => handleExportData('csv')}\r\n                      className=\"h-12 flex-col space-y-1\"\r\n                    >\r\n                      <Icon name=\"Database\" size={20} className=\"text-blue-600\" />\r\n                      <span className=\"text-sm\">CSV</span>\r\n                    </Button>\r\n                  </div>\r\n\r\n                  <div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className=\"p-3 border border-green-200 bg-green-50 rounded-lg\">\r\n                      <h4 className=\"font-medium text-foreground text-sm mb-2\">\r\n                        Donn√©es acad√©miques\r\n                      </h4>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        Notes, pr√©sences, bulletins\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"p-3 border border-green-200 bg-green-50 rounded-lg\">\r\n                      <h4 className=\"font-medium text-foreground text-sm mb-2\">\r\n                        Donn√©es administratives\r\n                      </h4>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        Personnel, finances, rapports\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Historique des sauvegardes */}\r\n              <div className=\"bg-card border border-border rounded-lg p-6 shadow-card\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <h3 className=\"text-lg font-heading font-heading-semibold text-card-foreground\">\r\n                    Historique\r\n                  </h3>\r\n                  <Button \r\n                    variant=\"ghost\" \r\n                    size=\"sm\"\r\n                    onClick={handleRefreshHistory}\r\n                  >\r\n                    <Icon name=\"RefreshCw\" size={14} />\r\n                  </Button>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  {backupHistory.map((backup) => (\r\n                    <div key={backup.id} className=\"p-3 border border-border rounded-lg\">\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <span className={getStatusColor(backup.status)}>\r\n                            <Icon name={getStatusIcon(backup.status)} size={16} />\r\n                          </span>\r\n                          <span className=\"text-sm font-medium text-foreground\">\r\n                            {backup.type === 'automatic' ? 'Auto' : 'Manuel'}\r\n                          </span>\r\n                        </div>\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          {backup.size}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground mb-1\">\r\n                        {formatDate(backup.date)}\r\n                      </p>\r\n                      <div className=\"flex items-center justify-between text-xs\">\r\n                        <span className={getStatusColor(backup.status)}>\r\n                          {getStatusLabel(backup.status)}\r\n                        </span>\r\n                        {backup.status === 'completed' && (\r\n                          <span className=\"text-muted-foreground\">\r\n                            {backup.duration}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"mt-6 pt-4 border-t border-border\">\r\n                  <Button \r\n                    variant=\"ghost\" \r\n                    size=\"sm\" \r\n                    className=\"w-full\"\r\n                    onClick={handleViewFullHistory}\r\n                  >\r\n                    <Icon name=\"History\" size={14} className=\"mr-2\" />\r\n                    Voir tout l'historique\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Information de s√©curit√© */}\r\n            <div className=\"mt-8 rounded-lg p-6 bg-green-50 border border-green-200\">\r\n              <div className=\"flex items-start space-x-3\">\r\n                <Icon name=\"Database\" size={20} className=\"text-green-600\" />\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2 text-green-800\">\r\n                    Mode Production Actif\r\n                  </h4>\r\n                  <p className=\"text-sm text-green-700 mb-3\">\r\n                    Vous utilisez les vraies donn√©es de {user?.schoolData?.name || 'votre √©tablissement'}. Les sauvegardes et exports concernent vos donn√©es r√©elles stock√©es dans Supabase. Toutes les op√©rations sont authentiques et s√©curis√©es.\r\n                  </p>\r\n\r\n                  <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                    <p className=\"text-xs text-green-800\">\r\n                      <Icon name=\"Shield\" size={14} className=\"inline mr-1\" />\r\n                      S√©curit√© : Toutes les sauvegardes sont crypt√©es et les exports respectent la confidentialit√© des donn√©es.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DataBackup;"],"names":["DataBackup","isSidebarCollapsed","setIsSidebarCollapsed","useState","backupInProgress","setBackupInProgress","backupProgress","setBackupProgress","user","useAuth","data","loading","useDashboardData","toggleSidebar","getUserDisplayName","_a","_b","emailName","backupHistory","backupStats","handleManualBackup","interval","prev","handleExportData","format","handleAutoBackupConfig","handleRefreshHistory","handleViewFullHistory","getStatusIcon","status","getStatusColor","getStatusLabel","formatDate","dateString","jsxs","Fragment","Helmet","jsx","Header","Sidebar","Icon","stat","index","Button","_c","backup","_d"],"mappings":"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"}