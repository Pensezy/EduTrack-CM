import{j as e,u as F}from"./contexts-fbpOeTmm.js";import{r as v,u as L}from"./react-vendor-CFDIsUAY.js";import{H as O,S as $}from"./Sidebar-Q0ML3SY6.js";import{I as G}from"./AppImage-yaNzDrl6.js";import{I as u,B as N,a as C,S as A}from"./index-BPV3rumr.js";import"./services-CdXttHtG.js";import"./supabase-CIvuJI4W.js";import"./ui-vendor-BrXTGbgA.js";const H=({student:i,onPhotoUpdate:d,onEdit:M,isEditing:h})=>{const[s,o]=v.useState(!1),g=async x=>{var p,f;const b=(f=(p=x==null?void 0:x.target)==null?void 0:p.files)==null?void 0:f[0];b&&(o(!0),setTimeout(()=>{const a=URL.createObjectURL(b);d(a),o(!1)},1500))};return e.jsx("div",{className:"bg-card rounded-lg shadow-card p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:space-x-6",children:[e.jsx("div",{className:"flex-shrink-0 mb-4 lg:mb-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-muted border-4 border-primary/20",children:e.jsx(G,{src:(i==null?void 0:i.photo)||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=400&fit=crop&crop=face",alt:`Photo de ${i==null?void 0:i.firstName} ${i==null?void 0:i.lastName}`,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"absolute bottom-0 right-0",children:[e.jsx("label",{htmlFor:"photo-upload",className:"cursor-pointer",children:e.jsx("div",{className:"w-10 h-10 bg-primary text-primary-foreground rounded-full flex items-center justify-center shadow-md hover:bg-primary/90 transition-micro",children:s?e.jsx(u,{name:"Loader2",size:16,className:"animate-spin"}):e.jsx(u,{name:"Camera",size:16})})}),e.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",onChange:g,className:"hidden",disabled:s})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"font-heading font-heading-bold text-2xl text-card-foreground mb-2",children:[i==null?void 0:i.firstName," ",i==null?void 0:i.lastName]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"Hash",size:16}),e.jsxs("span",{children:["ID: ",i==null?void 0:i.studentId]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"Calendar",size:16}),e.jsxs("span",{children:["Né le ",i==null?void 0:i.dateOfBirth]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"GraduationCap",size:16}),e.jsxs("span",{children:["Classe ",i==null?void 0:i.class]})]})]})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(N,{variant:h?"secondary":"default",onClick:M,iconName:h?"X":"Edit",iconPosition:"left",children:h?"Annuler":"Modifier"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-caption font-caption-normal ${(i==null?void 0:i.status)==="active"?"bg-success/10 text-success":"bg-warning/10 text-warning"}`,children:[e.jsx(u,{name:(i==null?void 0:i.status)==="active"?"CheckCircle":"AlertCircle",size:12,className:"mr-1"}),(i==null?void 0:i.status)==="active"?"Actif":"Inactif"]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-caption font-caption-normal bg-primary/10 text-primary",children:[e.jsx(u,{name:"Users",size:12,className:"mr-1"}),i==null?void 0:i.section]}),(i==null?void 0:i.hasSpecialNeeds)&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-caption font-caption-normal bg-accent/10 text-accent-foreground",children:[e.jsx(u,{name:"Heart",size:12,className:"mr-1"}),"Besoins spéciaux"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:[i==null?void 0:i.attendance,"%"]}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Présence"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:[i==null?void 0:i.averageGrade,"/20"]}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Moyenne"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:i==null?void 0:i.behaviorScore}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Comportement"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:i==null?void 0:i.parentMeetings}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Réunions"})]})]})]})]})})},Q=({student:i,isEditing:d,onSave:M,onCancel:h})=>{const[s,o]=v.useState({firstName:(i==null?void 0:i.firstName)||"",lastName:(i==null?void 0:i.lastName)||"",dateOfBirth:(i==null?void 0:i.dateOfBirth)||"",gender:(i==null?void 0:i.gender)||"",address:(i==null?void 0:i.address)||"",city:(i==null?void 0:i.city)||"",postalCode:(i==null?void 0:i.postalCode)||"",phone:(i==null?void 0:i.phone)||"",email:(i==null?void 0:i.email)||"",emergencyContact:(i==null?void 0:i.emergencyContact)||"",emergencyPhone:(i==null?void 0:i.emergencyPhone)||"",medicalInfo:(i==null?void 0:i.medicalInfo)||"",allergies:(i==null?void 0:i.allergies)||"",parentName:(i==null?void 0:i.parentName)||"",parentEmail:(i==null?void 0:i.parentEmail)||"",parentPhone:(i==null?void 0:i.parentPhone)||""}),[g,x]=v.useState(!1),b=[{value:"male",label:"Masculin"},{value:"female",label:"Féminin"},{value:"other",label:"Autre"}],p=(a,t)=>{o(S=>({...S,[a]:t}))},f=async()=>{x(!0),setTimeout(()=>{M(s),x(!1)},1e3)};return e.jsxs("div",{className:"bg-card rounded-lg shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"font-heading font-heading-semibold text-xl text-card-foreground flex items-center",children:[e.jsx(u,{name:"User",size:20,className:"mr-2 text-primary"}),"Informations personnelles"]}),d&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:h,iconName:"X",iconPosition:"left",children:"Annuler"}),e.jsx(N,{variant:"default",size:"sm",onClick:f,loading:g,iconName:"Save",iconPosition:"left",children:"Enregistrer"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground border-b border-border pb-2",children:"Informations de base"}),e.jsx(C,{label:"Prénom",type:"text",value:s==null?void 0:s.firstName,onChange:a=>{var t;return p("firstName",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d,required:!0}),e.jsx(C,{label:"Nom de famille",type:"text",value:s==null?void 0:s.lastName,onChange:a=>{var t;return p("lastName",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d,required:!0}),e.jsx(C,{label:"Date de naissance",type:"date",value:s==null?void 0:s.dateOfBirth,onChange:a=>{var t;return p("dateOfBirth",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d,required:!0}),e.jsx(A,{label:"Genre",options:b,value:s==null?void 0:s.gender,onChange:a=>p("gender",a),disabled:!d,placeholder:"Sélectionner le genre"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground border-b border-border pb-2",children:"Coordonnées"}),e.jsx(C,{label:"Adresse",type:"text",value:s==null?void 0:s.address,onChange:a=>{var t;return p("address",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(C,{label:"Ville",type:"text",value:s==null?void 0:s.city,onChange:a=>{var t;return p("city",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d}),e.jsx(C,{label:"Code postal",type:"text",value:s==null?void 0:s.postalCode,onChange:a=>{var t;return p("postalCode",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d})]}),e.jsx(C,{label:"Téléphone",type:"tel",value:s==null?void 0:s.phone,onChange:a=>{var t;return p("phone",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d}),e.jsx(C,{label:"Email",type:"email",value:s==null?void 0:s.email,onChange:a=>{var t;return p("email",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground border-b border-border pb-2",children:"Contact d'urgence"}),e.jsx(C,{label:"Nom du contact d'urgence",type:"text",value:s==null?void 0:s.emergencyContact,onChange:a=>{var t;return p("emergencyContact",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d}),e.jsx(C,{label:"Téléphone d'urgence",type:"tel",value:s==null?void 0:s.emergencyPhone,onChange:a=>{var t;return p("emergencyPhone",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground border-b border-border pb-2",children:"Informations des parents"}),e.jsx(C,{label:"Nom du parent/tuteur",type:"text",value:s==null?void 0:s.parentName,onChange:a=>{var t;return p("parentName",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d}),e.jsx(C,{label:"Email du parent",type:"email",value:s==null?void 0:s.parentEmail,onChange:a=>{var t;return p("parentEmail",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d}),e.jsx(C,{label:"Téléphone du parent",type:"tel",value:s==null?void 0:s.parentPhone,onChange:a=>{var t;return p("parentPhone",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d})]}),e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground border-b border-border pb-2",children:"Informations médicales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-body font-body-semibold text-sm text-card-foreground mb-2",children:"Informations médicales"}),e.jsx("textarea",{value:s==null?void 0:s.medicalInfo,onChange:a=>{var t;return p("medicalInfo",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d,rows:4,className:"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Conditions médicales, médicaments, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-body font-body-semibold text-sm text-card-foreground mb-2",children:"Allergies"}),e.jsx("textarea",{value:s==null?void 0:s.allergies,onChange:a=>{var t;return p("allergies",(t=a==null?void 0:a.target)==null?void 0:t.value)},disabled:!d,rows:4,className:"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Allergies alimentaires, médicamenteuses, etc."})]})]})]})]})]})},V=({student:i})=>{var b,p,f;const[d,M]=v.useState(null),h={gradeHistory:[{year:"2024-2025",semester:"Semestre 1",subjects:[{name:"Mathématiques",grade:16.5,coefficient:4,teacher:"M. Dubois"},{name:"Français",grade:14.2,coefficient:4,teacher:"Mme Martin"},{name:"Histoire-Géographie",grade:15.8,coefficient:3,teacher:"M. Bernard"},{name:"Sciences Physiques",grade:13.9,coefficient:3,teacher:"Mme Rousseau"},{name:"Anglais",grade:17.1,coefficient:3,teacher:"Ms Johnson"},{name:"EPS",grade:18,coefficient:2,teacher:"M. Leroy"}],average:15.4,rank:8,totalStudents:32},{year:"2023-2024",semester:"Semestre 2",subjects:[{name:"Mathématiques",grade:15.8,coefficient:4,teacher:"M. Dubois"},{name:"Français",grade:13.5,coefficient:4,teacher:"Mme Martin"},{name:"Histoire-Géographie",grade:16.2,coefficient:3,teacher:"M. Bernard"},{name:"Sciences Physiques",grade:14.7,coefficient:3,teacher:"Mme Rousseau"},{name:"Anglais",grade:16.8,coefficient:3,teacher:"Ms Johnson"},{name:"EPS",grade:17.5,coefficient:2,teacher:"M. Leroy"}],average:15.1,rank:12,totalStudents:30}],attendanceHistory:[{month:"Décembre 2024",present:18,absent:2,late:1,excused:2,unexcused:0,percentage:90},{month:"Novembre 2024",present:20,absent:1,late:0,excused:1,unexcused:0,percentage:95},{month:"Octobre 2024",present:22,absent:0,late:2,excused:0,unexcused:0,percentage:100}],behaviorAssessments:[{date:"15/12/2024",type:"positive",category:"Participation",description:"Excellente participation en cours de mathématiques",teacher:"M. Dubois",points:5},{date:"10/12/2024",type:"neutral",category:"Retard",description:"Arrivée en retard de 10 minutes",teacher:"Mme Martin",points:-2},{date:"05/12/2024",type:"positive",category:"Aide aux autres",description:"A aidé un camarade en difficulté",teacher:"M. Bernard",points:3}]},s=a=>{M(d===a?null:a)},o=a=>a>=16?"text-success":a>=14?"text-primary":a>=12?"text-warning":"text-error",g=a=>{switch(a){case"positive":return"ThumbsUp";case"negative":return"ThumbsDown";default:return"Minus"}},x=a=>{switch(a){case"positive":return"text-success bg-success/10";case"negative":return"text-error bg-error/10";default:return"text-warning bg-warning/10"}};return e.jsxs("div",{className:"bg-card rounded-lg shadow-card p-6 mb-6",children:[e.jsxs("h2",{className:"font-heading font-heading-semibold text-xl text-card-foreground flex items-center mb-6",children:[e.jsx(u,{name:"BookOpen",size:20,className:"mr-2 text-primary"}),"Dossier académique"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-border rounded-lg",children:[e.jsxs("button",{onClick:()=>s("grades"),className:"w-full flex items-center justify-between p-4 hover:bg-muted transition-micro",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"TrendingUp",size:20,className:"text-primary"}),e.jsx("span",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:"Historique des notes"})]}),e.jsx(u,{name:d==="grades"?"ChevronUp":"ChevronDown",size:20,className:"text-muted-foreground"})]}),d==="grades"&&e.jsx("div",{className:"border-t border-border p-4",children:e.jsx("div",{className:"space-y-6",children:(b=h==null?void 0:h.gradeHistory)==null?void 0:b.map((a,t)=>{var S;return e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-heading font-heading-semibold text-md text-card-foreground",children:[a==null?void 0:a.year," - ",a==null?void 0:a.semester]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Moyenne: ",e.jsxs("span",{className:`font-heading font-heading-semibold ${o(a==null?void 0:a.average)}`,children:[a==null?void 0:a.average,"/20"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:["Rang: ",a==null?void 0:a.rank,"/",a==null?void 0:a.totalStudents]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(S=a==null?void 0:a.subjects)==null?void 0:S.map((m,n)=>e.jsxs("div",{className:"bg-card rounded-lg p-3 border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-body font-body-semibold text-sm text-card-foreground",children:m==null?void 0:m.name}),e.jsxs("span",{className:`font-heading font-heading-bold text-lg ${o(m==null?void 0:m.grade)}`,children:[m==null?void 0:m.grade,"/20"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("div",{children:["Coeff: ",m==null?void 0:m.coefficient]}),e.jsxs("div",{children:["Prof: ",m==null?void 0:m.teacher]})]})]},n))})]},t)})})})]}),e.jsxs("div",{className:"border border-border rounded-lg",children:[e.jsxs("button",{onClick:()=>s("attendance"),className:"w-full flex items-center justify-between p-4 hover:bg-muted transition-micro",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"Calendar",size:20,className:"text-primary"}),e.jsx("span",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:"Historique de présence"})]}),e.jsx(u,{name:d==="attendance"?"ChevronUp":"ChevronDown",size:20,className:"text-muted-foreground"})]}),d==="attendance"&&e.jsx("div",{className:"border-t border-border p-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(p=h==null?void 0:h.attendanceHistory)==null?void 0:p.map((a,t)=>e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("h4",{className:"font-heading font-heading-semibold text-md text-card-foreground mb-3",children:a==null?void 0:a.month}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Présent:"}),e.jsx("span",{className:"font-body font-body-semibold text-success",children:a==null?void 0:a.present})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Absent:"}),e.jsx("span",{className:"font-body font-body-semibold text-error",children:a==null?void 0:a.absent})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Retard:"}),e.jsx("span",{className:"font-body font-body-semibold text-warning",children:a==null?void 0:a.late})]}),e.jsx("div",{className:"border-t border-border pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-body font-body-semibold text-card-foreground",children:"Taux:"}),e.jsxs("span",{className:`font-heading font-heading-bold ${(a==null?void 0:a.percentage)>=95?"text-success":(a==null?void 0:a.percentage)>=90?"text-warning":"text-error"}`,children:[a==null?void 0:a.percentage,"%"]})]})})]})]},t))})})]}),e.jsxs("div",{className:"border border-border rounded-lg",children:[e.jsxs("button",{onClick:()=>s("behavior"),className:"w-full flex items-center justify-between p-4 hover:bg-muted transition-micro",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"Heart",size:20,className:"text-primary"}),e.jsx("span",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:"Évaluations comportementales"})]}),e.jsx(u,{name:d==="behavior"?"ChevronUp":"ChevronDown",size:20,className:"text-muted-foreground"})]}),d==="behavior"&&e.jsx("div",{className:"border-t border-border p-4",children:e.jsx("div",{className:"space-y-4",children:(f=h==null?void 0:h.behaviorAssessments)==null?void 0:f.map((a,t)=>e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${x(a==null?void 0:a.type)}`,children:e.jsx(u,{name:g(a==null?void 0:a.type),size:16})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-card-foreground",children:a==null?void 0:a.category}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:a==null?void 0:a.date}),e.jsx("span",{children:"•"}),e.jsx("span",{children:a==null?void 0:a.teacher})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a==null?void 0:a.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${x(a==null?void 0:a.type)}`,children:(a==null?void 0:a.type)==="positive"?"Positif":(a==null?void 0:a.type)==="negative"?"Négatif":"Neutre"}),e.jsxs("span",{className:`font-body font-body-semibold text-sm ${(a==null?void 0:a.points)>0?"text-success":(a==null?void 0:a.points)<0?"text-error":"text-muted-foreground"}`,children:[(a==null?void 0:a.points)>0?"+":"",a==null?void 0:a.points," pts"]})]})]})]})},t))})})]})]})]})},W=({student:i})=>{var S,m;const[d,M]=v.useState(!1),[h,s]=v.useState(!1),[o,g]=v.useState({receivingSchool:"",transferReason:"",effectiveDate:"",parentConsent:!1,documentsComplete:!1}),x=[{value:"lycee-voltaire",label:"Lycée Voltaire - Paris 11ème"},{value:"college-pasteur",label:"Collège Pasteur - Neuilly-sur-Seine"},{value:"lycee-henri-iv",label:"Lycée Henri IV - Paris 5ème"},{value:"college-marie-curie",label:"Collège Marie Curie - Sceaux"},{value:"autre",label:"Autre établissement"}],b=[{value:"demenagement",label:"Déménagement"},{value:"orientation",label:"Réorientation scolaire"},{value:"familial",label:"Raisons familiales"},{value:"medical",label:"Raisons médicales"},{value:"disciplinaire",label:"Raisons disciplinaires"},{value:"autre",label:"Autre"}],p=async()=>{M(!0),setTimeout(()=>{s(!0),M(!1),console.log("SMS envoyé aux parents et à l'école de destination")},2e3)},f=(n,w)=>{g(z=>({...z,[n]:w}))},a=[{id:1,date:"15/09/2023",fromSchool:"École Primaire Saint-Exupéry",toSchool:"Collège Jean Moulin (Actuel)",reason:"Passage en 6ème",status:"Terminé",qrCode:"QR-2023-001"}],t=(o==null?void 0:o.receivingSchool)&&(o==null?void 0:o.transferReason)&&(o==null?void 0:o.effectiveDate)&&(o==null?void 0:o.parentConsent)&&(o==null?void 0:o.documentsComplete);return e.jsxs("div",{className:"bg-card rounded-lg shadow-card p-6 mb-6",children:[e.jsxs("h2",{className:"font-heading font-heading-semibold text-xl text-card-foreground flex items-center mb-6",children:[e.jsx(u,{name:"ArrowRightLeft",size:20,className:"mr-2 text-primary"}),"Gestion des transferts"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground border-b border-border pb-2",children:"Nouveau transfert"}),e.jsx(A,{label:"École de destination",options:x,value:o==null?void 0:o.receivingSchool,onChange:n=>f("receivingSchool",n),placeholder:"Sélectionner l'école",required:!0}),e.jsx(A,{label:"Motif du transfert",options:b,value:o==null?void 0:o.transferReason,onChange:n=>f("transferReason",n),placeholder:"Sélectionner le motif",required:!0}),e.jsx(C,{label:"Date d'effet",type:"date",value:o==null?void 0:o.effectiveDate,onChange:n=>{var w;return f("effectiveDate",(w=n==null?void 0:n.target)==null?void 0:w.value)},required:!0}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"parentConsent",checked:o==null?void 0:o.parentConsent,onChange:n=>{var w;return f("parentConsent",(w=n==null?void 0:n.target)==null?void 0:w.checked)},className:"w-4 h-4 text-primary bg-input border-border rounded focus:ring-primary focus:ring-2"}),e.jsx("label",{htmlFor:"parentConsent",className:"font-body font-body-normal text-sm text-card-foreground",children:"Consentement parental obtenu"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"documentsComplete",checked:o==null?void 0:o.documentsComplete,onChange:n=>{var w;return f("documentsComplete",(w=n==null?void 0:n.target)==null?void 0:w.checked)},className:"w-4 h-4 text-primary bg-input border-border rounded focus:ring-primary focus:ring-2"}),e.jsx("label",{htmlFor:"documentsComplete",className:"font-body font-body-normal text-sm text-card-foreground",children:"Dossier scolaire complet"})]})]}),e.jsx(N,{variant:"default",onClick:p,loading:d,disabled:!t,iconName:"QrCode",iconPosition:"left",fullWidth:!0,children:d?"Génération en cours...":"Générer le QR de transfert"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground border-b border-border pb-2",children:"Code QR de transfert"}),h?e.jsxs("div",{className:"bg-muted rounded-lg p-6 text-center",children:[e.jsx("div",{className:"w-48 h-48 bg-white border-2 border-border rounded-lg mx-auto mb-4 flex items-center justify-center",children:e.jsx("div",{className:"w-40 h-40 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:e.jsx(u,{name:"QrCode",size:80,color:"white"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-body font-body-semibold text-sm text-card-foreground",children:"Code QR généré avec succès"}),e.jsxs("p",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["ID: QR-",(S=new Date)==null?void 0:S.getFullYear(),"-",(m=String(Math.floor(Math.random()*1e3)))==null?void 0:m.padStart(3,"0")]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-success",children:[e.jsx(u,{name:"CheckCircle",size:14}),e.jsx("span",{children:"SMS envoyé aux parents et à l'école"})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx(N,{variant:"outline",size:"sm",iconName:"Download",children:"Télécharger"}),e.jsx(N,{variant:"outline",size:"sm",iconName:"Printer",children:"Imprimer"}),e.jsx(N,{variant:"outline",size:"sm",iconName:"Share",children:"Partager"})]})]}):e.jsxs("div",{className:"bg-muted rounded-lg p-6 text-center",children:[e.jsx(u,{name:"QrCode",size:64,className:"text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"font-body font-body-normal text-sm text-muted-foreground",children:"Remplissez le formulaire pour générer le code QR de transfert"})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground border-b border-border pb-2 mb-4",children:"Historique des transferts"}),e.jsx("div",{className:"space-y-4",children:a==null?void 0:a.map(n=>e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"ArrowRight",size:16,className:"text-primary"}),e.jsx("span",{className:"font-body font-body-semibold text-sm text-card-foreground",children:n==null?void 0:n.date})]}),e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-caption font-caption-normal bg-success/10 text-success",children:[e.jsx(u,{name:"CheckCircle",size:12,className:"mr-1"}),n==null?void 0:n.status]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"De: "}),e.jsx("span",{className:"font-body font-body-semibold text-card-foreground",children:n==null?void 0:n.fromSchool})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Vers: "}),e.jsx("span",{className:"font-body font-body-semibold text-card-foreground",children:n==null?void 0:n.toSchool})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Motif: "}),e.jsx("span",{className:"font-body font-body-normal text-card-foreground",children:n==null?void 0:n.reason})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Code QR: "}),e.jsx("span",{className:"font-mono text-primary",children:n==null?void 0:n.qrCode})]})]})]},n==null?void 0:n.id))})]})]})},J=({student:i})=>{var y,j;const[d,M]=v.useState("all"),[h,s]=v.useState(""),[o,g]=v.useState(!1),[x,b]=v.useState({recipient:"",subject:"",message:"",priority:"normal",type:"email"}),p=[{value:"all",label:"Tous les messages"},{value:"email",label:"Emails"},{value:"sms",label:"SMS"},{value:"notification",label:"Notifications"},{value:"meeting",label:"Réunions"}],f=[{value:"parent",label:"Parents"},{value:"student",label:"Élève"},{value:"teacher",label:"Enseignant"},{value:"administration",label:"Administration"}],a=[{value:"low",label:"Faible"},{value:"normal",label:"Normale"},{value:"high",label:"Élevée"},{value:"urgent",label:"Urgente"}],t=[{value:"email",label:"Email"},{value:"sms",label:"SMS"},{value:"notification",label:"Notification interne"}],S=[{id:1,date:"15/12/2024 14:30",type:"email",sender:"M. Dubois (Professeur)",recipient:"Parents",subject:"Excellents résultats en mathématiques",message:`Bonjour,

Je tenais à vous féliciter pour les excellents résultats de ${i==null?void 0:i.firstName} en mathématiques ce trimestre. Sa moyenne de 16.5/20 témoigne de son sérieux et de sa motivation.

Continuez ainsi !

Cordialement,
M. Dubois`,status:"delivered",priority:"normal",readAt:"15/12/2024 15:45"},{id:2,date:"12/12/2024 09:15",type:"sms",sender:"Secrétariat",recipient:"Parents",subject:"Rappel réunion parent-professeur",message:"Rappel: Réunion parent-professeur demain 16h. Merci de confirmer votre présence.",status:"delivered",priority:"high",readAt:"12/12/2024 09:20"},{id:3,date:"10/12/2024 16:00",type:"notification",sender:"Système",recipient:"Parents",subject:"Nouvelle note disponible",message:"Une nouvelle note a été ajoutée en Histoire-Géographie: 15.8/20",status:"read",priority:"normal",readAt:"10/12/2024 18:30"},{id:4,date:"08/12/2024 11:20",type:"email",sender:"Mme Martin (CPE)",recipient:"Parents",subject:"Absence non justifiée",message:`Bonjour,

${i==null?void 0:i.firstName} était absent(e) ce matin sans justificatif. Merci de nous faire parvenir un mot d'excuse.

Cordialement,
Mme Martin`,status:"delivered",priority:"high",readAt:"08/12/2024 12:00"},{id:5,date:"05/12/2024 13:45",type:"meeting",sender:"Direction",recipient:"Parents",subject:"Convocation réunion disciplinaire",message:"Suite à l'incident du 03/12, vous êtes convoqués pour un entretien le 07/12 à 14h.",status:"delivered",priority:"urgent",readAt:"05/12/2024 14:15"}],m={email:!0,sms:!0,push:!1,grades:!0,attendance:!0,behavior:!0,meetings:!0,payments:!1},n=S==null?void 0:S.filter(r=>{var k,T,q,B,U,E;const c=d==="all"||(r==null?void 0:r.type)===d,P=((T=(k=r==null?void 0:r.subject)==null?void 0:k.toLowerCase())==null?void 0:T.includes(h==null?void 0:h.toLowerCase()))||((B=(q=r==null?void 0:r.message)==null?void 0:q.toLowerCase())==null?void 0:B.includes(h==null?void 0:h.toLowerCase()))||((E=(U=r==null?void 0:r.sender)==null?void 0:U.toLowerCase())==null?void 0:E.includes(h==null?void 0:h.toLowerCase()));return c&&P}),w=r=>{switch(r){case"email":return"Mail";case"sms":return"MessageSquare";case"notification":return"Bell";case"meeting":return"Calendar";default:return"MessageCircle"}},z=r=>{switch(r){case"email":return"text-primary bg-primary/10";case"sms":return"text-success bg-success/10";case"notification":return"text-warning bg-warning/10";case"meeting":return"text-error bg-error/10";default:return"text-muted-foreground bg-muted"}},R=r=>{switch(r){case"urgent":return"text-error";case"high":return"text-warning";case"normal":return"text-primary";case"low":return"text-muted-foreground";default:return"text-muted-foreground"}},I=r=>{switch(r){case"delivered":return"Check";case"read":return"CheckCheck";case"failed":return"X";default:return"Clock"}},l=()=>{console.log("Message envoyé:",x),g(!1),b({recipient:"",subject:"",message:"",priority:"normal",type:"email"})};return e.jsxs("div",{className:"bg-card rounded-lg shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"font-heading font-heading-semibold text-xl text-card-foreground flex items-center",children:[e.jsx(u,{name:"MessageSquare",size:20,className:"mr-2 text-primary"}),"Journal de communication"]}),e.jsx(N,{variant:"default",onClick:()=>g(!o),iconName:"Plus",iconPosition:"left",children:"Nouveau message"})]}),o&&e.jsxs("div",{className:"bg-muted rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"Nouveau message"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx(A,{label:"Destinataire",options:f,value:x==null?void 0:x.recipient,onChange:r=>b(c=>({...c,recipient:r})),placeholder:"Sélectionner le destinataire"}),e.jsx(A,{label:"Type",options:t,value:x==null?void 0:x.type,onChange:r=>b(c=>({...c,type:r}))}),e.jsx(C,{label:"Sujet",type:"text",value:x==null?void 0:x.subject,onChange:r=>b(c=>{var P;return{...c,subject:(P=r==null?void 0:r.target)==null?void 0:P.value}}),placeholder:"Objet du message"}),e.jsx(A,{label:"Priorité",options:a,value:x==null?void 0:x.priority,onChange:r=>b(c=>({...c,priority:r}))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-body font-body-semibold text-sm text-card-foreground mb-2",children:"Message"}),e.jsx("textarea",{value:x==null?void 0:x.message,onChange:r=>b(c=>{var P;return{...c,message:(P=r==null?void 0:r.target)==null?void 0:P.value}}),rows:4,className:"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Tapez votre message ici..."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{variant:"default",onClick:l,children:"Envoyer"}),e.jsx(N,{variant:"outline",onClick:()=>g(!1),children:"Annuler"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(A,{options:p,value:d,onChange:M,className:"w-48"})}),e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(C,{type:"search",placeholder:"Rechercher dans les messages...",value:h,onChange:r=>{var c;return s((c=r==null?void 0:r.target)==null?void 0:c.value)}})})]}),e.jsx("div",{className:"space-y-4 mb-6",children:n==null?void 0:n.map(r=>e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${z(r==null?void 0:r.type)}`,children:e.jsx(u,{name:w(r==null?void 0:r.type),size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-card-foreground",children:r==null?void 0:r.subject}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:r==null?void 0:r.sender}),e.jsx("span",{children:"→"}),e.jsx("span",{children:r==null?void 0:r.recipient}),e.jsx("span",{children:"•"}),e.jsx("span",{children:r==null?void 0:r.date})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"AlertCircle",size:14,className:R(r==null?void 0:r.priority)}),e.jsx(u,{name:I(r==null?void 0:r.status),size:14,className:(r==null?void 0:r.status)==="read"?"text-success":"text-muted-foreground"})]})]}),e.jsx("p",{className:"text-sm text-card-foreground mb-3 whitespace-pre-line",children:r==null?void 0:r.message}),(r==null?void 0:r.readAt)&&e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[e.jsx(u,{name:"Eye",size:12}),e.jsxs("span",{children:["Lu le ",r==null?void 0:r.readAt]})]})]},r==null?void 0:r.id))}),e.jsxs("div",{className:"border-t border-border pt-6",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"Préférences de notification"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-card-foreground mb-3",children:"Canaux de communication"}),e.jsx("div",{className:"space-y-2",children:(y=Object.entries({email:"Email",sms:"SMS",push:"Notifications push"}))==null?void 0:y.map(([r,c])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-card-foreground",children:c}),e.jsx("button",{className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${m!=null&&m[r]?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${m!=null&&m[r]?"translate-x-5":"translate-x-1"}`})})]},r))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-card-foreground mb-3",children:"Types de notifications"}),e.jsx("div",{className:"space-y-2",children:(j=Object.entries({grades:"Nouvelles notes",attendance:"Absences",behavior:"Comportement",meetings:"Réunions",payments:"Paiements"}))==null?void 0:j.map(([r,c])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-card-foreground",children:c}),e.jsx("button",{className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${m!=null&&m[r]?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${m!=null&&m[r]?"translate-x-5":"translate-x-1"}`})})]},r))})]})]})]})]})},X=({student:i,userRole:d="secretary"})=>{var z,R,I;const[M,h]=v.useState(!1),[s,o]=v.useState("all"),[g,x]=v.useState({category:"",title:"",content:"",priority:"normal",confidential:!1,tags:""}),b=[{value:"all",label:"Toutes les catégories"},{value:"academic",label:"Académique"},{value:"behavioral",label:"Comportemental"},{value:"medical",label:"Médical"},{value:"family",label:"Familial"},{value:"administrative",label:"Administratif"},{value:"orientation",label:"Orientation"}],p=[{value:"low",label:"Faible"},{value:"normal",label:"Normale"},{value:"high",label:"Élevée"},{value:"urgent",label:"Urgente"}],f=[{id:1,date:"15/12/2024 14:30",author:"Mme Dubois (Secrétaire)",category:"academic",title:"Demande de soutien scolaire",content:`Les parents ont demandé un soutien scolaire en mathématiques pour ${i==null?void 0:i.firstName}. Malgré de bons résultats (16.5/20), ils souhaitent renforcer les bases avant le passage en classe supérieure.

Actions à prévoir:
- Contacter le professeur de mathématiques
- Proposer des créneaux de soutien
- Établir un planning avec les parents`,priority:"normal",confidential:!1,tags:["soutien","mathématiques","parents"],lastModified:"15/12/2024 14:30",modifiedBy:"Mme Dubois"},{id:2,date:"12/12/2024 09:15",author:"M. Martin (CPE)",category:"behavioral",title:"Incident cantine - Résolu",content:`Incident mineur à la cantine le 10/12. ${i==null?void 0:i.firstName} a eu un différend avec un camarade de classe.

Mesures prises:
- Entretien individuel avec chaque élève
- Réconciliation supervisée
- Surveillance renforcée pendant 1 semaine

Situation résolue, comportement exemplaire depuis.`,priority:"low",confidential:!1,tags:["cantine","conflit","résolu"],lastModified:"12/12/2024 09:15",modifiedBy:"M. Martin"},{id:3,date:"08/12/2024 16:45",author:"Dr. Rousseau (Infirmière)",category:"medical",title:"Suivi allergie alimentaire",content:`Mise à jour du PAI (Projet d'Accueil Individualisé) pour l'allergie aux arachides.

Nouvelles mesures:
- Trousse d'urgence mise à jour (EpiPen)
- Formation du personnel de cantine
- Sensibilisation des camarades de classe
- Contact d'urgence parents: 06.12.34.56.78`,priority:"high",confidential:!0,tags:["PAI","allergie","arachides","urgence"],lastModified:"08/12/2024 16:45",modifiedBy:"Dr. Rousseau"},{id:4,date:"05/12/2024 11:20",author:"Mme Leroy (Conseillère d'orientation)",category:"orientation",title:"Entretien d'orientation - Projet professionnel",content:`Entretien d'orientation avec ${i==null?void 0:i.firstName} et ses parents.

Points abordés:
- Intérêt marqué pour les sciences
- Projet d'orientation vers un bac scientifique
- Visite du lycée Pasteur prévue en janvier
- Stage d'observation en laboratoire à organiser

Prochain RDV: 15/01/2025`,priority:"normal",confidential:!1,tags:["orientation","sciences","bac-S","stage"],lastModified:"05/12/2024 11:20",modifiedBy:"Mme Leroy"},{id:5,date:"01/12/2024 13:30",author:"M. Durand (Principal)",category:"family",title:"Situation familiale - Confidentiel",content:`Entretien confidentiel avec les parents concernant des difficultés familiales temporaires.

Mesures de soutien mises en place:
- Suivi psychologique avec Mme Blanc
- Aménagement des horaires si nécessaire
- Communication renforcée avec l'équipe pédagogique

Situation à surveiller avec bienveillance.`,priority:"high",confidential:!0,tags:["confidentiel","famille","soutien","psychologique"],lastModified:"01/12/2024 13:30",modifiedBy:"M. Durand"}],a=f==null?void 0:f.filter(l=>s==="all"?!0:(l==null?void 0:l.category)===s),t=l=>{switch(l){case"academic":return"BookOpen";case"behavioral":return"Users";case"medical":return"Heart";case"family":return"Home";case"administrative":return"FileText";case"orientation":return"Compass";default:return"FileText"}},S=l=>{switch(l){case"academic":return"text-primary bg-primary/10";case"behavioral":return"text-warning bg-warning/10";case"medical":return"text-error bg-error/10";case"family":return"text-success bg-success/10";case"administrative":return"text-secondary bg-secondary/10";case"orientation":return"text-accent bg-accent/10";default:return"text-muted-foreground bg-muted"}},m=l=>{switch(l){case"urgent":return"text-error";case"high":return"text-warning";case"normal":return"text-primary";case"low":return"text-muted-foreground";default:return"text-muted-foreground"}},n=()=>{console.log("Note sauvegardée:",g),h(!1),x({category:"",title:"",content:"",priority:"normal",confidential:!1,tags:""})},w=d==="principal"||d==="secretary";return e.jsxs("div",{className:"bg-card rounded-lg shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"font-heading font-heading-semibold text-xl text-card-foreground flex items-center",children:[e.jsx(u,{name:"FileText",size:20,className:"mr-2 text-primary"}),"Notes administratives"]}),e.jsx(N,{variant:"default",onClick:()=>h(!M),iconName:"Plus",iconPosition:"left",children:"Nouvelle note"})]}),M&&e.jsxs("div",{className:"bg-muted rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"Nouvelle note administrative"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx(A,{label:"Catégorie",options:b==null?void 0:b.filter(l=>(l==null?void 0:l.value)!=="all"),value:g==null?void 0:g.category,onChange:l=>x(y=>({...y,category:l})),placeholder:"Sélectionner une catégorie"}),e.jsx(A,{label:"Priorité",options:p,value:g==null?void 0:g.priority,onChange:l=>x(y=>({...y,priority:l}))}),e.jsx(C,{label:"Titre",type:"text",value:g==null?void 0:g.title,onChange:l=>x(y=>{var j;return{...y,title:(j=l==null?void 0:l.target)==null?void 0:j.value}}),placeholder:"Titre de la note",className:"md:col-span-2"}),e.jsx(C,{label:"Tags (séparés par des virgules)",type:"text",value:g==null?void 0:g.tags,onChange:l=>x(y=>{var j;return{...y,tags:(j=l==null?void 0:l.target)==null?void 0:j.value}}),placeholder:"tag1, tag2, tag3",className:"md:col-span-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-body font-body-semibold text-sm text-card-foreground mb-2",children:"Contenu"}),e.jsx("textarea",{value:g==null?void 0:g.content,onChange:l=>x(y=>{var j;return{...y,content:(j=l==null?void 0:l.target)==null?void 0:j.value}}),rows:6,className:"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Contenu détaillé de la note..."})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("input",{type:"checkbox",id:"confidential",checked:g==null?void 0:g.confidential,onChange:l=>x(y=>{var j;return{...y,confidential:(j=l==null?void 0:l.target)==null?void 0:j.checked}}),className:"w-4 h-4 text-primary bg-input border-border rounded focus:ring-primary focus:ring-2"}),e.jsx("label",{htmlFor:"confidential",className:"font-body font-body-normal text-sm text-card-foreground",children:"Note confidentielle (accès restreint)"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{variant:"default",onClick:n,children:"Enregistrer"}),e.jsx(N,{variant:"outline",onClick:()=>h(!1),children:"Annuler"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(A,{options:b,value:s,onChange:o,className:"w-64"})}),e.jsx("div",{className:"space-y-4",children:a==null?void 0:a.map(l=>{var y,j;return l!=null&&l.confidential&&!w?e.jsx("div",{className:"bg-muted rounded-lg p-4 opacity-50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"Lock",size:16,className:"text-muted-foreground"}),e.jsx("span",{className:"font-body font-body-normal text-sm text-muted-foreground",children:"Note confidentielle - Accès restreint"})]})},l==null?void 0:l.id):e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${S(l==null?void 0:l.category)}`,children:e.jsx(u,{name:t(l==null?void 0:l.category),size:16})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-card-foreground",children:l==null?void 0:l.title}),(l==null?void 0:l.confidential)&&e.jsx(u,{name:"Lock",size:12,className:"text-warning"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:l==null?void 0:l.author}),e.jsx("span",{children:"•"}),e.jsx("span",{children:l==null?void 0:l.date})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"AlertCircle",size:14,className:m(l==null?void 0:l.priority)}),e.jsx(N,{variant:"ghost",size:"icon",className:"w-6 h-6",children:e.jsx(u,{name:"MoreVertical",size:12})})]})]}),e.jsx("p",{className:"text-sm text-card-foreground mb-3 whitespace-pre-line",children:l==null?void 0:l.content}),(l==null?void 0:l.tags)&&((y=l==null?void 0:l.tags)==null?void 0:y.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(j=l==null?void 0:l.tags)==null?void 0:j.map((r,c)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-caption font-caption-normal bg-primary/10 text-primary",children:["#",r]},c))}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground border-t border-border pt-2",children:[e.jsxs("span",{children:["Dernière modification: ",l==null?void 0:l.lastModified," par ",l==null?void 0:l.modifiedBy]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(N,{variant:"ghost",size:"sm",className:"text-xs",children:[e.jsx(u,{name:"Edit",size:12,className:"mr-1"}),"Modifier"]}),e.jsxs(N,{variant:"ghost",size:"sm",className:"text-xs",children:[e.jsx(u,{name:"Download",size:12,className:"mr-1"}),"Exporter"]})]})]})]},l==null?void 0:l.id)})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"Statistiques des notes"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:f==null?void 0:f.length}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Total notes"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:(z=f==null?void 0:f.filter(l=>l==null?void 0:l.confidential))==null?void 0:z.length}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Confidentielles"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:(R=f==null?void 0:f.filter(l=>(l==null?void 0:l.priority)==="high"||(l==null?void 0:l.priority)==="urgent"))==null?void 0:R.length}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Priorité élevée"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-lg text-card-foreground",children:(I=new Set(f.map(l=>l.author)))==null?void 0:I.size}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Contributeurs"})]})]})]})]})},ie=()=>{const i=L(),[d,M]=v.useState(!1),[h,s]=v.useState(!1),[o,g]=v.useState("secretary"),[x,b]=v.useState("STU-2024-001"),[p,f]=v.useState("profile"),{user:a}=F(),[t,S]=v.useState({studentId:"STU-2024-001",firstName:"Marie",lastName:"Dubois",dateOfBirth:"15/03/2010",gender:"female",class:"4ème B",section:"Générale",status:"active",hasSpecialNeeds:!1,photo:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=400&h=400&fit=crop&crop=face",address:"123 Rue de la République",city:"Paris",postalCode:"75011",phone:"01.23.45.67.89",email:"marie.dubois@email.com",emergencyContact:"Pierre Dubois",emergencyPhone:"06.12.34.56.78",medicalInfo:"Allergie aux arachides - PAI en cours",allergies:"Arachides, fruits à coque",parentName:"Pierre et Sophie Dubois",parentEmail:"parents.dubois@email.com",parentPhone:"06.12.34.56.78",attendance:92,averageGrade:15.4,behaviorScore:18,parentMeetings:3}),m=[{id:"STU-2024-001",name:"Marie Dubois",class:"4ème B"},{id:"STU-2024-002",name:"Thomas Martin",class:"4ème B"},{id:"STU-2024-003",name:"Emma Rousseau",class:"4ème A"},{id:"STU-2024-004",name:"Lucas Bernard",class:"3ème C"}];v.useEffect(()=>{var c;const r=((c=i==null?void 0:i.state)==null?void 0:c.userRole)||"secretary";g(r)},[i]);const n=()=>{M(!d)},w=r=>{S(c=>({...c,photo:r}))},z=()=>{s(!h)},R=r=>{S(c=>({...c,...r})),s(!1)},I=()=>{s(!1)},l=r=>{b(r);const c=m==null?void 0:m.find(P=>(P==null?void 0:P.id)===r);c&&S(P=>{var k,T,q,B;return{...P,studentId:c==null?void 0:c.id,firstName:(T=(k=c==null?void 0:c.name)==null?void 0:k.split(" "))==null?void 0:T[0],lastName:(B=(q=c==null?void 0:c.name)==null?void 0:q.split(" "))==null?void 0:B[1],class:c==null?void 0:c.class}})},y=()=>{var c;const r={student:t,exportDate:(c=new Date)==null?void 0:c.toISOString(),exportedBy:o};console.log("Exporting student data:",r)},j=[{id:"profile",label:"Profil",icon:"User"},{id:"academic",label:"Académique",icon:"BookOpen"},{id:"transfer",label:"Transfert",icon:"ArrowRightLeft"},{id:"communication",label:"Communication",icon:"MessageSquare"},{id:"notes",label:"Notes admin",icon:"FileText"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(O,{userRole:(a==null?void 0:a.role)||o,userName:(a==null?void 0:a.full_name)||(a==null?void 0:a.name)||"Utilisateur",onToggleSidebar:n}),e.jsx($,{userRole:(a==null?void 0:a.role)||o,isCollapsed:d,onToggle:n}),e.jsx("main",{className:`pt-16 transition-all duration-state ${d?"lg:pl-16":"lg:pl-64"}`,children:e.jsxs("div",{className:"p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading font-heading-bold text-2xl lg:text-3xl text-foreground mb-2",children:"Gestion des profils étudiants"}),e.jsx("p",{className:"font-body font-body-normal text-muted-foreground",children:"Gérez les informations complètes des étudiants et leur dossier académique"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[e.jsx("select",{value:x,onChange:r=>{var c;return l((c=r==null?void 0:r.target)==null?void 0:c.value)},className:"px-3 py-2 border border-border rounded-md bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:m==null?void 0:m.map(r=>e.jsxs("option",{value:r==null?void 0:r.id,children:[r==null?void 0:r.name," - ",r==null?void 0:r.class]},r==null?void 0:r.id))}),e.jsx(N,{variant:"outline",onClick:y,iconName:"Download",iconPosition:"left",children:"Exporter"})]})]}),e.jsx(H,{student:t,onPhotoUpdate:w,onEdit:z,isEditing:h}),e.jsx("div",{className:"bg-card rounded-lg shadow-card mb-6",children:e.jsx("div",{className:"border-b border-border",children:e.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:j==null?void 0:j.map(r=>e.jsxs("button",{onClick:()=>f(r==null?void 0:r.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-body font-body-semibold text-sm transition-micro ${p===(r==null?void 0:r.id)?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted"}`,children:[e.jsx(u,{name:r==null?void 0:r.icon,size:16}),e.jsx("span",{children:r==null?void 0:r.label})]},r==null?void 0:r.id))})})}),e.jsxs("div",{className:"space-y-6",children:[p==="profile"&&e.jsx(Q,{student:t,isEditing:h,onSave:R,onCancel:I}),p==="academic"&&e.jsx(V,{student:t}),p==="transfer"&&e.jsx(W,{student:t}),p==="communication"&&e.jsx(J,{student:t}),p==="notes"&&e.jsx(X,{student:t,userRole:o})]}),e.jsxs("div",{className:"mt-8 bg-card rounded-lg shadow-card p-6",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"Actions rapides"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(N,{variant:"outline",size:"sm",iconName:"Mail",iconPosition:"left",fullWidth:!0,children:"Contacter parents"}),e.jsx(N,{variant:"outline",size:"sm",iconName:"Calendar",iconPosition:"left",fullWidth:!0,children:"Planifier RDV"}),e.jsx(N,{variant:"outline",size:"sm",iconName:"FileText",iconPosition:"left",fullWidth:!0,children:"Générer rapport"}),e.jsx(N,{variant:"outline",size:"sm",iconName:"Archive",iconPosition:"left",fullWidth:!0,children:"Archiver dossier"})]})]})]})})]})};export{ie as default};
//# sourceMappingURL=index-Dki_v6h7.js.map
