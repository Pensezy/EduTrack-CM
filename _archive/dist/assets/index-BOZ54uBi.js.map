{"version":3,"file":"index-BOZ54uBi.js","sources":["../../src/pages/document-management-hub/components/FileUploadSection.jsx","../../src/pages/document-management-hub/components/DocumentGrid.jsx","../../src/pages/document-management-hub/components/TeacherAssignments.jsx","../../src/pages/document-management-hub/components/DocumentFilters.jsx","../../src/pages/document-management-hub/components/DocumentStats.jsx","../../src/pages/document-management-hub/components/AccessControlPanel.jsx","../../src/pages/document-management-hub/index.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useAuth } from '../../../contexts/AuthContext';\n\nconst FileUploadSection = ({ onUpload, uploading, teacherAssignments }) => {\n  const { userProfile } = useAuth();\n  const [dragActive, setDragActive] = useState(false);\n  const [uploadForm, setUploadForm] = useState({\n    title: '',\n    description: '',\n    class_name: '',\n    subject: '',\n    document_type: 'resource',\n    is_public: false\n  });\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [uploadMessage, setUploadMessage] = useState('');\n  const fileInputRef = useRef(null);\n\n  const documentTypes = [\n    { value: 'assignment', label: 'Devoir' },\n    { value: 'lesson', label: 'Cours' },\n    { value: 'exam', label: 'Examen' },\n    { value: 'resource', label: 'Ressource' },\n    { value: 'announcement', label: 'Annonce' },\n    { value: 'other', label: 'Autre' }\n  ];\n\n  const allowedFileTypes = [\n    'application/pdf',\n    'application/msword',\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    'application/vnd.ms-powerpoint',\n    'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n    'image/jpeg',\n    'image/png',\n    'image/jpg',\n    'image/webp'\n  ];\n\n  const maxFileSize = 50 * 1024 * 1024; // 50MB\n\n  const handleDrag = (e) => {\n    e?.preventDefault();\n    e?.stopPropagation();\n    if (e?.type === \"dragenter\" || e?.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e?.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e?.preventDefault();\n    e?.stopPropagation();\n    setDragActive(false);\n\n    if (e?.dataTransfer?.files && e?.dataTransfer?.files?.[0]) {\n      handleFileSelect(e?.dataTransfer?.files?.[0]);\n    }\n  };\n\n  const handleFileSelect = (file) => {\n    if (!file) return;\n\n    // Validate file type\n    if (!allowedFileTypes?.includes(file?.type)) {\n      setUploadMessage('Type de fichier non autoris√©. Formats accept√©s: PDF, Word, PowerPoint, Images.');\n      return;\n    }\n\n    // Validate file size\n    if (file?.size > maxFileSize) {\n      setUploadMessage('Le fichier est trop volumineux. Taille maximale: 50MB.');\n      return;\n    }\n\n    setSelectedFile(file);\n    setUploadMessage('');\n\n    // Auto-fill title if not set\n    if (!uploadForm?.title) {\n      const fileName = file?.name?.split('.')?.[0];\n      setUploadForm(prev => ({\n        ...prev,\n        title: fileName?.replace(/_/g, ' ')\n      }));\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e?.target;\n    setUploadForm(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e?.preventDefault();\n    \n    if (!selectedFile) {\n      setUploadMessage('Veuillez s√©lectionner un fichier.');\n      return;\n    }\n\n    if (!uploadForm?.title?.trim()) {\n      setUploadMessage('Le titre est requis.');\n      return;\n    }\n\n    if (!uploadForm?.class_name || !uploadForm?.subject) {\n      setUploadMessage('Veuillez s√©lectionner une classe et une mati√®re.');\n      return;\n    }\n\n    // Get school_id from user profile or first assignment\n    const schoolId = userProfile?.current_school_id || teacherAssignments?.[0]?.school?.id;\n    if (!schoolId) {\n      setUploadMessage('Impossible de d√©terminer l\\'√©cole. Contactez l\\'administrateur.');\n      return;\n    }\n\n    const documentData = {\n      ...uploadForm,\n      school_id: schoolId\n    };\n\n    const result = await onUpload({ documentData, file: selectedFile });\n    \n    if (result?.success) {\n      // Reset form\n      setUploadForm({\n        title: '',\n        description: '',\n        class_name: '',\n        subject: '',\n        document_type: 'resource',\n        is_public: false\n      });\n      setSelectedFile(null);\n      setUploadMessage('Document t√©l√©charg√© avec succ√®s!');\n      \n      // Clear success message after 3 seconds\n      setTimeout(() => setUploadMessage(''), 3000);\n    } else {\n      setUploadMessage(result?.message || 'Erreur lors du t√©l√©chargement.');\n    }\n  };\n\n  const triggerFileSelect = () => {\n    fileInputRef?.current?.click();\n  };\n\n  const removeSelectedFile = () => {\n    setSelectedFile(null);\n    setUploadMessage('');\n  };\n\n  // Get unique classes and subjects from assignments\n  const availableClasses = [...new Set(teacherAssignments?.map(a => a.class_name) || [])];\n  const availableSubjects = [...new Set(teacherAssignments?.map(a => a.subject) || [])];\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\n      <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n        üìÅ T√©l√©charger un Document\n      </h2>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* File Upload Area */}\n        <div\n          className={`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n            dragActive\n              ? 'border-blue-500 bg-blue-50' :'border-gray-300 hover:border-gray-400'\n          }`}\n          onDragEnter={handleDrag}\n          onDragLeave={handleDrag}\n          onDragOver={handleDrag}\n          onDrop={handleDrop}\n        >\n          {selectedFile ? (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-center space-x-2\">\n                <span className=\"text-2xl\">üìÑ</span>\n                <span className=\"font-medium text-gray-900\">{selectedFile?.name}</span>\n              </div>\n              <p className=\"text-sm text-gray-600\">\n                {(selectedFile?.size / 1024 / 1024)?.toFixed(2)} MB\n              </p>\n              <button\n                type=\"button\"\n                onClick={removeSelectedFile}\n                className=\"text-red-600 hover:text-red-700 text-sm font-medium\"\n              >\n                ‚ùå Retirer le fichier\n              </button>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              <div className=\"text-4xl text-gray-400\">üìÅ</div>\n              <p className=\"text-lg font-medium text-gray-700\">\n                Glissez-d√©posez votre fichier ici\n              </p>\n              <p className=\"text-sm text-gray-500\">ou</p>\n              <button\n                type=\"button\"\n                onClick={triggerFileSelect}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors\"\n              >\n                Parcourir les fichiers\n              </button>\n              <p className=\"text-xs text-gray-500 mt-2\">\n                Formats accept√©s: PDF, Word, PowerPoint, Images ‚Ä¢ Max: 50MB\n              </p>\n            </div>\n          )}\n        </div>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          className=\"hidden\"\n          onChange={(e) => handleFileSelect(e?.target?.files?.[0])}\n          accept=\".pdf,.doc,.docx,.ppt,.pptx,.jpg,.jpeg,.png,.webp\"\n        />\n\n        {/* Document Information */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Titre *\n            </label>\n            <input\n              type=\"text\"\n              name=\"title\"\n              value={uploadForm?.title}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Nom du document\"\n              required\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Type de document\n            </label>\n            <select\n              name=\"document_type\"\n              value={uploadForm?.document_type}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              {documentTypes?.map(type => (\n                <option key={type?.value} value={type?.value}>\n                  {type?.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Classe *\n            </label>\n            <select\n              name=\"class_name\"\n              value={uploadForm?.class_name}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n            >\n              <option value=\"\">S√©lectionner une classe</option>\n              {availableClasses?.map(className => (\n                <option key={className} value={className}>\n                  {className}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Mati√®re *\n            </label>\n            <select\n              name=\"subject\"\n              value={uploadForm?.subject}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n            >\n              <option value=\"\">S√©lectionner une mati√®re</option>\n              {availableSubjects?.map(subject => (\n                <option key={subject} value={subject}>\n                  {subject}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Description\n          </label>\n          <textarea\n            name=\"description\"\n            value={uploadForm?.description}\n            onChange={handleInputChange}\n            rows={3}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Description du document (optionnel)\"\n          />\n        </div>\n\n        {/* Options */}\n        <div className=\"flex items-center space-x-4\">\n          <label className=\"flex items-center space-x-2\">\n            <input\n              type=\"checkbox\"\n              name=\"is_public\"\n              checked={uploadForm?.is_public}\n              onChange={handleInputChange}\n              className=\"form-checkbox text-blue-600\"\n            />\n            <span className=\"text-sm text-gray-700\">\n              Document visible publiquement\n            </span>\n          </label>\n        </div>\n\n        {/* Upload Message */}\n        {uploadMessage && (\n          <div className={`p-3 rounded-md ${\n            uploadMessage?.includes('succ√®s')\n              ? 'bg-green-100 text-green-700' :'bg-red-100 text-red-700'\n          }`}>\n            {uploadMessage}\n          </div>\n        )}\n\n        {/* Submit Button */}\n        <div className=\"flex justify-end\">\n          <button\n            type=\"submit\"\n            disabled={uploading || !selectedFile}\n            className={`px-6 py-2 rounded-md font-medium transition-colors ${\n              uploading || !selectedFile\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' :'bg-blue-600 text-white hover:bg-blue-700'\n            }`}\n          >\n            {uploading ? '‚è≥ T√©l√©chargement...' : 'üì§ T√©l√©charger le document'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default FileUploadSection;","import React, { useState } from 'react';\n\nconst DocumentGrid = ({ documents, onDelete, onDownload, userRole, loading }) => {\n  const [deleteConfirm, setDeleteConfirm] = useState(null);\n  const [actionLoading, setActionLoading] = useState(null);\n\n  const getDocumentIcon = (mimeType) => {\n    if (mimeType?.includes('pdf')) return 'üìÑ';\n    if (mimeType?.includes('word')) return 'üìù';\n    if (mimeType?.includes('powerpoint') || mimeType?.includes('presentation')) return 'üìä';\n    if (mimeType?.includes('image')) return 'üñºÔ∏è';\n    return 'üìã';\n  };\n\n  const getDocumentTypeLabel = (type) => {\n    const types = {\n      assignment: 'Devoir',\n      lesson: 'Cours',\n      exam: 'Examen',\n      resource: 'Ressource',\n      announcement: 'Annonce',\n      other: 'Autre'\n    };\n    return types?.[type] || type;\n  };\n\n  const formatFileSize = (bytes) => {\n    if (!bytes) return '0 B';\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return `${(bytes / Math.pow(1024, i))?.toFixed(2)} ${sizes?.[i]}`;\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date?.toLocaleDateString('fr-FR', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const handleDownload = async (documentId) => {\n    setActionLoading(documentId);\n    try {\n      const result = await onDownload(documentId);\n      if (!result?.success) {\n        alert(result?.message || 'Erreur lors du t√©l√©chargement');\n      }\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const handleDelete = async (documentId) => {\n    setActionLoading(documentId);\n    try {\n      const result = await onDelete(documentId);\n      if (result?.success) {\n        setDeleteConfirm(null);\n      } else {\n        alert(result?.message || 'Erreur lors de la suppression');\n      }\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {[1, 2, 3, 4, 5, 6]?.map(i => (\n            <div key={i} className=\"animate-pulse\">\n              <div className=\"h-48 bg-gray-200 rounded-lg\"></div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (!documents?.length) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <div className=\"text-center py-12\">\n          <div className=\"text-6xl text-gray-400 mb-4\">üìÇ</div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            Aucun document trouv√©\n          </h3>\n          <p className=\"text-gray-600\">\n            {userRole === 'teacher' ?'Commencez par t√©l√©charger votre premier document.' :'Aucun document n\\'est disponible pour le moment.'\n            }\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\n      <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">\n        üìö Documents ({documents?.length})\n      </h2>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {documents?.map((document) => (\n          <div\n            key={document?.id}\n            className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\n          >\n            {/* Document Header */}\n            <div className=\"flex items-start justify-between mb-3\">\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"text-2xl\">\n                  {getDocumentIcon(document?.mime_type)}\n                </span>\n                <span className=\"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full\">\n                  {getDocumentTypeLabel(document?.document_type)}\n                </span>\n              </div>\n              \n              {document?.is_public && (\n                <span className=\"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full\">\n                  Public\n                </span>\n              )}\n            </div>\n\n            {/* Document Title */}\n            <h3 className=\"font-medium text-gray-900 mb-2 line-clamp-2\">\n              {document?.title}\n            </h3>\n\n            {/* Document Details */}\n            <div className=\"space-y-1 text-sm text-gray-600 mb-3\">\n              <div className=\"flex items-center space-x-2\">\n                <span>üè´</span>\n                <span>{document?.class_name}</span>\n                <span>‚Ä¢</span>\n                <span>{document?.subject}</span>\n              </div>\n              \n              {document?.uploader?.full_name && (\n                <div className=\"flex items-center space-x-2\">\n                  <span>üë®‚Äçüè´</span>\n                  <span>{document?.uploader?.full_name}</span>\n                </div>\n              )}\n\n              <div className=\"flex items-center space-x-2\">\n                <span>üìÖ</span>\n                <span>{formatDate(document?.created_at)}</span>\n              </div>\n\n              <div className=\"flex items-center space-x-2\">\n                <span>üíæ</span>\n                <span>{formatFileSize(document?.file_size)}</span>\n              </div>\n            </div>\n\n            {/* Description */}\n            {document?.description && (\n              <p className=\"text-sm text-gray-600 mb-3 line-clamp-2\">\n                {document?.description}\n              </p>\n            )}\n\n            {/* Actions */}\n            <div className=\"flex items-center justify-between pt-3 border-t border-gray-100\">\n              <button\n                onClick={() => handleDownload(document?.id)}\n                disabled={actionLoading === document?.id}\n                className=\"flex items-center space-x-2 text-blue-600 hover:text-blue-700 text-sm font-medium disabled:opacity-50\"\n              >\n                {actionLoading === document?.id ? (\n                  <>\n                    <span className=\"animate-spin\">‚è≥</span>\n                    <span>T√©l√©chargement...</span>\n                  </>\n                ) : (\n                  <>\n                    <span>üì•</span>\n                    <span>T√©l√©charger</span>\n                  </>\n                )}\n              </button>\n\n              {/* Delete button for teachers on their own documents */}\n              {userRole === 'teacher' && document?.uploaded_by && (\n                <button\n                  onClick={() => setDeleteConfirm(document?.id)}\n                  disabled={actionLoading === document?.id}\n                  className=\"flex items-center space-x-2 text-red-600 hover:text-red-700 text-sm font-medium disabled:opacity-50\"\n                >\n                  <span>üóëÔ∏è</span>\n                  <span>Supprimer</span>\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n      {/* Delete Confirmation Modal */}\n      {deleteConfirm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-sm w-full mx-4\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              Confirmer la suppression\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              √ätes-vous s√ªr de vouloir supprimer ce document ? Cette action est irr√©versible.\n            </p>\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => handleDelete(deleteConfirm)}\n                disabled={actionLoading === deleteConfirm}\n                className=\"flex-1 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 disabled:opacity-50 font-medium\"\n              >\n                {actionLoading === deleteConfirm ? 'Suppression...' : 'Supprimer'}\n              </button>\n              <button\n                onClick={() => setDeleteConfirm(null)}\n                disabled={actionLoading === deleteConfirm}\n                className=\"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 disabled:opacity-50 font-medium\"\n              >\n                Annuler\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DocumentGrid;","import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../../contexts/AuthContext';\r\nimport { documentService } from '../../../services/documentService';\r\n\r\nconst TeacherAssignments = ({ assignments, onAssignmentsUpdate }) => {\r\n  const { userProfile } = useAuth();\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [newAssignment, setNewAssignment] = useState({\r\n    teacher_id: '',\r\n    school_id: '',\r\n    class_name: '',\r\n    subject: ''\r\n  });\r\n  const [teachers, setTeachers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (userProfile?.role === 'principal' || userProfile?.role === 'secretary') {\r\n      loadTeachers();\r\n    }\r\n  }, [userProfile]);\r\n\r\n  const loadTeachers = async () => {\r\n    // This would typically load from a teachers endpoint\r\n    // For now, we'll use a simple implementation\r\n    setTeachers([\r\n      { id: '1', full_name: 'Tchoukoua Rose', email: 'ens.math@demo.cm' },\r\n      { id: '2', full_name: 'Mballa Jean', email: 'ens.francais@demo.cm' }\r\n    ]);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e?.target;\r\n    setNewAssignment(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n\r\n    try {\r\n      const assignmentData = {\r\n        ...newAssignment,\r\n        school_id: userProfile?.current_school_id\r\n      };\r\n\r\n      const result = await documentService?.assignTeacherToClass(assignmentData);\r\n      \r\n      if (result?.error) {\r\n        setMessage(result?.error);\r\n      } else {\r\n        setMessage('Assignation cr√©√©e avec succ√®s!');\r\n        setNewAssignment({\r\n          teacher_id: '',\r\n          school_id: '',\r\n          class_name: '',\r\n          subject: ''\r\n        });\r\n        setShowAddForm(false);\r\n        onAssignmentsUpdate?.();\r\n      }\r\n    } catch (error) {\r\n      setMessage('Erreur lors de l\\'assignation: ' + error?.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleRemoveAssignment = async (assignmentId) => {\r\n    if (!confirm('√ätes-vous s√ªr de vouloir retirer cette assignation ?')) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const result = await documentService?.removeTeacherAssignment(assignmentId);\r\n      \r\n      if (result?.error) {\r\n        alert('Erreur: ' + result?.error);\r\n      } else {\r\n        setMessage('Assignation retir√©e avec succ√®s!');\r\n        onAssignmentsUpdate?.();\r\n      }\r\n    } catch (error) {\r\n      alert('Erreur lors de la suppression: ' + error?.message);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date?.toLocaleDateString('fr-FR', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  // Common class and subject options\r\n  const classOptions = [\r\n    '6√®me A', '6√®me B', '6√®me C',\r\n    '5√®me A', '5√®me B', '5√®me C',\r\n    '4√®me A', '4√®me B', '4√®me C',\r\n    '3√®me A', '3√®me B', '3√®me C',\r\n    'Seconde A', 'Seconde B', 'Seconde C',\r\n    'Premi√®re A', 'Premi√®re B', 'Premi√®re C',\r\n    'Terminale A', 'Terminale B', 'Terminale C'\r\n  ];\r\n\r\n  const subjectOptions = [\r\n    'Math√©matiques', 'Fran√ßais', 'Anglais', 'Histoire-G√©ographie',\r\n    'Sciences Physiques', 'SVT', 'Philosophie', '√âconomie',\r\n    'Informatique', 'Arts Plastiques', 'Musique', 'EPS'\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">\r\n            üìã {userProfile?.role === 'teacher' ? 'Mes Assignations' : 'Gestion des Assignations'}\r\n          </h2>\r\n          \r\n          {(userProfile?.role === 'principal' || userProfile?.role === 'secretary') && (\r\n            <button\r\n              onClick={() => setShowAddForm(true)}\r\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors\"\r\n            >\r\n              ‚ûï Nouvelle Assignation\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {message && (\r\n          <div className={`p-3 rounded-md mb-4 ${\r\n            message?.includes('succ√®s')\r\n              ? 'bg-green-100 text-green-700' :'bg-red-100 text-red-700'\r\n          }`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Add Assignment Form */}\r\n      {showAddForm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n              Nouvelle Assignation\r\n            </h3>\r\n            \r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Professeur\r\n                </label>\r\n                <select\r\n                  name=\"teacher_id\"\r\n                  value={newAssignment?.teacher_id}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">S√©lectionner un professeur</option>\r\n                  {teachers?.map(teacher => (\r\n                    <option key={teacher?.id} value={teacher?.id}>\r\n                      {teacher?.full_name} ({teacher?.email})\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Classe\r\n                </label>\r\n                <select\r\n                  name=\"class_name\"\r\n                  value={newAssignment?.class_name}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">S√©lectionner une classe</option>\r\n                  {classOptions?.map(className => (\r\n                    <option key={className} value={className}>\r\n                      {className}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Mati√®re\r\n                </label>\r\n                <select\r\n                  name=\"subject\"\r\n                  value={newAssignment?.subject}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">S√©lectionner une mati√®re</option>\r\n                  {subjectOptions?.map(subject => (\r\n                    <option key={subject} value={subject}>\r\n                      {subject}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"flex space-x-3 pt-4\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50\"\r\n                >\r\n                  {loading ? 'Cr√©ation...' : 'Cr√©er l\\'assignation'}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowAddForm(false)}\r\n                  disabled={loading}\r\n                  className=\"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 disabled:opacity-50\"\r\n                >\r\n                  Annuler\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Assignments List */}\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        {!assignments?.length ? (\r\n          <div className=\"text-center py-8\">\r\n            <div className=\"text-4xl text-gray-400 mb-4\">üìã</div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n              Aucune assignation\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              {userProfile?.role === 'teacher' ?'Vous n\\'avez aucune classe assign√©e pour le moment.' :'Commencez par assigner des professeurs aux classes.'\r\n              }\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {assignments?.map((assignment) => (\r\n              <div\r\n                key={assignment?.id}\r\n                className=\"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-3 mb-2\">\r\n                      <span className=\"text-lg font-medium text-gray-900\">\r\n                        üìö {assignment?.class_name}\r\n                      </span>\r\n                      <span className=\"text-sm px-2 py-1 bg-blue-100 text-blue-800 rounded-full\">\r\n                        {assignment?.subject}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"text-sm text-gray-600 space-y-1\">\r\n                      {assignment?.school?.name && (\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <span>üè´</span>\r\n                          <span>{assignment?.school?.name}</span>\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <span>üìÖ</span>\r\n                        <span>Assign√© le {formatDate(assignment?.assigned_at)}</span>\r\n                      </div>\r\n\r\n                      {assignment?.assigned_by_user?.full_name && (\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <span>üë§</span>\r\n                          <span>Par {assignment?.assigned_by_user?.full_name}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {(userProfile?.role === 'principal' || userProfile?.role === 'secretary') && (\r\n                    <button\r\n                      onClick={() => handleRemoveAssignment(assignment?.id)}\r\n                      disabled={loading}\r\n                      className=\"text-red-600 hover:text-red-700 p-2 rounded-md hover:bg-red-50 transition-colors disabled:opacity-50\"\r\n                      title=\"Retirer l'assignation\"\r\n                    >\r\n                      <span>üóëÔ∏è</span>\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TeacherAssignments;","import React, { useState, useEffect } from 'react';\r\nimport { documentService } from '../../../services/documentService';\r\n\r\nconst DocumentFilters = ({ filters, onFiltersChange, userRole }) => {\r\n  const [availableOptions, setAvailableOptions] = useState({\r\n    classes: [],\r\n    subjects: []\r\n  });\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadAvailableOptions();\r\n  }, []);\r\n\r\n  const loadAvailableOptions = async () => {\r\n    try {\r\n      const result = await documentService?.getClassesAndSubjects();\r\n      if (result?.data) {\r\n        setAvailableOptions(result?.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur chargement options:', error);\r\n    }\r\n  };\r\n\r\n  const documentTypes = [\r\n    { value: '', label: 'Tous les types' },\r\n    { value: 'assignment', label: 'Devoirs' },\r\n    { value: 'lesson', label: 'Cours' },\r\n    { value: 'exam', label: 'Examens' },\r\n    { value: 'resource', label: 'Ressources' },\r\n    { value: 'announcement', label: 'Annonces' },\r\n    { value: 'other', label: 'Autres' }\r\n  ];\r\n\r\n  const handleFilterChange = (name, value) => {\r\n    const newFilters = {\r\n      ...filters,\r\n      [name]: value\r\n    };\r\n    onFiltersChange(newFilters);\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    const clearedFilters = {\r\n      class_name: '',\r\n      subject: '',\r\n      document_type: '',\r\n      search: ''\r\n    };\r\n    onFiltersChange(clearedFilters);\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-4\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-medium text-gray-900\">\r\n          üîç Filtres et Recherche\r\n        </h3>\r\n        \r\n        <div className=\"flex items-center space-x-3\">\r\n          {hasActiveFilters && (\r\n            <button\r\n              onClick={clearAllFilters}\r\n              className=\"text-sm text-red-600 hover:text-red-700 font-medium\"\r\n            >\r\n              Effacer les filtres\r\n            </button>\r\n          )}\r\n          \r\n          <button\r\n            onClick={() => setShowFilters(!showFilters)}\r\n            className=\"text-sm text-blue-600 hover:text-blue-700 font-medium md:hidden\"\r\n          >\r\n            {showFilters ? 'Masquer' : 'Afficher'} les filtres\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {/* Search Bar - Always visible */}\r\n      <div className=\"mb-4\">\r\n        <div className=\"relative\">\r\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n            <span className=\"text-gray-400\">üîç</span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Rechercher par titre, description, classe ou mati√®re...\"\r\n            value={filters?.search}\r\n            onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n          {filters?.search && (\r\n            <button\r\n              onClick={() => handleFilterChange('search', '')}\r\n              className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n            >\r\n              <span className=\"text-gray-400 hover:text-gray-600\">‚ùå</span>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Filter Options - Collapsible on mobile */}\r\n      <div className={`grid grid-cols-1 md:grid-cols-4 gap-4 ${showFilters ? 'block' : 'hidden md:grid'}`}>\r\n        {/* Class Filter */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Classe\r\n          </label>\r\n          <select\r\n            value={filters?.class_name}\r\n            onChange={(e) => handleFilterChange('class_name', e?.target?.value)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\r\n          >\r\n            <option value=\"\">Toutes les classes</option>\r\n            {availableOptions?.classes?.map(className => (\r\n              <option key={className} value={className}>\r\n                {className}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Subject Filter */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Mati√®re\r\n          </label>\r\n          <select\r\n            value={filters?.subject}\r\n            onChange={(e) => handleFilterChange('subject', e?.target?.value)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\r\n          >\r\n            <option value=\"\">Toutes les mati√®res</option>\r\n            {availableOptions?.subjects?.map(subject => (\r\n              <option key={subject} value={subject}>\r\n                {subject}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Document Type Filter */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Type de document\r\n          </label>\r\n          <select\r\n            value={filters?.document_type}\r\n            onChange={(e) => handleFilterChange('document_type', e?.target?.value)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\r\n          >\r\n            {documentTypes?.map(type => (\r\n              <option key={type?.value} value={type?.value}>\r\n                {type?.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Actions rapides\r\n          </label>\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={() => handleFilterChange('document_type', 'assignment')}\r\n              className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                filters?.document_type === 'assignment' ?'bg-blue-600 text-white' :'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n              }`}\r\n            >\r\n              üìã Devoirs\r\n            </button>\r\n            <button\r\n              onClick={() => handleFilterChange('document_type', 'lesson')}\r\n              className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                filters?.document_type === 'lesson' ?'bg-blue-600 text-white' :'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n              }`}\r\n            >\r\n              üìö Cours\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Active Filters Display */}\r\n      {hasActiveFilters && (\r\n        <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n          <div className=\"flex flex-wrap items-center gap-2\">\r\n            <span className=\"text-sm text-gray-600 font-medium\">Filtres actifs:</span>\r\n            \r\n            {filters?.search && (\r\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n                üîç \"{filters?.search}\"\r\n                <button\r\n                  onClick={() => handleFilterChange('search', '')}\r\n                  className=\"ml-1 text-blue-600 hover:text-blue-800\"\r\n                >\r\n                  ‚ùå\r\n                </button>\r\n              </span>\r\n            )}\r\n\r\n            {filters?.class_name && (\r\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                üè´ {filters?.class_name}\r\n                <button\r\n                  onClick={() => handleFilterChange('class_name', '')}\r\n                  className=\"ml-1 text-green-600 hover:text-green-800\"\r\n                >\r\n                  ‚ùå\r\n                </button>\r\n              </span>\r\n            )}\r\n\r\n            {filters?.subject && (\r\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800\">\r\n                üìñ {filters?.subject}\r\n                <button\r\n                  onClick={() => handleFilterChange('subject', '')}\r\n                  className=\"ml-1 text-purple-600 hover:text-purple-800\"\r\n                >\r\n                  ‚ùå\r\n                </button>\r\n              </span>\r\n            )}\r\n\r\n            {filters?.document_type && (\r\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                üìÑ {documentTypes?.find(t => t?.value === filters?.document_type)?.label}\r\n                <button\r\n                  onClick={() => handleFilterChange('document_type', '')}\r\n                  className=\"ml-1 text-yellow-600 hover:text-yellow-800\"\r\n                >\r\n                  ‚ùå\r\n                </button>\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentFilters;","import React from 'react';\n\nconst DocumentStats = ({ stats, documents }) => {\n  if (!stats) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-4 bg-gray-200 rounded mb-4\"></div>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {[1, 2, 3]?.map(i => (\n              <div key={i} className=\"h-24 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const getTypeIcon = (type) => {\n    const icons = {\n      assignment: 'üìã',\n      lesson: 'üìö',\n      exam: 'üìù',\n      resource: 'üìÑ',\n      announcement: 'üì¢',\n      other: 'üìÅ'\n    };\n    return icons?.[type] || 'üìÑ';\n  };\n\n  const getTypeLabel = (type) => {\n    const labels = {\n      assignment: 'Devoirs',\n      lesson: 'Cours',\n      exam: 'Examens',\n      resource: 'Ressources',\n      announcement: 'Annonces',\n      other: 'Autres'\n    };\n    return labels?.[type] || type;\n  };\n\n  // Calculate additional stats\n  const totalSize = documents?.reduce((sum, doc) => sum + (doc?.file_size || 0), 0) || 0;\n  const formatSize = (bytes) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i))?.toFixed(2)) + ' ' + sizes?.[i];\n  };\n\n  // Calculate class and subject distribution\n  const classDistribution = {};\n  const subjectDistribution = {};\n  \n  documents?.forEach(doc => {\n    classDistribution[doc.class_name] = (classDistribution?.[doc?.class_name] || 0) + 1;\n    subjectDistribution[doc.subject] = (subjectDistribution?.[doc?.subject] || 0) + 1;\n  });\n\n  const topClasses = Object.entries(classDistribution)?.sort(([,a], [,b]) => b - a)?.slice(0, 5);\n    \n  const topSubjects = Object.entries(subjectDistribution)?.sort(([,a], [,b]) => b - a)?.slice(0, 5);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Overview Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Total Documents</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.total}</p>\n            </div>\n            <div className=\"text-3xl text-blue-500\">üìö</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Ce mois</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats?.thisMonth}</p>\n            </div>\n            <div className=\"text-3xl text-green-500\">üìÖ</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Taille totale</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{formatSize(totalSize)}</p>\n            </div>\n            <div className=\"text-3xl text-purple-500\">üíæ</div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Classes</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{Object.keys(classDistribution)?.length}</p>\n            </div>\n            <div className=\"text-3xl text-orange-500\">üè´</div>\n          </div>\n        </div>\n      </div>\n      {/* Document Types Distribution */}\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n          üìä R√©partition par type de document\n        </h3>\n        \n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n          {Object.entries(stats?.byType || {})?.map(([type, count]) => (\n            <div key={type} className=\"text-center\">\n              <div className=\"text-3xl mb-2\">{getTypeIcon(type)}</div>\n              <div className=\"text-xl font-bold text-gray-900\">{count}</div>\n              <div className=\"text-sm text-gray-600\">{getTypeLabel(type)}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n      {/* Class and Subject Distribution */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Top Classes */}\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n            üè´ Documents par classe\n          </h3>\n          \n          {topClasses?.length > 0 ? (\n            <div className=\"space-y-3\">\n              {topClasses?.map(([className, count]) => (\n                <div key={className} className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-700\">{className}</span>\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"bg-blue-200 rounded-full h-2 flex-1 min-w-[60px]\">\n                      <div \n                        className=\"bg-blue-600 h-2 rounded-full\"\n                        style={{ \n                          width: `${(count / Math.max(...topClasses?.map(([,c]) => c))) * 100}%` \n                        }}\n                      ></div>\n                    </div>\n                    <span className=\"text-sm font-medium text-gray-900 w-8 text-right\">\n                      {count}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-gray-500 text-center py-4\">Aucune donn√©e disponible</p>\n          )}\n        </div>\n\n        {/* Top Subjects */}\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n            üìñ Documents par mati√®re\n          </h3>\n          \n          {topSubjects?.length > 0 ? (\n            <div className=\"space-y-3\">\n              {topSubjects?.map(([subject, count]) => (\n                <div key={subject} className=\"flex items-center justify-between\">\n                  <span className=\"text-gray-700\">{subject}</span>\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"bg-green-200 rounded-full h-2 flex-1 min-w-[60px]\">\n                      <div \n                        className=\"bg-green-600 h-2 rounded-full\"\n                        style={{ \n                          width: `${(count / Math.max(...topSubjects?.map(([,c]) => c))) * 100}%` \n                        }}\n                      ></div>\n                    </div>\n                    <span className=\"text-sm font-medium text-gray-900 w-8 text-right\">\n                      {count}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-gray-500 text-center py-4\">Aucune donn√©e disponible</p>\n          )}\n        </div>\n      </div>\n      {/* Recent Activity */}\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n          ‚è∞ Activit√© r√©cente\n        </h3>\n        \n        {documents?.length > 0 ? (\n          <div className=\"space-y-3\">\n            {documents?.slice(0, 5)?.map((doc) => (\n              <div key={doc?.id} className=\"flex items-center space-x-3 py-2 border-b border-gray-100 last:border-b-0\">\n                <span className=\"text-2xl\">{getTypeIcon(doc?.document_type)}</span>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-gray-900 truncate\">\n                    {doc?.title}\n                  </p>\n                  <p className=\"text-sm text-gray-500\">\n                    {doc?.class_name} ‚Ä¢ {doc?.subject}\n                  </p>\n                </div>\n                <div className=\"text-sm text-gray-400\">\n                  {new Date(doc.created_at)?.toLocaleDateString('fr-FR')}\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <p className=\"text-gray-500 text-center py-4\">Aucun document r√©cent</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentStats;","import React, { useState } from 'react';\n\nconst AccessControlPanel = ({ userRole, isPrincipalMode = false, selectedAccount = null }) => {\n  const [showInfo, setShowInfo] = useState(false);\n\n  const getRolePermissions = (role) => {\n    // Mode principal avec supervision\n    if (isPrincipalMode && role === 'principal') {\n      return {\n        icon: 'üë®‚Äçüíº',\n        title: 'Principal - Mode Supervision',\n        permissions: [\n          '‚úÖ Voir tous les comptes personnel avec acc√®s documents',\n          '‚úÖ Consulter les documents de chaque compte individuellement',\n          '‚úÖ Analyser les statistiques d\\'utilisation par compte',\n          '‚úÖ Contr√¥ler les acc√®s et permissions',\n          '‚úÖ Superviser l\\'activit√© documentaire du personnel',\n          '‚úÖ Tra√ßabilit√© compl√®te des actions utilisateurs',\n          '‚ùå Modifier ou supprimer les documents d\\'autrui'\n        ],\n        description: 'Mode supervision permettant le contr√¥le centralis√© des documents par compte personnel.'\n      };\n    }\n\n    switch (role) {\n      case 'secretary':\n        return {\n          icon: 'üë©‚Äçüíº',\n          title: 'Secr√©taire',\n          permissions: [\n            '‚úÖ Cr√©er des comptes professeurs',\n            '‚úÖ Assigner des professeurs aux classes',\n            '‚úÖ Voir tous les documents de l\\'√©cole',\n            '‚úÖ G√©rer les assignations de classes',\n            '‚ùå T√©l√©charger des documents (r√©serv√© aux professeurs)',\n            '‚ùå Modifier les documents existants'\n          ],\n          description: 'Les secr√©taires g√®rent les comptes et assignations apr√®s validation du Minist√®re.'\n        };\n      \n      case 'principal':\n        return {\n          icon: 'üë®‚Äçüíº',\n          title: 'Principal - Mode Standard',\n          permissions: [\n            '‚úÖ Assigner des professeurs aux classes et mati√®res',\n            '‚úÖ Voir tous les documents de l\\'√©cole',\n            '‚úÖ Approuver les transferts d\\'√©l√®ves',\n            '‚úÖ G√©rer toutes les assignations',\n            '‚úÖ Acc√©der aux statistiques globales',\n            '‚ùå T√©l√©charger des documents directement'\n          ],\n          description: 'Les principaux supervisent les assignations et valident les processus administratifs.'\n        };\n\n      case 'teacher':\n        return {\n          icon: 'üë©‚Äçüè´',\n          title: 'Professeur',\n          permissions: [\n            '‚úÖ T√©l√©charger des documents pour ses classes assign√©es',\n            '‚úÖ Voir ses assignations de classes/mati√®res',\n            '‚úÖ Supprimer ses propres documents',\n            '‚úÖ Organiser les documents par classe et mati√®re',\n            '‚úÖ Suivre les statistiques de ses documents',\n            '‚ùå Voir les documents des autres professeurs'\n          ],\n          description: 'Les professeurs ne peuvent g√©rer que les documents de leurs classes assign√©es.'\n        };\n\n      case 'student':\n        return {\n          icon: 'üéì',\n          title: '√âtudiant',\n          permissions: [\n            '‚úÖ Voir les documents de ses classes actuelles',\n            '‚úÖ T√©l√©charger les documents autoris√©s',\n            '‚úÖ Acc√©der aux cours et devoirs de ses mati√®res',\n            '‚ùå T√©l√©charger des documents',\n            '‚ùå Voir les documents d\\'autres classes',\n            '‚ùå Modifier ou supprimer des documents'\n          ],\n          description: 'Les √©tudiants ont un acc√®s lecture seule aux documents de leurs classes.'\n        };\n\n      case 'parent':\n        return {\n          icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',\n          title: 'Parent',\n          permissions: [\n            '‚úÖ Voir les documents des classes de ses enfants',\n            '‚úÖ T√©l√©charger certains documents (devoirs corrig√©s, bulletins)',\n            '‚úÖ Acc√©der aux annonces importantes',\n            '‚ùå Voir tous les cours et ressources',\n            '‚ùå T√©l√©charger des documents',\n            '‚ùå Acc√©der aux documents d\\'autres √©l√®ves'\n          ],\n          description: 'Les parents ont un acc√®s limit√© aux documents concernant directement leurs enfants.'\n        };\n\n      default:\n        return {\n          icon: 'üë§',\n          title: 'Utilisateur',\n          permissions: [\n            '‚ùå Acc√®s restreint selon le r√¥le',\n            '‚ùå Contactez l\\'administrateur pour plus d\\'informations'\n          ],\n          description: 'R√¥le non reconnu ou permissions non d√©finies.'\n        };\n    }\n  };\n\n  const roleInfo = getRolePermissions(userRole);\n\n  const securityFeatures = [\n    {\n      icon: 'üîí',\n      title: 'Stockage Priv√©',\n      description: 'Tous les documents sont stock√©s dans un bucket priv√© s√©curis√©'\n    },\n    {\n      icon: 'üë•',\n      title: 'Contr√¥le d\\'Acc√®s Bas√© sur les R√¥les',\n      description: 'Chaque utilisateur ne voit que les documents autoris√©s selon son r√¥le'\n    },\n    {\n      icon: 'üìã',\n      title: 'Assignations Officielles',\n      description: 'Les professeurs sont assign√©s officiellement par le Minist√®re'\n    },\n    {\n      icon: 'üè´',\n      title: 'Isolation par √âcole',\n      description: 'Les documents sont isol√©s par √©tablissement scolaire'\n    },\n    {\n      icon: 'üìù',\n      title: 'Tra√ßabilit√©',\n      description: 'Tous les acc√®s aux documents sont enregistr√©s et tra√ßables'\n    },\n    {\n      icon: 'üîê',\n      title: 'URLs Sign√©es',\n      description: 'Les t√©l√©chargements utilisent des URLs temporaires s√©curis√©es'\n    }\n  ];\n\n  return (\n    <div className=\"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-medium text-gray-900 flex items-center space-x-2\">\n          <span>üõ°Ô∏è</span>\n          <span>S√©curit√© et Contr√¥le d'Acc√®s</span>\n        </h3>\n        \n        <button\n          onClick={() => setShowInfo(!showInfo)}\n          className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\"\n        >\n          {showInfo ? 'Masquer' : 'Afficher'} les d√©tails\n        </button>\n      </div>\n      {/* Current User Role Info */}\n      <div className=\"bg-white rounded-lg p-4 mb-4 border border-blue-100\">\n        <div className=\"flex items-center space-x-3 mb-3\">\n          <span className=\"text-2xl\">{roleInfo?.icon}</span>\n          <div>\n            <h4 className=\"font-medium text-gray-900\">\n              Votre r√¥le: {roleInfo?.title}\n            </h4>\n            <p className=\"text-sm text-gray-600\">{roleInfo?.description}</p>\n          </div>\n        </div>\n\n        {/* Informations du compte supervis√© (mode principal uniquement) */}\n        {isPrincipalMode && selectedAccount && (\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3\">\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"text-lg\">\n                {selectedAccount.role === 'teacher' ? 'üë©‚Äçüè´' : 'üë©‚Äçüíº'}\n              </span>\n              <div>\n                <h5 className=\"font-medium text-blue-900\">\n                  Supervision de: {selectedAccount.full_name}\n                </h5>\n                <p className=\"text-sm text-blue-700\">\n                  {selectedAccount.role === 'teacher' \n                    ? `Enseignant en ${selectedAccount.subject}` \n                    : 'Secr√©taire'}\n                  {selectedAccount.classes && selectedAccount.classes.length > 0 && \n                    ` - Classes: ${selectedAccount.classes.join(', ')}`\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {showInfo && (\n          <div className=\"border-t border-gray-100 pt-3\">\n            <h5 className=\"font-medium text-gray-900 mb-2\">\n              {isPrincipalMode ? 'Permissions de supervision:' : 'Vos permissions:'}\n            </h5>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n              {roleInfo?.permissions?.map((permission, index) => (\n                <div key={index} className=\"text-sm flex items-start space-x-2\">\n                  <span className=\"mt-0.5\">{permission?.startsWith('‚úÖ') ? '‚úÖ' : '‚ùå'}</span>\n                  <span className={permission?.startsWith('‚úÖ') ? 'text-green-700' : 'text-red-700'}>\n                    {permission?.substring(2)}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n      {/* Security Features */}\n      {showInfo && (\n        <div className=\"bg-white rounded-lg p-4 border border-blue-100\">\n          <h5 className=\"font-medium text-gray-900 mb-3\">Fonctionnalit√©s de S√©curit√©:</h5>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {securityFeatures?.map((feature, index) => (\n              <div key={index} className=\"flex items-start space-x-3\">\n                <span className=\"text-xl mt-0.5\">{feature?.icon}</span>\n                <div>\n                  <h6 className=\"text-sm font-medium text-gray-900\">\n                    {feature?.title}\n                  </h6>\n                  <p className=\"text-xs text-gray-600\">\n                    {feature?.description}\n                  </p>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Process Workflow */}\n          <div className=\"mt-6 pt-6 border-t border-gray-100\">\n            <h5 className=\"font-medium text-gray-900 mb-3\">Processus d'Assignation:</h5>\n            <div className=\"flex flex-col md:flex-row items-start md:items-center space-y-2 md:space-y-0 md:space-x-4 text-sm\">\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-medium\">1</span>\n                <span>Minist√®re assigne le professeur</span>\n              </div>\n              <span className=\"hidden md:block\">‚Üí</span>\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-medium\">2</span>\n                <span>Secr√©taire cr√©e le compte</span>\n              </div>\n              <span className=\"hidden md:block\">‚Üí</span>\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-medium\">3</span>\n                <span>Principal assigne aux classes</span>\n              </div>\n              <span className=\"hidden md:block\">‚Üí</span>\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-medium\">4</span>\n                <span>Professeur g√®re ses documents</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AccessControlPanel;","import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { documentService } from '../../services/documentService';\r\nimport { supabase } from '../../lib/supabase';\r\nimport useDashboardData from '../../hooks/useDashboardData';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\n\r\n// Components\r\nimport FileUploadSection from './components/FileUploadSection';\r\nimport DocumentGrid from './components/DocumentGrid';\r\nimport TeacherAssignments from './components/TeacherAssignments';\r\nimport DocumentFilters from './components/DocumentFilters';\r\nimport DocumentStats from './components/DocumentStats';\r\nimport AccessControlPanel from './components/AccessControlPanel';\r\n\r\nconst DocumentManagementHub = () => {\r\n  const location = useLocation();\r\n  const { user, userProfile } = useAuth();\r\n  const { data, loading: dataLoading } = useDashboardData();\r\n  \r\n  // D√©tecter le mode principal depuis l'URL\r\n  const urlParams = new URLSearchParams(location.search);\r\n  const isPrincipalMode = urlParams.get('mode') === 'principal' || userProfile?.role === 'principal';\r\n  \r\n  const [documents, setDocuments] = useState([]);\r\n  const [teacherAssignments, setTeacherAssignments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [selectedAccount, setSelectedAccount] = useState(null);\r\n  const [filters, setFilters] = useState({\r\n    class_name: '',\r\n    subject: '',\r\n    document_type: '',\r\n    search: '',\r\n    account_id: ''\r\n  });\r\n  const [stats, setStats] = useState(null);\r\n  const [activeView, setActiveView] = useState(isPrincipalMode ? 'overview' : 'documents'); // overview, accounts, documents, assignments, stats\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n    setupRealtimeSubscription();\r\n  }, [user]);\r\n\r\n  // G√©n√©rer des documents de d√©monstration\r\n  const getDemoDocuments = () => {\r\n    return [\r\n      {\r\n        id: 'doc-1',\r\n        title: 'Cours de Math√©matiques - √âquations du 2nd degr√©',\r\n        description: 'Support de cours pour la classe de 3√®me',\r\n        file_name: 'maths_equations_3eme.pdf',\r\n        file_size: 245760,\r\n        document_type: 'cours',\r\n        class_name: '3√®meA',\r\n        subject: 'Math√©matiques',\r\n        created_at: '2024-10-05T10:30:00Z',\r\n        uploaded_by: 'Marie Dubois',\r\n        uploader_id: 'demo-teacher-1',\r\n        download_count: 12,\r\n        status: 'active'\r\n      },\r\n      {\r\n        id: 'doc-2',\r\n        title: 'Devoir surveill√© - Fran√ßais',\r\n        description: '√âvaluation de compr√©hension de texte',\r\n        file_name: 'ds_francais_4eme.pdf',\r\n        file_size: 189440,\r\n        document_type: 'evaluation',\r\n        class_name: '4√®meA',\r\n        subject: 'Fran√ßais',\r\n        created_at: '2024-10-03T14:15:00Z',\r\n        uploaded_by: 'Jean Kamto',\r\n        uploader_id: 'demo-teacher-2',\r\n        download_count: 8,\r\n        status: 'active'\r\n      },\r\n      {\r\n        id: 'doc-3',\r\n        title: 'Exercices de Math√©matiques',\r\n        description: 'Feuille d\\'exercices sur les fractions',\r\n        file_name: 'exercices_fractions_6eme.pdf',\r\n        file_size: 156720,\r\n        document_type: 'exercice',\r\n        class_name: '6√®meA',\r\n        subject: 'Math√©matiques',\r\n        created_at: '2024-10-02T09:45:00Z',\r\n        uploaded_by: 'Marie Dubois',\r\n        uploader_id: 'demo-teacher-1',\r\n        download_count: 15,\r\n        status: 'active'\r\n      },\r\n      {\r\n        id: 'doc-4',\r\n        title: 'Correction DS Fran√ßais',\r\n        description: 'Corrig√© type du devoir surveill√©',\r\n        file_name: 'correction_ds_francais_4eme.pdf',\r\n        file_size: 203840,\r\n        document_type: 'correction',\r\n        class_name: '4√®meA',\r\n        subject: 'Fran√ßais',\r\n        created_at: '2024-10-04T16:20:00Z',\r\n        uploaded_by: 'Jean Kamto',\r\n        uploader_id: 'demo-teacher-2',\r\n        download_count: 6,\r\n        status: 'active'\r\n      },\r\n      {\r\n        id: 'doc-5',\r\n        title: 'R√®glement int√©rieur',\r\n        description: 'Document administratif pour toutes les classes',\r\n        file_name: 'reglement_interieur_2024.pdf',\r\n        file_size: 512000,\r\n        document_type: 'administratif',\r\n        class_name: 'Toutes',\r\n        subject: 'Administration',\r\n        created_at: '2024-09-01T08:00:00Z',\r\n        uploaded_by: 'Fatima Ngo',\r\n        uploader_id: 'demo-secretary-1',\r\n        download_count: 45,\r\n        status: 'active'\r\n      },\r\n      {\r\n        id: 'doc-6',\r\n        title: 'Planning des examens',\r\n        description: 'Calendrier des √©valuations du trimestre',\r\n        file_name: 'planning_examens_t1.pdf',\r\n        file_size: 178560,\r\n        document_type: 'planning',\r\n        class_name: 'Toutes',\r\n        subject: 'Administration',\r\n        created_at: '2024-09-15T12:30:00Z',\r\n        uploaded_by: 'Fatima Ngo',\r\n        uploader_id: 'demo-secretary-1',\r\n        download_count: 23,\r\n        status: 'active'\r\n      }\r\n    ];\r\n  };\r\n\r\n  // Obtenir les donn√©es du personnel\r\n  const getPersonnelAccounts = () => {\r\n    const teachers = data?.personnel?.filter(p => p.type === 'teacher') || [];\r\n    const secretaries = data?.personnel?.filter(p => p.type === 'secretary') || [];\r\n    return [...teachers, ...secretaries].map(person => ({\r\n      id: person.id,\r\n      full_name: person.name,\r\n      email: person.email,\r\n      role: person.type,\r\n      subject: person.subject,\r\n      classes: person.classes || [],\r\n      status: person.status,\r\n      document_count: 0,\r\n      last_upload: null,\r\n      created_at: person.created_at\r\n    }));\r\n  };\r\n\r\n  const loadInitialData = async () => {\r\n    if (!user) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      if (isPrincipalMode) {\r\n        // En mode principal, charger TOUS les documents de l'√©tablissement\r\n        const docsResult = await documentService?.getAllSchoolDocuments();\r\n        if (docsResult?.error) {\r\n          console.error('Erreur chargement documents √©cole:', docsResult?.error);\r\n        } else {\r\n          setDocuments(docsResult?.data || []);\r\n        }\r\n      } else {\r\n        // Mode normal selon le r√¥le utilisateur\r\n        if (userProfile?.role === 'teacher') {\r\n          const [docsResult, assignmentsResult, statsResult] = await Promise.all([\r\n            documentService?.getTeacherDocuments(),\r\n            documentService?.getTeacherAssignments(),\r\n            documentService?.getDocumentStats()\r\n          ]);\r\n\r\n          if (docsResult?.error) {\r\n            console.error('Erreur chargement documents:', docsResult?.error);\r\n          } else {\r\n            setDocuments(docsResult?.data || []);\r\n          }\r\n\r\n          if (assignmentsResult?.error) {\r\n            console.error('Erreur chargement assignations:', assignmentsResult?.error);\r\n          } else {\r\n            setTeacherAssignments(assignmentsResult?.data || []);\r\n          }\r\n\r\n          if (statsResult?.error) {\r\n            console.error('Erreur chargement statistiques:', statsResult?.error);\r\n          } else {\r\n            setStats(statsResult?.data);\r\n          }\r\n\r\n        } else if (userProfile?.role === 'student') {\r\n          const docsResult = await documentService?.getStudentDocuments();\r\n          if (docsResult?.error) {\r\n            console.error('Erreur chargement documents √©tudiant:', docsResult?.error);\r\n          } else {\r\n            setDocuments(docsResult?.data || []);\r\n          }\r\n        } else {\r\n          // For parents or other roles, get all accessible documents\r\n          const docsResult = await documentService?.getDocuments(filters);\r\n          if (docsResult?.error) {\r\n            console.error('Erreur chargement documents:', docsResult?.error);\r\n          } else {\r\n            setDocuments(docsResult?.data || []);\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur chargement donn√©es:', error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const setupRealtimeSubscription = () => {\r\n    const documentsSubscription = supabase?.channel('documents_changes')?.on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'documents'\r\n        },\r\n        (payload) => {\r\n          console.log('Document change:', payload);\r\n          loadInitialData(); // Refresh data on changes\r\n        }\r\n      )?.subscribe();\r\n\r\n    return () => {\r\n      supabase?.removeChannel(documentsSubscription);\r\n    };\r\n  };\r\n\r\n  const handleFileUpload = async (fileData) => {\r\n    setUploading(true);\r\n    try {\r\n      const result = await documentService?.uploadDocument(fileData?.documentData, fileData?.file);\r\n      if (result?.error) {\r\n        throw new Error(result.error);\r\n      }\r\n\r\n      // Refresh documents list\r\n      await loadInitialData();\r\n      \r\n      return { success: true, message: 'Document uploaded successfully!' };\r\n    } catch (error) {\r\n      console.error('Erreur upload:', error);\r\n      return { success: false, message: error?.message };\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleDocumentDelete = async (documentId) => {\r\n    try {\r\n      const result = await documentService?.deleteDocument(documentId);\r\n      if (result?.error) {\r\n        throw new Error(result.error);\r\n      }\r\n\r\n      // Remove from local state\r\n      setDocuments(prev => prev?.filter(doc => doc?.id !== documentId));\r\n      \r\n      return { success: true, message: 'Document supprim√© avec succ√®s!' };\r\n    } catch (error) {\r\n      console.error('Erreur suppression:', error);\r\n      return { success: false, message: error?.message };\r\n    }\r\n  };\r\n\r\n  const handleDocumentDownload = async (documentId) => {\r\n    try {\r\n      const result = await documentService?.downloadDocument(documentId, 'download');\r\n      if (result?.error) {\r\n        throw new Error(result.error);\r\n      }\r\n\r\n      // Trigger download\r\n      const link = document.createElement('a');\r\n      link.href = result?.data?.url;\r\n      link.download = result?.data?.fileName;\r\n      document.body?.appendChild(link);\r\n      link?.click();\r\n      document.body?.removeChild(link);\r\n\r\n      return { success: true, message: 'T√©l√©chargement initialis√©!' };\r\n    } catch (error) {\r\n      console.error('Erreur t√©l√©chargement:', error);\r\n      return { success: false, message: error?.message };\r\n    }\r\n  };\r\n\r\n  const handleAccountSelection = (account) => {\r\n    setSelectedAccount(account);\r\n    setFilters(prev => ({ ...prev, account_id: account.id }));\r\n    loadInitialData();\r\n  };\r\n\r\n  const handleFiltersChange = async (newFilters) => {\r\n    setFilters(newFilters);\r\n    \r\n    // Apply filters and reload documents\r\n    setLoading(true);\r\n    const result = await documentService?.getDocuments(newFilters);\r\n    if (result?.error) {\r\n      console.error('Erreur filtrage:', result?.error);\r\n    } else {\r\n      setDocuments(result?.data || []);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const filteredDocuments = documents?.filter(doc => {\r\n    // Filtre par classe\r\n    if (filters.class_name && doc.class_name !== filters.class_name) return false;\r\n    \r\n    // Filtre par mati√®re\r\n    if (filters.subject && doc.subject !== filters.subject) return false;\r\n    \r\n    // Filtre par type de document\r\n    if (filters.document_type && doc.document_type !== filters.document_type) return false;\r\n    \r\n    // Filtre par compte s√©lectionn√© (enseignant)\r\n    if (selectedAccount && doc.uploader_id !== selectedAccount.id) return false;\r\n    \r\n    // Filtre par recherche textuelle\r\n    if (filters.search) {\r\n      const searchLower = filters.search.toLowerCase();\r\n      const matchesSearch = (\r\n        doc?.title?.toLowerCase()?.includes(searchLower) ||\r\n        doc?.description?.toLowerCase()?.includes(searchLower) ||\r\n        doc?.class_name?.toLowerCase()?.includes(searchLower) ||\r\n        doc?.subject?.toLowerCase()?.includes(searchLower) ||\r\n        doc?.uploaded_by?.toLowerCase()?.includes(searchLower)\r\n      );\r\n      if (!matchesSearch) return false;\r\n    }\r\n    \r\n    return true;\r\n  }) || [];\r\n\r\n  if (loading && documents?.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Chargement des documents...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n                {isPrincipalMode ? 'Supervision des Documents Personnel' : 'Centre de Gestion des Documents'}\r\n              </h1>\r\n              <p className=\"text-gray-600\">\r\n                {isPrincipalMode \r\n                  ? 'Contr√¥lez et supervisez les documents par compte personnel'\r\n                  : userProfile?.role === 'teacher' \r\n                    ? 'G√©rez et partagez vos documents p√©dagogiques'\r\n                    : userProfile?.role === 'student' \r\n                      ? 'Acc√©dez aux documents de vos cours' \r\n                      : 'Consultez les documents partag√©s'\r\n                }\r\n              </p>\r\n            </div>\r\n            \r\n          </div>\r\n          \r\n          {/* Compte s√©lectionn√© en mode principal */}\r\n          {isPrincipalMode && selectedAccount && (\r\n            <div className=\"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                    <Icon name={selectedAccount.role === 'teacher' ? 'GraduationCap' : 'UserCheck'} size={20} className=\"text-blue-600\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-blue-900\">{selectedAccount.full_name}</h3>\r\n                    <p className=\"text-sm text-blue-700\">\r\n                      {selectedAccount.role === 'teacher' ? `${selectedAccount.subject} - ${selectedAccount.classes?.join(', ')}` : 'Secr√©taire'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4 text-sm text-blue-700\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"font-semibold\">{selectedAccount.document_count || 0}</div>\r\n                    <div>Documents</div>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => setSelectedAccount(null)}\r\n                    className=\"text-blue-600 hover:text-blue-800\"\r\n                  >\r\n                    <Icon name=\"X\" size={16} />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Navigation Tabs */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"border-b border-gray-200\">\r\n            <nav className=\"-mb-px flex space-x-8\">\r\n              {isPrincipalMode && (\r\n                <>\r\n                  <button\r\n                    onClick={() => setActiveView('overview')}\r\n                    className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                      activeView === 'overview'\r\n                        ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    ÔøΩ Vue d'Ensemble\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={() => setActiveView('documents')}\r\n                    className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                      activeView === 'documents'\r\n                        ? 'border-blue-500 text-blue-600' :'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    üìÑ Tous les Documents\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={() => setActiveView('accounts')}\r\n                    className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                      activeView === 'accounts'\r\n                        ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    üë• Par Personnel\r\n                  </button>\r\n                </>\r\n              )}\r\n              \r\n              {!isPrincipalMode && (\r\n                <button\r\n                  onClick={() => setActiveView('documents')}\r\n                  className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                    activeView === 'documents'\r\n                      ? 'border-blue-500 text-blue-600' :'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                  }`}\r\n                >\r\n                  üìÑ Documents\r\n                </button>\r\n              )}\r\n              \r\n              {userProfile?.role === 'teacher' && !isPrincipalMode && (\r\n                <>\r\n                  <button\r\n                    onClick={() => setActiveView('assignments')}\r\n                    className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                      activeView === 'assignments' ?'border-blue-500 text-blue-600' :'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    üìã Mes Classes\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={() => setActiveView('stats')}\r\n                    className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                      activeView === 'stats' ?'border-blue-500 text-blue-600' :'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    üìä Statistiques\r\n                  </button>\r\n                </>\r\n              )}\r\n              \r\n              {isPrincipalMode && selectedAccount && (\r\n                <button\r\n                  onClick={() => setActiveView('account-stats')}\r\n                  className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                    activeView === 'account-stats' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                  }`}\r\n                >\r\n                  üìä Statistiques du Compte\r\n                </button>\r\n              )}\r\n            </nav>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content Area */}\r\n        <div className=\"space-y-6\">\r\n          {/* Vue d'ensemble (mode principal uniquement) */}\r\n          {activeView === 'overview' && isPrincipalMode && (\r\n            <div className=\"space-y-6\">\r\n              {/* Statistiques g√©n√©rales */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n                <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"FileText\" size={24} className=\"text-blue-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-2xl font-bold text-gray-900\">{documents.length}</div>\r\n                      <div className=\"text-sm text-gray-500\">Documents Total</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"Users\" size={24} className=\"text-green-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-2xl font-bold text-gray-900\">{getPersonnelAccounts().length}</div>\r\n                      <div className=\"text-sm text-gray-500\">Personnel Actif</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"BookOpen\" size={24} className=\"text-purple-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-2xl font-bold text-gray-900\">\r\n                        {[...new Set(documents.map(doc => doc.class_name))].length}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">Classes Concern√©es</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"Download\" size={24} className=\"text-orange-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-2xl font-bold text-gray-900\">\r\n                        {documents.reduce((total, doc) => total + (doc.download_count || 0), 0)}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">T√©l√©chargements</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Activit√© r√©cente */}\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üìà Activit√© R√©cente</h3>\r\n                <div className=\"space-y-3\">\r\n                  {documents\r\n                    .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\r\n                    .slice(0, 5)\r\n                    .map((doc) => (\r\n                      <div key={doc.id} className=\"flex items-center justify-between p-3 border border-gray-100 rounded-lg\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <div className=\"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center\">\r\n                            <Icon name=\"FileText\" size={20} className=\"text-blue-600\" />\r\n                          </div>\r\n                          <div>\r\n                            <h4 className=\"font-medium text-gray-900\">{doc.title}</h4>\r\n                            <p className=\"text-sm text-gray-500\">\r\n                              {doc.class_name} ‚Ä¢ {doc.subject} ‚Ä¢ par {doc.uploaded_by}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <div className=\"text-sm text-gray-900\">{doc.download_count || 0} t√©l√©chargements</div>\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            {new Date(doc.created_at).toLocaleDateString('fr-FR')}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Documents par classe */}\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üìö R√©partition par Classe</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  {[...new Set(documents.map(doc => doc.class_name))]\r\n                    .filter(className => className && className !== 'Toutes')\r\n                    .map((className) => {\r\n                      const classDocuments = documents.filter(doc => doc.class_name === className);\r\n                      return (\r\n                        <div key={className} className=\"p-4 border border-gray-200 rounded-lg\">\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <h4 className=\"font-medium text-gray-900\">{className}</h4>\r\n                            <span className=\"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full\">\r\n                              {classDocuments.length}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500\">\r\n                            {[...new Set(classDocuments.map(doc => doc.subject))].join(', ')}\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Vue des comptes (mode principal uniquement) */}\r\n          {activeView === 'accounts' && isPrincipalMode && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Personnel avec Acc√®s aux Documents</h3>\r\n                  <div className=\"text-sm text-gray-500\">\r\n                    {getPersonnelAccounts().length} comptes actifs\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                  {getPersonnelAccounts().map((account) => (\r\n                    <div\r\n                      key={account.id}\r\n                      onClick={() => handleAccountSelection(account)}\r\n                      className={`p-4 border rounded-lg cursor-pointer transition-all hover:shadow-md ${\r\n                        selectedAccount?.id === account.id\r\n                          ? 'border-blue-500 bg-blue-50'\r\n                          : 'border-gray-200 hover:border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center space-x-3 mb-3\">\r\n                        <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n                          account.role === 'teacher' ? 'bg-green-100' : 'bg-purple-100'\r\n                        }`}>\r\n                          <Icon \r\n                            name={account.role === 'teacher' ? 'GraduationCap' : 'UserCheck'} \r\n                            size={20} \r\n                            className={account.role === 'teacher' ? 'text-green-600' : 'text-purple-600'}\r\n                          />\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <h4 className=\"font-medium text-gray-900 truncate\">{account.full_name}</h4>\r\n                          <p className=\"text-sm text-gray-500 truncate\">{account.email}</p>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center justify-between text-sm\">\r\n                          <span className=\"text-gray-600\">R√¥le:</span>\r\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                            account.role === 'teacher' \r\n                              ? 'bg-green-100 text-green-800' \r\n                              : 'bg-purple-100 text-purple-800'\r\n                          }`}>\r\n                            {account.role === 'teacher' ? 'Enseignant' : 'Secr√©taire'}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        {account.subject && (\r\n                          <div className=\"flex items-center justify-between text-sm\">\r\n                            <span className=\"text-gray-600\">Mati√®re:</span>\r\n                            <span className=\"font-medium\">{account.subject}</span>\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {account.classes && account.classes.length > 0 && (\r\n                          <div className=\"flex items-center justify-between text-sm\">\r\n                            <span className=\"text-gray-600\">Classes:</span>\r\n                            <span className=\"font-medium\">{account.classes.join(', ')}</span>\r\n                          </div>\r\n                        )}\r\n                        \r\n                        <div className=\"flex items-center justify-between text-sm\">\r\n                          <span className=\"text-gray-600\">Documents:</span>\r\n                          <span className=\"font-semibold text-blue-600\">{account.document_count || 0}</span>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center justify-between text-sm\">\r\n                          <span className=\"text-gray-600\">Statut:</span>\r\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                            account.status === 'active' \r\n                              ? 'bg-green-100 text-green-800' \r\n                              : 'bg-red-100 text-red-800'\r\n                          }`}>\r\n                            {account.status === 'active' ? 'Actif' : 'Inactif'}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        {account.last_upload && (\r\n                          <div className=\"flex items-center justify-between text-sm\">\r\n                            <span className=\"text-gray-600\">Dernier upload:</span>\r\n                            <span className=\"text-gray-500\">{new Date(account.last_upload).toLocaleDateString('fr-FR')}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div className=\"mt-3 pt-3 border-t border-gray-100\">\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          className=\"w-full\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            handleAccountSelection(account);\r\n                            setActiveView('documents');\r\n                          }}\r\n                        >\r\n                          <Icon name=\"FileText\" size={16} className=\"mr-2\" />\r\n                          Voir les documents\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                \r\n                {getPersonnelAccounts().length === 0 && (\r\n                  <div className=\"text-center py-12\">\r\n                    <Icon name=\"Users\" size={64} className=\"text-gray-400 mx-auto mb-4\" />\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Aucun personnel trouv√©</h3>\r\n                    <p className=\"text-gray-500\">\r\n                      Aucun compte personnel n'a encore √©t√© cr√©√©.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {activeView === 'documents' && (\r\n            <>\r\n              {/* Filtres de recherche avanc√©s pour le mode principal */}\r\n              {isPrincipalMode && (\r\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n                  <h3 className=\"font-medium text-blue-900 mb-3\">üîç Recherche Avanc√©e</h3>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-blue-800 mb-1\">Par Classe</label>\r\n                      <select \r\n                        className=\"w-full border border-blue-300 rounded-md px-3 py-2 text-sm\"\r\n                        value={filters.class_name}\r\n                        onChange={(e) => setFilters(prev => ({...prev, class_name: e.target.value}))}\r\n                      >\r\n                        <option value=\"\">Toutes les classes</option>\r\n                        {[...new Set(documents.map(doc => doc.class_name))]\r\n                          .filter(className => className && className !== 'Toutes')\r\n                          .map(className => (\r\n                            <option key={className} value={className}>{className}</option>\r\n                          ))}\r\n                      </select>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-blue-800 mb-1\">Par Mati√®re</label>\r\n                      <select \r\n                        className=\"w-full border border-blue-300 rounded-md px-3 py-2 text-sm\"\r\n                        value={filters.subject}\r\n                        onChange={(e) => setFilters(prev => ({...prev, subject: e.target.value}))}\r\n                      >\r\n                        <option value=\"\">Toutes les mati√®res</option>\r\n                        {[...new Set(documents.map(doc => doc.subject))]\r\n                          .filter(subject => subject)\r\n                          .map(subject => (\r\n                            <option key={subject} value={subject}>{subject}</option>\r\n                          ))}\r\n                      </select>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-blue-800 mb-1\">Par Enseignant</label>\r\n                      <select \r\n                        className=\"w-full border border-blue-300 rounded-md px-3 py-2 text-sm\"\r\n                        value={selectedAccount?.id || ''}\r\n                        onChange={(e) => {\r\n                          const account = getPersonnelAccounts().find(acc => acc.id === e.target.value);\r\n                          setSelectedAccount(account || null);\r\n                        }}\r\n                      >\r\n                        <option value=\"\">Tous les enseignants</option>\r\n                        {getPersonnelAccounts().map(account => (\r\n                          <option key={account.id} value={account.id}>{account.full_name}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-blue-800 mb-1\">Type</label>\r\n                      <select \r\n                        className=\"w-full border border-blue-300 rounded-md px-3 py-2 text-sm\"\r\n                        value={filters.document_type}\r\n                        onChange={(e) => setFilters(prev => ({...prev, document_type: e.target.value}))}\r\n                      >\r\n                        <option value=\"\">Tous les types</option>\r\n                        <option value=\"cours\">Cours</option>\r\n                        <option value=\"exercice\">Exercices</option>\r\n                        <option value=\"evaluation\">√âvaluations</option>\r\n                        <option value=\"correction\">Corrections</option>\r\n                        <option value=\"administratif\">Administratif</option>\r\n                        <option value=\"planning\">Planning</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"mt-4\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Rechercher dans les titres et descriptions...\"\r\n                      className=\"w-full border border-blue-300 rounded-md px-3 py-2 text-sm\"\r\n                      value={filters.search}\r\n                      onChange={(e) => setFilters(prev => ({...prev, search: e.target.value}))}\r\n                    />\r\n                  </div>\r\n                  \r\n                  {(filters.class_name || filters.subject || filters.document_type || filters.search || selectedAccount) && (\r\n                    <div className=\"mt-3 flex items-center justify-between\">\r\n                      <div className=\"text-sm text-blue-700\">\r\n                        {filteredDocuments.length} document(s) trouv√©(s)\r\n                        {selectedAccount && ` pour ${selectedAccount.full_name}`}\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          setFilters({class_name: '', subject: '', document_type: '', search: '', account_id: ''});\r\n                          setSelectedAccount(null);\r\n                        }}\r\n                        className=\"text-blue-600 hover:text-blue-800\"\r\n                      >\r\n                        <Icon name=\"X\" size={16} className=\"mr-1\" />\r\n                        R√©initialiser\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* File Upload Section (Teachers only et pas en mode principal) */}\r\n              {userProfile?.role === 'teacher' && !isPrincipalMode && (\r\n                <FileUploadSection \r\n                  onUpload={handleFileUpload}\r\n                  uploading={uploading}\r\n                  teacherAssignments={teacherAssignments}\r\n                />\r\n              )}\r\n\r\n              {/* Document Filters pour les autres r√¥les */}\r\n              {!isPrincipalMode && (\r\n                <DocumentFilters\r\n                  filters={filters}\r\n                  onFiltersChange={handleFiltersChange}\r\n                  userRole={userProfile?.role}\r\n                />\r\n              )}\r\n\r\n              {/* Documents Grid */}\r\n              <DocumentGrid\r\n                documents={filteredDocuments}\r\n                onDelete={handleDocumentDelete}\r\n                onDownload={handleDocumentDownload}\r\n                userRole={isPrincipalMode ? 'principal' : userProfile?.role}\r\n                loading={loading}\r\n                selectedAccount={selectedAccount}\r\n                showUploaderInfo={isPrincipalMode}\r\n              />\r\n            </>\r\n          )}\r\n\r\n          {activeView === 'assignments' && userProfile?.role === 'teacher' && !isPrincipalMode && (\r\n            <TeacherAssignments\r\n              assignments={teacherAssignments}\r\n              onAssignmentsUpdate={loadInitialData}\r\n            />\r\n          )}\r\n\r\n          {activeView === 'stats' && userProfile?.role === 'teacher' && !isPrincipalMode && (\r\n            <DocumentStats\r\n              stats={stats}\r\n              documents={documents}\r\n            />\r\n          )}\r\n\r\n          {/* Statistiques du compte s√©lectionn√© (mode principal) */}\r\n          {activeView === 'account-stats' && isPrincipalMode && selectedAccount && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">\r\n                  Statistiques de {selectedAccount.full_name}\r\n                </h3>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\r\n                  <div className=\"bg-blue-50 rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <Icon name=\"FileText\" size={24} className=\"text-blue-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-blue-900\">{selectedAccount.document_count || 0}</div>\r\n                        <div className=\"text-sm text-blue-600\">Documents upload√©s</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-green-50 rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <Icon name=\"Download\" size={24} className=\"text-green-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-green-900\">0</div>\r\n                        <div className=\"text-sm text-green-600\">T√©l√©chargements</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-purple-50 rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <Icon name=\"Calendar\" size={24} className=\"text-purple-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-purple-900\">\r\n                          {selectedAccount.last_upload \r\n                            ? Math.floor((new Date() - new Date(selectedAccount.last_upload)) / (1000 * 60 * 60 * 24))\r\n                            : '--'}\r\n                        </div>\r\n                        <div className=\"text-sm text-purple-600\">Jours depuis dernier upload</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"border-t border-gray-200 pt-6\">\r\n                  <h4 className=\"font-medium text-gray-900 mb-4\">Informations du compte</h4>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n                    <div>\r\n                      <span className=\"text-gray-600\">Email :</span>\r\n                      <span className=\"ml-2 font-medium\">{selectedAccount.email}</span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-600\">R√¥le :</span>\r\n                      <span className=\"ml-2 font-medium capitalize\">{selectedAccount.role}</span>\r\n                    </div>\r\n                    {selectedAccount.subject && (\r\n                      <div>\r\n                        <span className=\"text-gray-600\">Mati√®re :</span>\r\n                        <span className=\"ml-2 font-medium\">{selectedAccount.subject}</span>\r\n                      </div>\r\n                    )}\r\n                    {selectedAccount.classes && selectedAccount.classes.length > 0 && (\r\n                      <div>\r\n                        <span className=\"text-gray-600\">Classes :</span>\r\n                        <span className=\"ml-2 font-medium\">{selectedAccount.classes.join(', ')}</span>\r\n                      </div>\r\n                    )}\r\n                    <div>\r\n                      <span className=\"text-gray-600\">Cr√©√© le :</span>\r\n                      <span className=\"ml-2 font-medium\">\r\n                        {new Date(selectedAccount.created_at).toLocaleDateString('fr-FR')}\r\n                      </span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-600\">Statut :</span>\r\n                      <span className={`ml-2 px-2 py-1 rounded-full text-xs font-medium ${\r\n                        selectedAccount.status === 'active' \r\n                          ? 'bg-green-100 text-green-800' \r\n                          : 'bg-red-100 text-red-800'\r\n                      }`}>\r\n                        {selectedAccount.status === 'active' ? 'Actif' : 'Inactif'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Access Control Info */}\r\n        <AccessControlPanel \r\n          userRole={isPrincipalMode ? 'principal' : userProfile?.role} \r\n          isPrincipalMode={isPrincipalMode}\r\n          selectedAccount={selectedAccount}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentManagementHub;"],"names":["FileUploadSection","onUpload","uploading","teacherAssignments","userProfile","useAuth","dragActive","setDragActive","useState","uploadForm","setUploadForm","selectedFile","setSelectedFile","uploadMessage","setUploadMessage","fileInputRef","useRef","documentTypes","allowedFileTypes","maxFileSize","handleDrag","e","handleDrop","_a","_c","_b","handleFileSelect","_e","_d","file","fileName","prev","handleInputChange","name","value","type","checked","handleSubmit","schoolId","documentData","result","triggerFileSelect","removeSelectedFile","availableClasses","a","availableSubjects","jsxs","jsx","className","subject","DocumentGrid","documents","onDelete","onDownload","userRole","loading","deleteConfirm","setDeleteConfirm","actionLoading","setActionLoading","getDocumentIcon","mimeType","getDocumentTypeLabel","types","formatFileSize","bytes","sizes","i","formatDate","dateString","date","handleDownload","documentId","handleDelete","document","Fragment","TeacherAssignments","assignments","onAssignmentsUpdate","showAddForm","setShowAddForm","newAssignment","setNewAssignment","teachers","setTeachers","setLoading","message","setMessage","useEffect","loadTeachers","assignmentData","documentService","error","handleRemoveAssignment","assignmentId","classOptions","subjectOptions","teacher","assignment","DocumentFilters","filters","onFiltersChange","availableOptions","setAvailableOptions","showFilters","setShowFilters","loadAvailableOptions","handleFilterChange","newFilters","clearAllFilters","hasActiveFilters","t","DocumentStats","stats","getTypeIcon","icons","getTypeLabel","labels","totalSize","sum","doc","formatSize","k","classDistribution","subjectDistribution","topClasses","topSubjects","count","c","_g","AccessControlPanel","isPrincipalMode","selectedAccount","showInfo","setShowInfo","roleInfo","role","securityFeatures","permission","index","feature","DocumentManagementHub","location","useLocation","user","data","useDashboardData","setDocuments","setTeacherAssignments","setUploading","setSelectedAccount","setFilters","setStats","activeView","setActiveView","loadInitialData","setupRealtimeSubscription","getPersonnelAccounts","p","secretaries","person","docsResult","assignmentsResult","statsResult","_f","documentsSubscription","supabase","payload","handleFileUpload","fileData","handleDocumentDelete","handleDocumentDownload","link","handleAccountSelection","account","handleFiltersChange","filteredDocuments","searchLower","_h","_j","_i","Icon","Button","total","b","classDocuments","acc"],"mappings":"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"}