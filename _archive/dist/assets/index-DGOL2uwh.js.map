{"version":3,"file":"index-DGOL2uwh.js","sources":["../../src/pages/production-login/index.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Input from '../../components/ui/Input';\r\n\r\nconst ProductionLogin = () => {\r\n  const navigate = useNavigate();\r\n  const { login } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    // Clear error when user starts typing\r\n    if (error) setError('');\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.email || !formData.password) {\r\n      setError('Veuillez remplir tous les champs');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // Ici, on int√©grerait l'authentification r√©elle avec Supabase\r\n      // Pour la simulation, on cr√©e des comptes fictifs\r\n      const success = await simulateLogin(formData.email, formData.password);\r\n      \r\n      if (success) {\r\n        // Determiner le type d'utilisateur bas√© sur l'email\r\n        const userType = getUserTypeFromEmail(formData.email);\r\n        const userData = {\r\n          id: Date.now(),\r\n          email: formData.email,\r\n          name: getNameFromEmail(formData.email),\r\n          role: userType,\r\n          avatar: getAvatarFromRole(userType)\r\n        };\r\n        \r\n        login(userData);\r\n        navigate(getRouteFromRole(userType));\r\n      } else {\r\n        setError('Email ou mot de passe incorrect');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur de connexion:', error);\r\n      setError('Erreur de connexion. Veuillez r√©essayer.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fonctions utilitaires pour la simulation\r\n  const simulateLogin = async (email, password) => {\r\n    // Simulation d'appel API\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    \r\n    // Comptes de test (en production, ceci serait g√©r√© par Supabase)\r\n    const validAccounts = [\r\n      { email: 'admin@edutrack.cm', password: 'admin123', role: 'admin' },\r\n      { email: 'directeur@edutrack.cm', password: 'dir123', role: 'principal' },\r\n      { email: 'secretaire@edutrack.cm', password: 'sec123', role: 'secretary' },\r\n      { email: 'enseignant@edutrack.cm', password: 'prof123', role: 'teacher' },\r\n      { email: 'parent@edutrack.cm', password: 'parent123', role: 'parent' },\r\n      { email: 'eleve@edutrack.cm', password: 'eleve123', role: 'student' }\r\n    ];\r\n    \r\n    return validAccounts.some(account => \r\n      account.email === email && account.password === password\r\n    );\r\n  };\r\n\r\n  const getUserTypeFromEmail = (email) => {\r\n    if (email.includes('admin')) return 'admin';\r\n    if (email.includes('directeur')) return 'principal';\r\n    if (email.includes('secretaire')) return 'secretary';\r\n    if (email.includes('enseignant')) return 'teacher';\r\n    if (email.includes('parent')) return 'parent';\r\n    if (email.includes('eleve')) return 'student';\r\n    return 'student';\r\n  };\r\n\r\n  const getNameFromEmail = (email) => {\r\n    const name = email.split('@')[0];\r\n    return name.charAt(0).toUpperCase() + name.slice(1);\r\n  };\r\n\r\n  const getAvatarFromRole = (role) => {\r\n    const avatars = {\r\n      admin: 'üë®‚Äçüíº',\r\n      principal: 'üéì',\r\n      secretary: 'üìã',\r\n      teacher: 'üë©‚Äçüè´',\r\n      parent: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',\r\n      student: 'üéí'\r\n    };\r\n    return avatars[role] || 'üë§';\r\n  };\r\n\r\n  const getRouteFromRole = (role) => {\r\n    const routes = {\r\n      admin: '/admin-dashboard',\r\n      principal: '/principal-dashboard',\r\n      secretary: '/secretary-dashboard',\r\n      teacher: '/teacher-dashboard',\r\n      parent: '/parent-dashboard',\r\n      student: '/student-dashboard'\r\n    };\r\n    return routes[role] || '/student-dashboard';\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\">\r\n      <div className=\"w-full max-w-md\">\r\n        {/* Header */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\">\r\n            <Icon name=\"GraduationCap\" size={32} className=\"text-blue-600\" />\r\n          </div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">EduTrack CM</h1>\r\n          <p className=\"text-gray-600\">Connexion √† votre espace</p>\r\n        </div>\r\n\r\n        {/* Login Form */}\r\n        <div className=\"bg-white rounded-xl shadow-xl p-8\">\r\n          {error && (\r\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3\">\r\n              <Icon name=\"AlertCircle\" size={20} className=\"text-red-600 mt-0.5\" />\r\n              <div>\r\n                <p className=\"text-red-800 font-medium\">Erreur de connexion</p>\r\n                <p className=\"text-red-700 text-sm\">{error}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <Input\r\n              label=\"Adresse email\"\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={formData.email}\r\n              onChange={handleInputChange}\r\n              placeholder=\"votre.email@exemple.com\"\r\n              icon=\"Mail\"\r\n              required\r\n            />\r\n\r\n            <div className=\"relative\">\r\n              <Input\r\n                label=\"Mot de passe\"\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                name=\"password\"\r\n                value={formData.password}\r\n                onChange={handleInputChange}\r\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\r\n                icon=\"Lock\"\r\n                required\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                className=\"absolute right-3 top-[38px] text-gray-500 hover:text-gray-700 focus:outline-none\"\r\n                tabIndex={-1}\r\n              >\r\n                <Icon name={showPassword ? \"EyeOff\" : \"Eye\"} size={20} />\r\n              </button>\r\n            </div>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isLoading}\r\n              className=\"w-full bg-blue-600 hover:bg-blue-700\"\r\n              disabled={!formData.email || !formData.password}\r\n            >\r\n              <Icon name=\"LogIn\" size={16} className=\"mr-2\" />\r\n              Se connecter\r\n            </Button>\r\n          </form>\r\n\r\n          {/* Password Recovery Link */}\r\n          <div className=\"mt-6 text-center\">\r\n            <Link\r\n              to=\"/password-recovery\"\r\n              className=\"text-sm text-blue-600 hover:text-blue-700 hover:underline flex items-center justify-center\"\r\n            >\r\n              <Icon name=\"HelpCircle\" size={16} className=\"mr-2\" />\r\n              Mot de passe oubli√© ?\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Test Accounts Info */}\r\n        <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n          <div className=\"flex items-start space-x-3\">\r\n            <Icon name=\"Info\" size={20} className=\"text-blue-600 mt-0.5\" />\r\n            <div>\r\n              <h3 className=\"font-medium text-blue-900\">Comptes de test disponibles</h3>\r\n              <div className=\"text-sm text-blue-700 mt-2 space-y-1\">\r\n                <div><strong>Admin:</strong> admin@edutrack.cm / admin123</div>\r\n                <div><strong>Directeur:</strong> directeur@edutrack.cm / dir123</div>\r\n                <div><strong>Secr√©taire:</strong> secretaire@edutrack.cm / sec123</div>\r\n                <div><strong>Enseignant:</strong> enseignant@edutrack.cm / prof123</div>\r\n                <div><strong>Parent:</strong> parent@edutrack.cm / parent123</div>\r\n                <div><strong>√âl√®ve:</strong> eleve@edutrack.cm / eleve123</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <footer className=\"mt-8 text-center\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            ¬© {new Date().getFullYear()} EduTrack CM ‚Ä¢ Syst√®me de gestion scolaire\r\n          </p>\r\n        </footer>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductionLogin;"],"names":["ProductionLogin","navigate","useNavigate","login","useAuth","formData","setFormData","useState","isLoading","setIsLoading","error","setError","showPassword","setShowPassword","handleInputChange","e","name","value","prev","handleSubmit","simulateLogin","userType","getUserTypeFromEmail","userData","getNameFromEmail","getAvatarFromRole","getRouteFromRole","email","password","resolve","account","role","jsxs","jsx","Icon","Input","Button","Link"],"mappings":"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"}