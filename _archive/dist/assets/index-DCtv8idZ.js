import{j as e}from"./contexts-fbpOeTmm.js";import{r as S,e as ie}from"./react-vendor-CFDIsUAY.js";import{B,I as y,S as Z,a as X}from"./index-BPV3rumr.js";import{H as Q,S as U}from"./Sidebar-Q0ML3SY6.js";import{I as xe}from"./AppImage-yaNzDrl6.js";import{R as H,B as ne,C as D,X as ee,Y as re,T as K,b as ue,P as he,d as me,e as pe,L as fe,a as be}from"./charts-vendor-i33Lw0zL.js";import"./services-CdXttHtG.js";import"./supabase-CIvuJI4W.js";import"./ui-vendor-BrXTGbgA.js";const ve=({className:f=""})=>{const[p,j]=S.useState(!1),[s,T]=S.useState({theme:"light",largeText:!1});S.useEffect(()=>{const d=localStorage.getItem("accessibility-settings");if(d){const h=JSON.parse(d);T(h),g(h)}},[]);const o=(d,h)=>{const x={...s,[d]:h};T(x),localStorage.setItem("accessibility-settings",JSON.stringify(x)),g(x)},g=d=>{var x,m,G,I;const h=document.documentElement;(d==null?void 0:d.theme)==="dark"?((x=h.classList)==null||x.add("dark"),h.setAttribute("data-theme","dark"),h.style.setProperty("--color-background","#0f172a"),h.style.setProperty("--color-foreground","#f8fafc"),h.style.setProperty("--color-card","#1e293b"),h.style.setProperty("--color-border","#475569"),h.style.setProperty("--color-muted","#334155"),h.style.setProperty("--color-muted-foreground","#e2e8f0"),h.style.setProperty("--color-primary","#3b82f6"),h.style.setProperty("--color-primary-foreground","#f8fafc"),console.log("üåô Mode Nuit activ√© avec contraste am√©lior√©")):((m=h.classList)==null||m.remove("dark"),h.setAttribute("data-theme","light"),h.style.removeProperty("--color-background"),h.style.removeProperty("--color-foreground"),h.style.removeProperty("--color-card"),h.style.removeProperty("--color-border"),h.style.removeProperty("--color-muted"),h.style.removeProperty("--color-muted-foreground"),h.style.removeProperty("--color-primary"),h.style.removeProperty("--color-primary-foreground"),console.log("‚òÄÔ∏è Mode Jour activ√©")),d!=null&&d.largeText?((G=h.classList)==null||G.add("large-text"),h.style.fontSize="118%",console.log("üî§ Texte agrandi activ√©")):((I=h.classList)==null||I.remove("large-text"),h.style.fontSize="")},C=()=>{const d={theme:"light",largeText:!1};T(d),localStorage.setItem("accessibility-settings",JSON.stringify(d)),g(d)},u=[{key:"theme",label:"Mode Nuit/Jour",description:"Basculer entre le th√®me clair et sombre",icon:"Moon",type:"select",options:[{value:"light",label:"‚òÄÔ∏è Jour"},{value:"dark",label:"üåô Nuit"}]},{key:"largeText",label:"Texte Agrandi",description:"Augmente la taille du texte pour une meilleure lisibilit√©",icon:"Type",type:"toggle"}];return e.jsxs("div",{className:`relative ${f}`,children:[e.jsxs(B,{variant:"ghost",size:"icon",onClick:()=>j(!p),className:"relative",title:"Accessibility Options",children:[e.jsx(y,{name:"Accessibility",size:20}),((s==null?void 0:s.largeText)||(s==null?void 0:s.theme)==="dark")&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent rounded-full"})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-accessibility",onClick:()=>j(!1)}),e.jsxs("div",{className:"absolute right-0 top-12 w-80 bg-popover border border-border rounded-lg shadow-modal z-accessibility",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-sm text-popover-foreground",children:"Accessibility Settings"}),e.jsx(B,{variant:"ghost",size:"sm",onClick:C,className:"text-xs",children:"Reset"})]}),e.jsx("div",{className:"p-4 space-y-4 max-h-80 overflow-y-auto",children:u==null?void 0:u.map(d=>{var h;return e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1 text-primary",children:e.jsx(y,{name:d==null?void 0:d.icon,size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"font-body font-body-semibold text-sm text-popover-foreground",children:d==null?void 0:d.label}),(d==null?void 0:d.type)==="toggle"&&e.jsx("button",{onClick:()=>o(d==null?void 0:d.key,!(s!=null&&s[d==null?void 0:d.key])),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ${s!=null&&s[d==null?void 0:d.key]?"bg-primary":"bg-muted"}`,children:e.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${s!=null&&s[d==null?void 0:d.key]?"translate-x-5":"translate-x-1"}`})}),(d==null?void 0:d.type)==="select"&&e.jsx("select",{value:s==null?void 0:s[d==null?void 0:d.key],onChange:x=>{var m;return o(d==null?void 0:d.key,(m=x==null?void 0:x.target)==null?void 0:m.value)},className:"text-sm border border-border rounded px-2 py-1 bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:(h=d==null?void 0:d.options)==null?void 0:h.map(x=>e.jsx("option",{value:x==null?void 0:x.value,children:x==null?void 0:x.label},x==null?void 0:x.value))})]}),e.jsx("p",{className:"font-body font-body-normal text-xs text-muted-foreground mt-1",children:d==null?void 0:d.description})]})]})},d==null?void 0:d.key)})}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[e.jsx(y,{name:"Info",size:14}),e.jsx("p",{className:"font-caption font-caption-normal text-xs",children:"Settings are saved automatically and persist across sessions."})]})})]})]}),e.jsx("style",{jsx:!0,global:!0,children:`
        /* Dark Theme - Mode Nuit Am√©lior√© */
        .dark {
          background-color: #0f172a !important;
          color: #f8fafc !important;
        }
        
        /* Backgrounds */
        .dark .bg-white,
        .dark .bg-gray-50 {
          background-color: #1e293b !important;
          color: #f8fafc !important;
        }
        
        .dark .bg-gray-100 {
          background-color: #334155 !important;
          color: #f8fafc !important;
        }
        
        .dark .bg-gray-200 {
          background-color: #475569 !important;
          color: #f8fafc !important;
        }
        
        .dark .bg-blue-50 {
          background-color: #1e3a5f !important;
          color: #dbeafe !important;
        }
        
        .dark .bg-green-50 {
          background-color: #1a4d2e !important;
          color: #d1fae5 !important;
        }
        
        .dark .bg-purple-50 {
          background-color: #3b2a4f !important;
          color: #e9d5ff !important;
        }
        
        .dark .bg-orange-50 {
          background-color: #4a2c1b !important;
          color: #fed7aa !important;
        }
        
        .dark .bg-yellow-50 {
          background-color: #4a4218 !important;
          color: #fef3c7 !important;
        }
        
        /* Text Colors - Contraste Am√©lior√© */
        .dark .text-gray-900,
        .dark .text-gray-800,
        .dark .text-gray-700,
        .dark .text-gray-600 {
          color: #f8fafc !important;
        }
        
        .dark .text-gray-500 {
          color: #e2e8f0 !important;
        }
        
        .dark .text-gray-400 {
          color: #cbd5e1 !important;
        }
        
        .dark .text-gray-300 {
          color: #94a3b8 !important;
        }
        
        /* Text Colors Color√©s */
        .dark .text-blue-600,
        .dark .text-blue-700,
        .dark .text-blue-800,
        .dark .text-blue-900 {
          color: #93c5fd !important;
        }
        
        .dark .text-green-600,
        .dark .text-green-700,
        .dark .text-green-800,
        .dark .text-green-900 {
          color: #86efac !important;
        }
        
        .dark .text-red-600,
        .dark .text-red-700,
        .dark .text-red-800,
        .dark .text-red-900 {
          color: #fca5a5 !important;
        }
        
        .dark .text-orange-600,
        .dark .text-orange-700,
        .dark .text-orange-800,
        .dark .text-orange-900 {
          color: #fdba74 !important;
        }
        
        .dark .text-purple-600,
        .dark .text-purple-700,
        .dark .text-purple-800,
        .dark .text-purple-900 {
          color: #c4b5fd !important;
        }
        
        .dark .text-yellow-600,
        .dark .text-yellow-700,
        .dark .text-yellow-800,
        .dark .text-yellow-900 {
          color: #fde047 !important;
        }
        
        /* Borders */
        .dark .border-gray-200,
        .dark .border-gray-300 {
          border-color: #475569 !important;
        }
        
        .dark .border-gray-100 {
          border-color: #334155 !important;
        }
        
        .dark .border-blue-200 {
          border-color: #3b82f6 !important;
        }
        
        .dark .border-green-200 {
          border-color: #22c55e !important;
        }
        
        /* Shadows */
        .dark .shadow-sm,
        .dark .shadow {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6) !important;
        }
        
        .dark .shadow-lg {
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.7) !important;
        }
        
        /* Cards et Conteneurs */
        .dark .bg-card {
          background-color: #1e293b !important;
          color: #f8fafc !important;
        }
        
        /* Boutons */
        .dark button {
          color: #f8fafc !important;
        }
        
        .dark .bg-blue-600 {
          background-color: #2563eb !important;
        }
        
        .dark .bg-green-600 {
          background-color: #16a34a !important;
        }
        
        /* Inputs */
        .dark input,
        .dark select,
        .dark textarea {
          background-color: #334155 !important;
          color: #f8fafc !important;
          border-color: #475569 !important;
        }
        
        .dark input::placeholder {
          color: #94a3b8 !important;
        }
        
        /* Tables */
        .dark table {
          color: #f8fafc !important;
        }
        
        .dark thead {
          background-color: #334155 !important;
        }
        
        .dark tbody tr {
          border-color: #475569 !important;
        }
        
        .dark tbody tr:hover {
          background-color: #334155 !important;
        }
        
        /* Large Text Mode */
        .large-text {
          font-size: 118% !important;
        }
        
        .large-text * {
          line-height: 1.6 !important;
        }
        
        .large-text h1 { font-size: 2.75rem !important; }
        .large-text h2 { font-size: 2.25rem !important; }
        .large-text h3 { font-size: 1.875rem !important; }
        .large-text h4 { font-size: 1.5rem !important; }
        .large-text h5 { font-size: 1.25rem !important; }
        .large-text h6 { font-size: 1.125rem !important; }
        .large-text p, 
        .large-text span, 
        .large-text div { 
          font-size: 1.125rem !important; 
        }
        .large-text button { 
          font-size: 1.125rem !important; 
          padding: 0.75rem 1.5rem !important; 
        }
        .large-text input, 
        .large-text select, 
        .large-text textarea { 
          font-size: 1.125rem !important; 
        }
      `})]})},je=({userRole:f="student",className:p=""})=>{const[j,s]=S.useState([]),[T,o]=S.useState(!1),[g,C]=S.useState(0);S.useEffect(()=>{s([]),C(0)},[f]);const u=m=>{s(G=>G==null?void 0:G.map(I=>(I==null?void 0:I.id)===m?{...I,read:!0}:I)),C(G=>Math.max(0,G-1))},d=()=>{s(m=>m==null?void 0:m.map(G=>({...G,read:!0}))),C(0)},h=m=>{switch(m){case"success":return"CheckCircle";case"warning":return"AlertTriangle";case"error":return"XCircle";default:return"Info"}},x=m=>{switch(m){case"success":return"text-success";case"warning":return"text-warning";case"error":return"text-error";default:return"text-primary"}};return e.jsxs("div",{className:`relative ${p}`,children:[e.jsxs(B,{variant:"ghost",size:"icon",onClick:()=>o(!T),className:"relative",children:[e.jsx(y,{name:"Bell",size:20}),g>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-accent-foreground text-xs rounded-full w-5 h-5 flex items-center justify-center font-caption font-caption-normal animate-pulse",children:g>9?"9+":g})]}),T&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-notification",onClick:()=>o(!1)}),e.jsxs("div",{className:"absolute right-0 top-12 w-80 bg-popover border border-border rounded-lg shadow-modal z-notification",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-sm text-popover-foreground",children:"Notifications"}),g>0&&e.jsx(B,{variant:"ghost",size:"sm",onClick:d,className:"text-xs",children:"Mark all read"})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:(j==null?void 0:j.length)===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(y,{name:"Bell",size:32,className:"text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"font-body font-body-normal text-sm text-muted-foreground",children:"No notifications yet"})]}):j==null?void 0:j.map(m=>e.jsx("div",{onClick:()=>u(m==null?void 0:m.id),className:`p-4 border-b border-border last:border-b-0 hover:bg-muted transition-micro cursor-pointer ${m!=null&&m.read?"":"bg-accent/5"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 mt-1 ${x(m==null?void 0:m.type)}`,children:e.jsx(y,{name:h(m==null?void 0:m.type),size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"font-body font-body-semibold text-sm text-popover-foreground",children:m==null?void 0:m.title}),!(m!=null&&m.read)&&e.jsx("div",{className:"w-2 h-2 bg-accent rounded-full flex-shrink-0"})]}),e.jsx("p",{className:"font-body font-body-normal text-sm text-muted-foreground mt-1 line-clamp-2",children:m==null?void 0:m.message}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:m==null?void 0:m.time}),e.jsx("span",{className:"font-caption font-caption-normal text-xs text-primary bg-primary/10 px-2 py-1 rounded-full",children:m==null?void 0:m.category})]})]})]})},m==null?void 0:m.id))}),(j==null?void 0:j.length)>0&&e.jsx("div",{className:"p-3 border-t border-border",children:e.jsxs(B,{variant:"ghost",size:"sm",className:"w-full",children:[e.jsx(y,{name:"ExternalLink",size:14,className:"mr-2"}),"View all notifications"]})})]})]})]})},Ne=({isOpen:f,onClose:p,student:j,assignment:s,onSave:T})=>{const[o,g]=S.useState({score:"",maxScore:"",letterGrade:"",comments:"",gradeType:"numerical"}),[C,u]=S.useState({}),d=[{value:"numerical",label:"Score num√©rique"},{value:"letter",label:"Note alphab√©tique"},{value:"competency",label:"√âvaluation par comp√©tences"}],h=[{value:"A+",label:"A+ (Excellent)"},{value:"A",label:"A (Tr√®s bien)"},{value:"B+",label:"B+ (Bien+)"},{value:"B",label:"B (Bien)"},{value:"C+",label:"C+ (Assez bien+)"},{value:"C",label:"C (Assez bien)"},{value:"D",label:"D (Passable)"},{value:"F",label:"F (Insuffisant)"}],x=[{value:"exceeds",label:"D√©passe les attentes"},{value:"meets",label:"R√©pond aux attentes"},{value:"approaching",label:"Approche les attentes"},{value:"below",label:"En dessous des attentes"}];S.useEffect(()=>{var N,a,k;f&&s&&(g({score:((N=s==null?void 0:s.currentGrade)==null?void 0:N.score)||"",maxScore:(s==null?void 0:s.maxScore)||"100",letterGrade:((a=s==null?void 0:s.currentGrade)==null?void 0:a.letterGrade)||"",comments:((k=s==null?void 0:s.currentGrade)==null?void 0:k.comments)||"",gradeType:(s==null?void 0:s.gradeType)||"numerical"}),u({}))},[f,s]);const m=()=>{var a;const N={};return(o==null?void 0:o.gradeType)==="numerical"?(o!=null&&o.score?parseFloat(o==null?void 0:o.score)>parseFloat(o==null?void 0:o.maxScore)?N.score="Le score ne peut pas d√©passer le score maximum":parseFloat(o==null?void 0:o.score)<0&&(N.score="Le score ne peut pas √™tre n√©gatif"):N.score="Le score est requis",o!=null&&o.maxScore||(N.maxScore="Le score maximum est requis")):(o==null?void 0:o.gradeType)==="letter"&&!(o!=null&&o.letterGrade)&&(N.letterGrade="La note alphab√©tique est requise"),u(N),((a=Object.keys(N))==null?void 0:a.length)===0},G=(N,a)=>{const k=parseFloat(N)/parseFloat(a)*100;return k>=97?"A+":k>=93?"A":k>=90?"B+":k>=87?"B":k>=83?"C+":k>=80?"C":k>=70?"D":"F"},I=()=>{var a;if(!m())return;let N={...o};(o==null?void 0:o.gradeType)==="numerical"&&(o!=null&&o.score)&&(o!=null&&o.maxScore)&&(N.letterGrade=G(o==null?void 0:o.score,o==null?void 0:o.maxScore),N.percentage=(parseFloat(o==null?void 0:o.score)/parseFloat(o==null?void 0:o.maxScore)*100).toFixed(1)),T({studentId:j==null?void 0:j.id,assignmentId:s==null?void 0:s.id,grade:N,timestamp:(a=new Date)==null?void 0:a.toISOString()}),p()};return f?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-surface rounded-lg shadow-modal w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-text-primary",children:"Saisie de note"}),e.jsxs("p",{className:"font-body font-body-normal text-sm text-text-secondary mt-1",children:[j==null?void 0:j.name," - ",s==null?void 0:s.title]})]}),e.jsx(B,{variant:"ghost",size:"icon",onClick:p,children:e.jsx(y,{name:"X",size:20})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(Z,{label:"Type d'√©valuation",options:d,value:o==null?void 0:o.gradeType,onChange:N=>g(a=>({...a,gradeType:N}))}),(o==null?void 0:o.gradeType)==="numerical"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(X,{label:"Score obtenu",type:"number",placeholder:"0",value:o==null?void 0:o.score,onChange:N=>g(a=>{var k;return{...a,score:(k=N==null?void 0:N.target)==null?void 0:k.value}}),error:C==null?void 0:C.score,min:"0",step:"0.1"}),e.jsx(X,{label:"Score maximum",type:"number",placeholder:"100",value:o==null?void 0:o.maxScore,onChange:N=>g(a=>{var k;return{...a,maxScore:(k=N==null?void 0:N.target)==null?void 0:k.value}}),error:C==null?void 0:C.maxScore,min:"1",step:"0.1"})]}),(o==null?void 0:o.gradeType)==="letter"&&e.jsx(Z,{label:"Note alphab√©tique",options:h,value:o==null?void 0:o.letterGrade,onChange:N=>g(a=>({...a,letterGrade:N})),error:C==null?void 0:C.letterGrade}),(o==null?void 0:o.gradeType)==="competency"&&e.jsx(Z,{label:"Niveau de comp√©tence",options:x,value:o==null?void 0:o.letterGrade,onChange:N=>g(a=>({...a,letterGrade:N}))}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-body font-body-semibold text-sm text-text-primary mb-2",children:"Commentaires (optionnel)"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none",rows:"3",placeholder:"Commentaires sur la performance de l'√©l√®ve...",value:o==null?void 0:o.comments,onChange:N=>g(a=>{var k;return{...a,comments:(k=N==null?void 0:N.target)==null?void 0:k.value}})})]}),(o==null?void 0:o.gradeType)==="numerical"&&(o==null?void 0:o.score)&&(o==null?void 0:o.maxScore)&&e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-text-primary mb-2",children:"Aper√ßu de la note"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-body font-body-normal text-sm text-text-secondary",children:"Pourcentage:"}),e.jsxs("span",{className:"font-heading font-heading-semibold text-lg text-primary",children:[(parseFloat(o==null?void 0:o.score)/parseFloat(o==null?void 0:o.maxScore)*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"font-body font-body-normal text-sm text-text-secondary",children:"Note alphab√©tique:"}),e.jsx("span",{className:"font-heading font-heading-semibold text-lg text-primary",children:G(o==null?void 0:o.score,o==null?void 0:o.maxScore)})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-border",children:[e.jsx(B,{variant:"outline",onClick:p,children:"Annuler"}),e.jsxs(B,{variant:"default",onClick:I,children:[e.jsx(y,{name:"Save",size:16,className:"mr-2"}),"Enregistrer"]})]})]})}):null},ge=({student:f,assignments:p,onGradeEdit:j,onViewDetails:s})=>{var m,G,I,N;const[T,o]=S.useState(!1),g=()=>{const a=p==null?void 0:p.filter(q=>q==null?void 0:q.currentGrade);if((a==null?void 0:a.length)===0)return null;const k=a==null?void 0:a.reduce((q,E)=>{var v;const l=((v=E==null?void 0:E.currentGrade)==null?void 0:v.percentage)||0,c=(E==null?void 0:E.weight)||1;return q+l*c},0),R=a==null?void 0:a.reduce((q,E)=>q+((E==null?void 0:E.weight)||1),0);return(k/R).toFixed(1)},C=a=>a>=90?"text-success":a>=80?"text-primary":a>=70?"text-warning":"text-error",u=a=>a>=90?"bg-success/10 text-success border-success/20":a>=80?"bg-primary/10 text-primary border-primary/20":a>=70?"bg-warning/10 text-warning border-warning/20":"bg-error/10 text-error border-error/20",d=g(),h=(m=p==null?void 0:p.filter(a=>a==null?void 0:a.currentGrade))==null?void 0:m.length,x=p==null?void 0:p.length;return e.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-card hover:shadow-modal transition-state",children:[e.jsxs("div",{className:"p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xe,{src:f==null?void 0:f.avatar,alt:f==null?void 0:f.name,className:"w-12 h-12 rounded-full object-cover"}),(f==null?void 0:f.status)==="absent"&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-error rounded-full border-2 border-card"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-base text-card-foreground",children:f==null?void 0:f.name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsxs("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["ID: ",f==null?void 0:f.id]}),e.jsxs("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["Classe: ",f==null?void 0:f.class]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[d&&e.jsx("div",{className:`px-3 py-1 rounded-full border ${u(parseFloat(d))}`,children:e.jsxs("span",{className:"font-heading font-heading-semibold text-sm",children:[d,"%"]})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-heading font-heading-semibold text-sm text-card-foreground",children:[h,"/",x]}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"√âvaluations"})]}),e.jsx(B,{variant:"ghost",size:"icon",onClick:()=>o(!T),children:e.jsx(y,{name:T?"ChevronUp":"ChevronDown",size:20})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-sm text-success",children:(G=p==null?void 0:p.filter(a=>{var k;return(a==null?void 0:a.currentGrade)&&parseFloat((k=a==null?void 0:a.currentGrade)==null?void 0:k.percentage)>=80}))==null?void 0:G.length}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"Bonnes notes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-sm text-warning",children:(I=p==null?void 0:p.filter(a=>!(a!=null&&a.currentGrade)&&new Date(a.dueDate)<new Date))==null?void 0:I.length}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"En retard"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-sm text-primary",children:(N=p==null?void 0:p.filter(a=>!(a!=null&&a.currentGrade)&&new Date(a.dueDate)>=new Date))==null?void 0:N.length}),e.jsx("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:"√Ä √©valuer"})]})]}),e.jsxs(B,{variant:"outline",size:"sm",onClick:()=>s(f),children:[e.jsx(y,{name:"Eye",size:14,className:"mr-2"}),"D√©tails"]})]})]}),T&&e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:p==null?void 0:p.map(a=>{var k,R,q,E,l,c,v,r;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg hover:bg-muted/80 transition-micro",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a!=null&&a.currentGrade?(R=C(parseFloat((k=a==null?void 0:a.currentGrade)==null?void 0:k.percentage)))==null?void 0:R.replace("text-","bg-"):"bg-muted-foreground"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-card-foreground",children:a==null?void 0:a.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:a==null?void 0:a.category}),e.jsxs("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["Poids: ",a==null?void 0:a.weight,"%"]}),e.jsxs("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["√âch√©ance: ",(q=new Date(a.dueDate))==null?void 0:q.toLocaleDateString("fr-FR")]})]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[a!=null&&a.currentGrade?e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-heading font-heading-semibold text-sm ${C(parseFloat((E=a==null?void 0:a.currentGrade)==null?void 0:E.percentage))}`,children:[(l=a==null?void 0:a.currentGrade)==null?void 0:l.score,"/",a==null?void 0:a.maxScore]}),e.jsxs("div",{className:`font-caption font-caption-normal text-xs ${C(parseFloat((c=a==null?void 0:a.currentGrade)==null?void 0:c.percentage))}`,children:[(v=a==null?void 0:a.currentGrade)==null?void 0:v.percentage,"% (",(r=a==null?void 0:a.currentGrade)==null?void 0:r.letterGrade,")"]})]}):e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-body font-body-normal text-sm text-muted-foreground",children:"Non √©valu√©"}),e.jsxs("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["/",a==null?void 0:a.maxScore]})]}),e.jsx(B,{variant:"ghost",size:"sm",onClick:()=>j(f,a),children:e.jsx(y,{name:a!=null&&a.currentGrade?"Edit":"Plus",size:14})})]})]},a==null?void 0:a.id)})})})]})},we=({assignments:f,onAssignmentCreate:p,onAssignmentUpdate:j,onAssignmentDelete:s})=>{const[T,o]=S.useState(!1),[g,C]=S.useState(null),[u,d]=S.useState({title:"",description:"",category:"",maxScore:"100",weight:"10",dueDate:"",gradeType:"numerical"}),[h,x]=S.useState({}),m=[{value:"test",label:"Contr√¥le"},{value:"homework",label:"Devoir"},{value:"project",label:"Projet"},{value:"participation",label:"Participation"},{value:"quiz",label:"Quiz"},{value:"presentation",label:"Pr√©sentation"}],G=[{value:"numerical",label:"Score num√©rique"},{value:"letter",label:"Note alphab√©tique"},{value:"competency",label:"√âvaluation par comp√©tences"}],I=()=>{d({title:"",description:"",category:"",maxScore:"100",weight:"10",dueDate:"",gradeType:"numerical"}),x({}),C(null)},N=()=>{I(),o(!0)},a=l=>{var c,v,r,b;d({title:l==null?void 0:l.title,description:l==null?void 0:l.description,category:l==null?void 0:l.category,maxScore:(c=l==null?void 0:l.maxScore)==null?void 0:c.toString(),weight:(v=l==null?void 0:l.weight)==null?void 0:v.toString(),dueDate:(b=(r=l==null?void 0:l.dueDate)==null?void 0:r.split("T"))==null?void 0:b[0],gradeType:l==null?void 0:l.gradeType}),C(l),o(!0)},k=()=>{var c,v;const l={};return(c=u==null?void 0:u.title)!=null&&c.trim()||(l.title="Le titre est requis"),u!=null&&u.category||(l.category="La cat√©gorie est requise"),(!(u!=null&&u.maxScore)||parseFloat(u==null?void 0:u.maxScore)<=0)&&(l.maxScore="Le score maximum doit √™tre sup√©rieur √† 0"),(!(u!=null&&u.weight)||parseFloat(u==null?void 0:u.weight)<=0)&&(l.weight="Le poids doit √™tre sup√©rieur √† 0"),u!=null&&u.dueDate||(l.dueDate="La date d'√©ch√©ance est requise"),x(l),((v=Object.keys(l))==null?void 0:v.length)===0},R=()=>{var c,v,r;if(!k())return;const l={...u,maxScore:parseFloat(u==null?void 0:u.maxScore),weight:parseFloat(u==null?void 0:u.weight),dueDate:(c=new Date(u.dueDate))==null?void 0:c.toISOString(),id:(g==null?void 0:g.id)||`assignment_${Date.now()}`,createdAt:(g==null?void 0:g.createdAt)||((v=new Date)==null?void 0:v.toISOString()),updatedAt:(r=new Date)==null?void 0:r.toISOString()};g?j(l):p(l),o(!1),I()},q=l=>{switch(l){case"test":return"FileText";case"homework":return"BookOpen";case"project":return"Folder";case"participation":return"Users";case"quiz":return"HelpCircle";case"presentation":return"Presentation";default:return"File"}},E=l=>{switch(l){case"test":return"text-error bg-error/10";case"homework":return"text-primary bg-primary/10";case"project":return"text-success bg-success/10";case"participation":return"text-warning bg-warning/10";case"quiz":return"text-accent bg-accent/10";case"presentation":return"text-secondary bg-secondary/10";default:return"text-muted-foreground bg-muted"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading font-heading-semibold text-xl text-text-primary",children:"Gestion des √©valuations"}),e.jsx("p",{className:"font-body font-body-normal text-sm text-text-secondary mt-1",children:"Cr√©er et g√©rer les √©valuations pour la classe"})]}),e.jsxs(B,{variant:"default",onClick:N,children:[e.jsx(y,{name:"Plus",size:16,className:"mr-2"}),"Nouvelle √©valuation"]})]}),e.jsxs("div",{className:"grid gap-4",children:[f==null?void 0:f.map(l=>{var c,v;return e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 hover:shadow-card transition-state",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${E(l==null?void 0:l.category)}`,children:e.jsx(y,{name:q(l==null?void 0:l.category),size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-base text-card-foreground",children:l==null?void 0:l.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:(c=m==null?void 0:m.find(r=>(r==null?void 0:r.value)===(l==null?void 0:l.category)))==null?void 0:c.label}),e.jsxs("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["Max: ",l==null?void 0:l.maxScore," points"]}),e.jsxs("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["Poids: ",l==null?void 0:l.weight,"%"]}),e.jsxs("span",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["√âch√©ance: ",(v=new Date(l.dueDate))==null?void 0:v.toLocaleDateString("fr-FR")]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{variant:"ghost",size:"sm",onClick:()=>a(l),children:e.jsx(y,{name:"Edit",size:14})}),e.jsx(B,{variant:"ghost",size:"sm",onClick:()=>s(l==null?void 0:l.id),children:e.jsx(y,{name:"Trash2",size:14})})]})]}),(l==null?void 0:l.description)&&e.jsx("p",{className:"font-body font-body-normal text-sm text-muted-foreground mt-3 pl-12",children:l==null?void 0:l.description})]},l==null?void 0:l.id)}),(f==null?void 0:f.length)===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{name:"FileText",size:48,className:"text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-text-primary mb-2",children:"Aucune √©valuation"}),e.jsx("p",{className:"font-body font-body-normal text-sm text-text-secondary mb-4",children:"Commencez par cr√©er votre premi√®re √©valuation"}),e.jsxs(B,{variant:"default",onClick:N,children:[e.jsx(y,{name:"Plus",size:16,className:"mr-2"}),"Cr√©er une √©valuation"]})]})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-surface rounded-lg shadow-modal w-full max-w-lg mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-text-primary",children:g?"Modifier l'√©valuation":"Nouvelle √©valuation"}),e.jsx(B,{variant:"ghost",size:"icon",onClick:()=>o(!1),children:e.jsx(y,{name:"X",size:20})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(X,{label:"Titre de l'√©valuation",placeholder:"Ex: Contr√¥le de math√©matiques",value:u==null?void 0:u.title,onChange:l=>d(c=>{var v;return{...c,title:(v=l==null?void 0:l.target)==null?void 0:v.value}}),error:h==null?void 0:h.title,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-body font-body-semibold text-sm text-text-primary mb-2",children:"Description (optionnel)"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none",rows:"3",placeholder:"Description de l'√©valuation...",value:u==null?void 0:u.description,onChange:l=>d(c=>{var v;return{...c,description:(v=l==null?void 0:l.target)==null?void 0:v.value}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Z,{label:"Cat√©gorie",options:m,value:u==null?void 0:u.category,onChange:l=>d(c=>({...c,category:l})),error:h==null?void 0:h.category,required:!0}),e.jsx(Z,{label:"Type d'√©valuation",options:G,value:u==null?void 0:u.gradeType,onChange:l=>d(c=>({...c,gradeType:l}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(X,{label:"Score maximum",type:"number",placeholder:"100",value:u==null?void 0:u.maxScore,onChange:l=>d(c=>{var v;return{...c,maxScore:(v=l==null?void 0:l.target)==null?void 0:v.value}}),error:h==null?void 0:h.maxScore,min:"1",step:"0.1",required:!0}),e.jsx(X,{label:"Poids (%)",type:"number",placeholder:"10",value:u==null?void 0:u.weight,onChange:l=>d(c=>{var v;return{...c,weight:(v=l==null?void 0:l.target)==null?void 0:v.value}}),error:h==null?void 0:h.weight,min:"0.1",step:"0.1",required:!0})]}),e.jsx(X,{label:"Date d'√©ch√©ance",type:"date",value:u==null?void 0:u.dueDate,onChange:l=>d(c=>{var v;return{...c,dueDate:(v=l==null?void 0:l.target)==null?void 0:v.value}}),error:h==null?void 0:h.dueDate,required:!0})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-border",children:[e.jsx(B,{variant:"outline",onClick:()=>o(!1),children:"Annuler"}),e.jsxs(B,{variant:"default",onClick:R,children:[e.jsx(y,{name:"Save",size:16,className:"mr-2"}),g?"Modifier":"Cr√©er"]})]})]})})]})},Se=({students:f,assignments:p})=>{var N,a,k,R,q,E;const[j,s]=S.useState("all"),[T,o]=S.useState("all"),[g,C]=S.useState("overview"),u=[{value:"all",label:"Toute l'ann√©e"},{value:"current",label:"P√©riode actuelle"},{value:"last30",label:"30 derniers jours"},{value:"last7",label:"7 derniers jours"}],d=[{value:"all",label:"Toutes cat√©gories"},{value:"test",label:"Contr√¥les"},{value:"homework",label:"Devoirs"},{value:"project",label:"Projets"},{value:"participation",label:"Participation"}],h=[{value:"overview",label:"Vue d'ensemble"},{value:"trends",label:"Tendances"},{value:"distribution",label:"Distribution"}],x=S.useMemo(()=>{var b;const l=p==null?void 0:p.filter(t=>{if(T!=="all"&&(t==null?void 0:t.category)!==T)return!1;if(j!=="all"){const n=new Date(t.dueDate),w=new Date;switch(j){case"current":return(n==null?void 0:n.getMonth())===(w==null?void 0:w.getMonth());case"last30":return w-n<=2592e6;case"last7":return w-n<=6048e5;default:return!0}}return!0}),c=l==null?void 0:l.map(t=>{var P,F,O;const n=(P=f==null?void 0:f.map(_=>{var z;return(z=t==null?void 0:t.currentGrade)==null?void 0:z.percentage}))==null?void 0:P.filter(_=>_!==void 0),w=(n==null?void 0:n.length)>0?(n==null?void 0:n.reduce((_,z)=>_+parseFloat(z),0))/(n==null?void 0:n.length):0;return{name:((F=t==null?void 0:t.title)==null?void 0:F.substring(0,15))+(((O=t==null?void 0:t.title)==null?void 0:O.length)>15?"...":""),average:parseFloat(w==null?void 0:w.toFixed(1)),category:t==null?void 0:t.category,totalStudents:f==null?void 0:f.length,gradedStudents:n==null?void 0:n.length}}),v=[{range:"A (90-100%)",min:90,max:100,count:0,color:"#27AE60"},{range:"B (80-89%)",min:80,max:89,count:0,color:"#2A5CAA"},{range:"C (70-79%)",min:70,max:79,count:0,color:"#F4C430"},{range:"D (60-69%)",min:60,max:69,count:0,color:"#F39C12"},{range:"F (<60%)",min:0,max:59,count:0,color:"#E74C3C"}];l==null||l.forEach(t=>{f==null||f.forEach(n=>{var P;const w=(P=t==null?void 0:t.currentGrade)==null?void 0:P.percentage;if(w!==void 0){const F=parseFloat(w);v==null||v.forEach(O=>{F>=(O==null?void 0:O.min)&&F<=(O==null?void 0:O.max)&&O.count++})}})});const r=(b=f==null?void 0:f.map(t=>{var P,F,O,_;const n=(F=(P=l==null?void 0:l.filter(z=>{var $;return($=z==null?void 0:z.currentGrade)==null?void 0:$.percentage}))==null?void 0:P.map(z=>{var $;return{assignment:z==null?void 0:z.title,grade:parseFloat(($=z==null?void 0:z.currentGrade)==null?void 0:$.percentage),date:z==null?void 0:z.dueDate}}))==null?void 0:F.sort((z,$)=>new Date(z.date)-new Date($.date)),w=(n==null?void 0:n.length)>0?(n==null?void 0:n.reduce((z,$)=>z+($==null?void 0:$.grade),0))/(n==null?void 0:n.length):0;return{name:t==null?void 0:t.name,average:parseFloat(w==null?void 0:w.toFixed(1)),trend:(n==null?void 0:n.length)>=2?((O=n==null?void 0:n[(n==null?void 0:n.length)-1])==null?void 0:O.grade)-((_=n==null?void 0:n[0])==null?void 0:_.grade):0,totalAssignments:l==null?void 0:l.length,completedAssignments:n==null?void 0:n.length}}))==null?void 0:b.sort((t,n)=>(n==null?void 0:n.average)-(t==null?void 0:t.average));return{classAverages:c,gradeDistribution:v,studentTrends:r,totalAssignments:l==null?void 0:l.length,overallClassAverage:(c==null?void 0:c.length)>0?(c==null?void 0:c.reduce((t,n)=>t+(n==null?void 0:n.average),0))/(c==null?void 0:c.length):0}},[f,p,j,T]),m=()=>{var l;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"Moyennes par √©valuation"}),e.jsx("div",{className:"h-64",children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(ne,{data:x==null?void 0:x.classAverages,children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(ee,{dataKey:"name",stroke:"var(--color-text-secondary)",fontSize:12,angle:-45,textAnchor:"end",height:80}),e.jsx(re,{stroke:"var(--color-text-secondary)",fontSize:12,domain:[0,100]}),e.jsx(K,{contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),e.jsx(ue,{dataKey:"average",fill:"var(--color-primary)",radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"Distribution des notes"}),e.jsx("div",{className:"h-64",children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(he,{children:[e.jsx(me,{data:x==null?void 0:x.gradeDistribution,cx:"50%",cy:"50%",outerRadius:80,dataKey:"count",label:({range:c,count:v})=>v>0?`${c}: ${v}`:"",children:(l=x==null?void 0:x.gradeDistribution)==null?void 0:l.map((c,v)=>e.jsx(pe,{fill:c==null?void 0:c.color},`cell-${v}`))}),e.jsx(K,{})]})})})]})]})},G=()=>e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"√âvolution des moyennes de classe"}),e.jsx("div",{className:"h-80",children:e.jsx(H,{width:"100%",height:"100%",children:e.jsxs(fe,{data:x==null?void 0:x.classAverages,children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(ee,{dataKey:"name",stroke:"var(--color-text-secondary)",fontSize:12}),e.jsx(re,{stroke:"var(--color-text-secondary)",fontSize:12,domain:[0,100]}),e.jsx(K,{contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),e.jsx(be,{type:"monotone",dataKey:"average",stroke:"var(--color-primary)",strokeWidth:3,dot:{fill:"var(--color-primary)",strokeWidth:2,r:6}})]})})})]}),I=()=>{var l;return e.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-card-foreground mb-4",children:"Classement des √©l√®ves"}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:(l=x==null?void 0:x.studentTrends)==null?void 0:l.map((c,v)=>{var r;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-heading font-heading-semibold text-sm ${v===0?"bg-success text-white":v===1?"bg-primary text-white":v===2?"bg-warning text-white":"bg-muted-foreground text-white"}`,children:v+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-card-foreground",children:c==null?void 0:c.name}),e.jsxs("p",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:[c==null?void 0:c.completedAssignments,"/",c==null?void 0:c.totalAssignments," √©valuations"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-heading font-heading-semibold text-lg text-primary",children:[c==null?void 0:c.average,"%"]}),e.jsxs("div",{className:`flex items-center space-x-1 font-caption font-caption-normal text-xs ${(c==null?void 0:c.trend)>0?"text-success":(c==null?void 0:c.trend)<0?"text-error":"text-muted-foreground"}`,children:[e.jsx(y,{name:(c==null?void 0:c.trend)>0?"TrendingUp":(c==null?void 0:c.trend)<0?"TrendingDown":"Minus",size:12}),e.jsxs("span",{children:[(r=Math.abs(c==null?void 0:c.trend))==null?void 0:r.toFixed(1),"%"]})]})]})]},c==null?void 0:c.name)})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-heading font-heading-semibold text-xl text-text-primary",children:"Analyses des notes"}),e.jsxs("p",{className:"font-body font-body-normal text-sm text-text-secondary mt-1",children:["Moyenne g√©n√©rale: ",(N=x==null?void 0:x.overallClassAverage)==null?void 0:N.toFixed(1),"% ‚Ä¢ ",x==null?void 0:x.totalAssignments," √©valuations"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(Z,{options:h,value:g,onChange:C,className:"w-40"}),e.jsx(Z,{options:u,value:j,onChange:s,className:"w-40"}),e.jsx(Z,{options:d,value:T,onChange:o,className:"w-40"})]})]}),g==="overview"&&e.jsxs("div",{className:"space-y-6",children:[m(),I()]}),g==="trends"&&e.jsxs("div",{className:"space-y-6",children:[G(),I()]}),g==="distribution"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:m()}),e.jsx("div",{children:I()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 text-center",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-2xl text-success",children:((k=(a=x==null?void 0:x.gradeDistribution)==null?void 0:a.find(l=>{var c;return(c=l==null?void 0:l.range)==null?void 0:c.includes("A")}))==null?void 0:k.count)||0}),e.jsx("div",{className:"font-body font-body-normal text-sm text-muted-foreground",children:"Notes A (90-100%)"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"font-heading font-heading-semibold text-2xl text-primary",children:[(R=x==null?void 0:x.overallClassAverage)==null?void 0:R.toFixed(1),"%"]}),e.jsx("div",{className:"font-body font-body-normal text-sm text-muted-foreground",children:"Moyenne g√©n√©rale"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 text-center",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-2xl text-warning",children:(E=(q=x==null?void 0:x.studentTrends)==null?void 0:q.filter(l=>(l==null?void 0:l.completedAssignments)<(l==null?void 0:l.totalAssignments)))==null?void 0:E.length}),e.jsx("div",{className:"font-body font-body-normal text-sm text-muted-foreground",children:"√âvaluations manquantes"})]}),e.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 text-center",children:[e.jsx("div",{className:"font-heading font-heading-semibold text-2xl text-accent",children:x==null?void 0:x.totalAssignments}),e.jsx("div",{className:"font-body font-body-normal text-sm text-muted-foreground",children:"Total √©valuations"})]})]})]})},ke=({isOpen:f,onClose:p,students:j,assignment:s,onBulkSave:T})=>{var v;const[o,g]=S.useState([]),[C,u]=S.useState(""),[d,h]=S.useState(""),[x,m]=S.useState({}),[G,I]=S.useState(!1),N=[{value:"",label:"S√©lectionner une action"},{value:"set_all",label:"D√©finir la m√™me note pour tous"},{value:"add_points",label:"Ajouter des points √† tous"},{value:"multiply",label:"Multiplier toutes les notes"},{value:"curve",label:"Appliquer une courbe"}];S.useEffect(()=>{if(f&&j&&s){const r=j==null?void 0:j.map(b=>{var t,n,w;return{studentId:b==null?void 0:b.id,studentName:b==null?void 0:b.name,currentScore:((t=s==null?void 0:s.currentGrade)==null?void 0:t.score)||"",newScore:((n=s==null?void 0:s.currentGrade)==null?void 0:n.score)||"",maxScore:s==null?void 0:s.maxScore,comments:((w=s==null?void 0:s.currentGrade)==null?void 0:w.comments)||"",hasChanges:!1}});g(r),m({})}},[f,j,s]);const a=(r,b,t)=>{g(n=>n==null?void 0:n.map(w=>{var P;if((w==null?void 0:w.studentId)===r){const F={...w,[b]:t};return F.hasChanges=(F==null?void 0:F.newScore)!==(F==null?void 0:F.currentScore)||(F==null?void 0:F.comments)!==(((P=s==null?void 0:s.currentGrade)==null?void 0:P.comments)||""),F}return w})),x!=null&&x[r]&&m(n=>{const w={...n};return w==null||delete w[r],w})},k=()=>{!C||!d||(g(r=>r==null?void 0:r.map(b=>{let t=parseFloat(b==null?void 0:b.newScore)||0;const n=parseFloat(b==null?void 0:b.maxScore);switch(C){case"set_all":t=parseFloat(d);break;case"add_points":t=(parseFloat(b==null?void 0:b.newScore)||0)+parseFloat(d);break;case"multiply":t=(parseFloat(b==null?void 0:b.newScore)||0)*parseFloat(d);break;case"curve":const w=parseFloat(d)/100;t=(parseFloat(b==null?void 0:b.newScore)||0)+n*w;break;default:return b}return t=Math.min(Math.max(0,t),n),{...b,newScore:t==null?void 0:t.toString(),hasChanges:!0}})),u(""),h(""))},R=()=>{var b;const r={};return o==null||o.forEach(t=>{if(t!=null&&t.hasChanges){const n=parseFloat(t==null?void 0:t.newScore),w=parseFloat(t==null?void 0:t.maxScore);isNaN(n)?r[t.studentId]="Score invalide":n<0?r[t.studentId]="Le score ne peut pas √™tre n√©gatif":n>w&&(r[t.studentId]=`Le score ne peut pas d√©passer ${w}`)}}),m(r),((b=Object.keys(r))==null?void 0:b.length)===0},q=async()=>{if(!R())return;I(!0);const r=o==null?void 0:o.filter(t=>t==null?void 0:t.hasChanges);if((r==null?void 0:r.length)===0){I(!1),p();return}const b=r==null?void 0:r.map(t=>{var n;return{studentId:t==null?void 0:t.studentId,assignmentId:s==null?void 0:s.id,grade:{score:t==null?void 0:t.newScore,maxScore:t==null?void 0:t.maxScore,percentage:(parseFloat(t==null?void 0:t.newScore)/parseFloat(t==null?void 0:t.maxScore)*100).toFixed(1),letterGrade:E(t==null?void 0:t.newScore,t==null?void 0:t.maxScore),comments:t==null?void 0:t.comments,gradeType:(s==null?void 0:s.gradeType)||"numerical"},timestamp:(n=new Date)==null?void 0:n.toISOString()}});try{await T(b),p()}catch(t){console.error("Error saving bulk grades:",t)}finally{I(!1)}},E=(r,b)=>{const t=parseFloat(r)/parseFloat(b)*100;return t>=97?"A+":t>=93?"A":t>=90?"B+":t>=87?"B":t>=83?"C+":t>=80?"C":t>=70?"D":"F"},l=(r,b)=>{const t=parseFloat(r)/parseFloat(b)*100;return t>=90?"text-success":t>=80?"text-primary":t>=70?"text-warning":"text-error"},c=(v=o==null?void 0:o.filter(r=>r==null?void 0:r.hasChanges))==null?void 0:v.length;return f?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-surface rounded-lg shadow-modal w-full max-w-4xl mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading font-heading-semibold text-lg text-text-primary",children:"Saisie group√©e des notes"}),e.jsxs("p",{className:"font-body font-body-normal text-sm text-text-secondary mt-1",children:[s==null?void 0:s.title," ‚Ä¢ ",j==null?void 0:j.length," √©l√®ves"]})]}),e.jsx(B,{variant:"ghost",size:"icon",onClick:p,children:e.jsx(y,{name:"X",size:20})})]}),e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-end space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Z,{label:"Action group√©e",options:N,value:C,onChange:u})}),e.jsx("div",{className:"flex-1",children:e.jsx(X,{label:"Valeur",type:"number",placeholder:"Entrer la valeur",value:d,onChange:r=>{var b;return h((b=r==null?void 0:r.target)==null?void 0:b.value)},disabled:!C,step:"0.1"})}),e.jsxs(B,{variant:"outline",onClick:k,disabled:!C||!d,children:[e.jsx(y,{name:"Zap",size:16,className:"mr-2"}),"Appliquer"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-4",children:o==null?void 0:o.map(r=>{var b,t,n,w;return e.jsxs("div",{className:`p-4 border rounded-lg transition-state ${r!=null&&r.hasChanges?"border-primary bg-primary/5":"border-border bg-card"} ${x!=null&&x[r==null?void 0:r.studentId]?"border-error":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-heading font-heading-semibold text-sm text-primary-foreground",children:(w=(n=(t=(b=r==null?void 0:r.studentName)==null?void 0:b.split(" "))==null?void 0:t.map(P=>P==null?void 0:P[0]))==null?void 0:n.join(""))==null?void 0:w.substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-body font-body-semibold text-sm text-card-foreground",children:r==null?void 0:r.studentName}),(r==null?void 0:r.currentScore)&&e.jsxs("p",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:["Note actuelle: ",r==null?void 0:r.currentScore,"/",r==null?void 0:r.maxScore]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{type:"number",placeholder:"0",value:r==null?void 0:r.newScore,onChange:P=>{var F;return a(r==null?void 0:r.studentId,"newScore",(F=P==null?void 0:P.target)==null?void 0:F.value)},className:"w-20",min:"0",max:r==null?void 0:r.maxScore,step:"0.1"}),e.jsxs("span",{className:"font-body font-body-normal text-sm text-muted-foreground",children:["/ ",r==null?void 0:r.maxScore]})]}),(r==null?void 0:r.newScore)&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-heading font-heading-semibold text-sm ${l(r==null?void 0:r.newScore,r==null?void 0:r.maxScore)}`,children:[(parseFloat(r==null?void 0:r.newScore)/parseFloat(r==null?void 0:r.maxScore)*100).toFixed(1),"%"]}),e.jsx("div",{className:`font-caption font-caption-normal text-xs ${l(r==null?void 0:r.newScore,r==null?void 0:r.maxScore)}`,children:E(r==null?void 0:r.newScore,r==null?void 0:r.maxScore)})]}),(r==null?void 0:r.hasChanges)&&e.jsx(y,{name:"AlertCircle",size:16,className:"text-primary"})]})]}),(x==null?void 0:x[r==null?void 0:r.studentId])&&e.jsx("p",{className:"font-body font-body-normal text-sm text-error mt-2",children:x==null?void 0:x[r==null?void 0:r.studentId]}),e.jsx("div",{className:"mt-3",children:e.jsx("textarea",{className:"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none text-sm",rows:"2",placeholder:"Commentaires (optionnel)...",value:r==null?void 0:r.comments,onChange:P=>{var F;return a(r==null?void 0:r.studentId,"comments",(F=P==null?void 0:P.target)==null?void 0:F.value)}})})]},r==null?void 0:r.studentId)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-border",children:[e.jsxs("div",{className:"font-body font-body-normal text-sm text-text-secondary",children:[c," modification",c!==1?"s":""," en attente"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{variant:"outline",onClick:p,disabled:G,children:"Annuler"}),e.jsxs(B,{variant:"default",onClick:q,disabled:c===0||G,loading:G,children:[e.jsx(y,{name:"Save",size:16,className:"mr-2"}),"Enregistrer ",c>0?`(${c})`:""]})]})]})]})}):null},Pe=()=>{const f=ie(),[p]=S.useState({role:"secretary",name:"Marie Dubois",id:"secretary_001"}),[j,s]=S.useState(!1),[T,o]=S.useState("grades"),[g,C]=S.useState("6A"),[u,d]=S.useState("mathematics"),[h,x]=S.useState(""),[m,G]=S.useState("cards"),[I,N]=S.useState(!1),[a,k]=S.useState(!1),[R,q]=S.useState(null),[E,l]=S.useState(null),[c,v]=S.useState([]),[r,b]=S.useState([]),[t,n]=S.useState(!0),w=[{id:"student_001",name:"Lucas Martin",class:"6A",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",status:"present"},{id:"student_002",name:"Emma Dubois",class:"6A",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face",status:"present"},{id:"student_003",name:"Noah Leroy",class:"6A",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",status:"absent"},{id:"student_004",name:"L√©a Bernard",class:"6A",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",status:"present"},{id:"student_005",name:"Hugo Moreau",class:"6A",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face",status:"present"},{id:"student_006",name:"Chlo√© Petit",class:"6A",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop&crop=face",status:"present"}],P=[{id:"assignment_001",title:"Contr√¥le Alg√®bre",description:"√âvaluation sur les √©quations du premier degr√©",category:"test",maxScore:20,weight:25,dueDate:"2024-12-15T10:00:00Z",gradeType:"numerical",createdAt:"2024-12-01T08:00:00Z",currentGrade:{score:"16",percentage:"80.0",letterGrade:"B",comments:"Bon travail, quelques erreurs de calcul"}},{id:"assignment_002",title:"Devoir G√©om√©trie",description:"Exercices sur les triangles et leurs propri√©t√©s",category:"homework",maxScore:15,weight:15,dueDate:"2024-12-18T23:59:00Z",gradeType:"numerical",createdAt:"2024-12-05T14:00:00Z",currentGrade:{score:"13",percentage:"86.7",letterGrade:"B",comments:"Tr√®s bien, construction pr√©cise"}},{id:"assignment_003",title:"Projet Statistiques",description:"Analyse de donn√©es et cr√©ation de graphiques",category:"project",maxScore:25,weight:30,dueDate:"2024-12-20T17:00:00Z",gradeType:"numerical",createdAt:"2024-11-25T09:00:00Z"},{id:"assignment_004",title:"Participation Orale",description:"√âvaluation de la participation en classe",category:"participation",maxScore:10,weight:10,dueDate:"2024-12-22T16:00:00Z",gradeType:"competency",createdAt:"2024-12-01T08:00:00Z",currentGrade:{score:"8",percentage:"80.0",letterGrade:"meets",comments:"Participation active et pertinente"}}],F=[{value:"6A",label:"6√®me A (28 √©l√®ves)"},{value:"6B",label:"6√®me B (26 √©l√®ves)"},{value:"5A",label:"5√®me A (30 √©l√®ves)"},{value:"5B",label:"5√®me B (27 √©l√®ves)"},{value:"4A",label:"4√®me A (25 √©l√®ves)"},{value:"4B",label:"4√®me B (29 √©l√®ves)"}],O=[{value:"mathematics",label:"Math√©matiques"},{value:"french",label:"Fran√ßais"},{value:"english",label:"Anglais"},{value:"history",label:"Histoire-G√©ographie"},{value:"science",label:"Sciences"},{value:"physics",label:"Physique-Chimie"}],_=[{value:"grades",label:"Notes des √©l√®ves",icon:"BookOpen"},{value:"assignments",label:"Gestion des √©valuations",icon:"FileText"},{value:"analytics",label:"Analyses",icon:"BarChart3"}];S.useEffect(()=>{n(!0),setTimeout(()=>{v(w),b(P),n(!1)},1e3)},[g,u]);const z=c==null?void 0:c.filter(i=>{var A,M,V,J;return((M=(A=i==null?void 0:i.name)==null?void 0:A.toLowerCase())==null?void 0:M.includes(h==null?void 0:h.toLowerCase()))||((J=(V=i==null?void 0:i.id)==null?void 0:V.toLowerCase())==null?void 0:J.includes(h==null?void 0:h.toLowerCase()))}),$=(i,A)=>{q(i),l(A),N(!0)},le=i=>{b(A=>A==null?void 0:A.map(M=>(M==null?void 0:M.id)===(i==null?void 0:i.assignmentId)?{...M,currentGrade:i==null?void 0:i.grade}:M)),console.log("Grade saved:",i)},oe=async i=>{i==null||i.forEach(A=>{b(M=>M==null?void 0:M.map(V=>(V==null?void 0:V.id)===(A==null?void 0:A.assignmentId)?{...V,currentGrade:A==null?void 0:A.grade}:V))}),console.log("Bulk grades saved:",i)},ae=i=>{f("/student-profile-management",{state:{studentId:i==null?void 0:i.id,activeTab:"grades"}})},te=i=>{b(A=>[...A,i])},ce=i=>{b(A=>A==null?void 0:A.map(M=>(M==null?void 0:M.id)===(i==null?void 0:i.id)?i:M))},se=i=>{window.confirm("√ätes-vous s√ªr de vouloir supprimer cette √©valuation ?")&&b(A=>A==null?void 0:A.filter(M=>(M==null?void 0:M.id)!==i))},de=i=>{l(i),k(!0)};return t?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Q,{userRole:p==null?void 0:p.role,userName:p==null?void 0:p.name,isCollapsed:j,onToggleSidebar:()=>s(!j)}),e.jsx(U,{userRole:p==null?void 0:p.role,isCollapsed:j,onToggle:()=>s(!j)}),e.jsx("main",{className:`pt-16 transition-all duration-state ${j?"lg:pl-16":"lg:pl-64"}`,children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"font-body font-body-normal text-text-secondary",children:"Chargement des donn√©es..."})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Q,{userRole:p==null?void 0:p.role,userName:p==null?void 0:p.name,isCollapsed:j,onToggleSidebar:()=>s(!j)}),e.jsx(U,{userRole:p==null?void 0:p.role,isCollapsed:j,onToggle:()=>s(!j)}),e.jsx("main",{className:`pt-16 transition-all duration-state ${j?"lg:pl-16":"lg:pl-64"}`,children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-heading font-heading-bold text-2xl text-text-primary",children:"Syst√®me de gestion des notes"}),e.jsx("p",{className:"font-body font-body-normal text-text-secondary mt-1",children:"G√©rez les √©valuations et suivez les performances acad√©miques"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(je,{userRole:p==null?void 0:p.role}),e.jsx(ve,{})]})]}),e.jsx("div",{className:"bg-card border border-border rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(Z,{label:"Classe",options:F,value:g,onChange:C,className:"w-48"}),e.jsx(Z,{label:"Mati√®re",options:O,value:u,onChange:d,className:"w-48"}),e.jsx(X,{placeholder:"Rechercher un √©l√®ve...",value:h,onChange:i=>{var A;return x((A=i==null?void 0:i.target)==null?void 0:A.value)},className:"w-64"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center bg-muted rounded-lg p-1",children:_==null?void 0:_.map(i=>e.jsxs("button",{onClick:()=>o(i==null?void 0:i.value),className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-body font-body-normal transition-micro ${T===(i==null?void 0:i.value)?"bg-primary text-primary-foreground":"text-text-primary hover:bg-muted-foreground/10"}`,children:[e.jsx(y,{name:i==null?void 0:i.icon,size:16}),e.jsx("span",{className:"hidden sm:inline",children:i==null?void 0:i.label})]},i==null?void 0:i.value))}),T==="grades"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{variant:m==="cards"?"default":"outline",size:"sm",onClick:()=>G("cards"),children:e.jsx(y,{name:"Grid3X3",size:16})}),e.jsx(B,{variant:m==="table"?"default":"outline",size:"sm",onClick:()=>G("table"),children:e.jsx(y,{name:"List",size:16})})]})]})]})}),T==="grades"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(B,{variant:"default",onClick:()=>de(r==null?void 0:r[0]),children:[e.jsx(y,{name:"Edit3",size:16,className:"mr-2"}),"Saisie group√©e"]}),e.jsxs(B,{variant:"outline",children:[e.jsx(y,{name:"Download",size:16,className:"mr-2"}),"Exporter les notes"]}),e.jsxs(B,{variant:"outline",children:[e.jsx(y,{name:"Mail",size:16,className:"mr-2"}),"Notifier les parents"]})]}),m==="cards"?e.jsx("div",{className:"grid gap-6",children:z==null?void 0:z.map(i=>e.jsx(ge,{student:i,assignments:r,onGradeEdit:$,onViewDetails:ae},i==null?void 0:i.id))}):e.jsx("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left font-heading font-heading-semibold text-sm text-text-primary",children:"√âl√®ve"}),r==null?void 0:r.map(i=>e.jsx("th",{className:"px-4 py-3 text-center font-heading font-heading-semibold text-sm text-text-primary min-w-24",children:i==null?void 0:i.title},i==null?void 0:i.id)),e.jsx("th",{className:"px-6 py-3 text-center font-heading font-heading-semibold text-sm text-text-primary",children:"Moyenne"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:z==null?void 0:z.map(i=>{var A,M,V,J;return e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-heading font-heading-semibold text-xs text-primary-foreground",children:(J=(V=(M=(A=i==null?void 0:i.name)==null?void 0:A.split(" "))==null?void 0:M.map(L=>L==null?void 0:L[0]))==null?void 0:V.join(""))==null?void 0:J.substring(0,2)})}),e.jsx("span",{className:"font-body font-body-semibold text-sm text-card-foreground",children:i==null?void 0:i.name})]})}),r==null?void 0:r.map(L=>{var W,Y;return e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("button",{onClick:()=>$(i,L),className:"hover:bg-muted rounded px-2 py-1 transition-micro",children:L!=null&&L.currentGrade?e.jsxs("div",{children:[e.jsxs("div",{className:"font-heading font-heading-semibold text-sm text-primary",children:[(W=L==null?void 0:L.currentGrade)==null?void 0:W.score,"/",L==null?void 0:L.maxScore]}),e.jsxs("div",{className:"font-caption font-caption-normal text-xs text-muted-foreground",children:[(Y=L==null?void 0:L.currentGrade)==null?void 0:Y.percentage,"%"]})]}):e.jsx("div",{className:"text-muted-foreground",children:e.jsx(y,{name:"Plus",size:16})})})},L==null?void 0:L.id)}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"font-heading font-heading-semibold text-sm text-primary",children:"85.5%"})})]},i==null?void 0:i.id)})})]})})})]}),T==="assignments"&&e.jsx(we,{assignments:r,onAssignmentCreate:te,onAssignmentUpdate:ce,onAssignmentDelete:se}),T==="analytics"&&e.jsx(Se,{students:z,assignments:r})]})}),e.jsx(Ne,{isOpen:I,onClose:()=>N(!1),student:R,assignment:E,onSave:le}),e.jsx(ke,{isOpen:a,onClose:()=>k(!1),students:z,assignment:E,onBulkSave:oe})]})};export{Pe as default};
//# sourceMappingURL=index-DCtv8idZ.js.map
