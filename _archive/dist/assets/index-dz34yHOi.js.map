{"version":3,"file":"index-dz34yHOi.js","sources":["../../src/services/studentProductionDataService.js","../../src/hooks/useStudentDashboardData.js","../../src/pages/student-dashboard/components/ProfileCard.jsx","../../src/pages/student-dashboard/components/GradesPanel.jsx","../../src/pages/student-dashboard/components/AttendanceCalendar.jsx","../../src/pages/student-dashboard/components/BehaviorAssessment.jsx","../../src/pages/student-dashboard/components/NotificationsPanel.jsx","../../src/pages/student-dashboard/components/UpcomingAssignments.jsx","../../src/pages/student-dashboard/components/AchievementBadges.jsx","../../src/pages/student-dashboard/components/ParentInfoCard.jsx","../../src/pages/student-dashboard/index.jsx"],"sourcesContent":["/**\r\n * Service de donn√©es de production pour le dashboard √©tudiant\r\n * G√®re les requ√™tes Supabase pour r√©cup√©rer les vraies donn√©es\r\n */\r\n\r\nimport { supabase } from '../lib/supabase';\r\nimport { computeSubjectAverage, computeOverallAverage } from '../utils/grading';\r\n\r\nconst studentProductionDataService = {\r\n  /**\r\n   * Contexte de s√©curit√© (ID de l'√©tudiant connect√©)\r\n   */\r\n  currentStudentId: null,\r\n\r\n  /**\r\n   * D√©finir le contexte utilisateur √©tudiant\r\n   */\r\n  setUserContext(studentId) {\r\n    this.currentStudentId = studentId;\r\n    console.log('üîê Contexte √©tudiant d√©fini:', studentId);\r\n  },\r\n\r\n  /**\r\n   * V√©rifier que le contexte est d√©fini\r\n   */\r\n  ensureContext() {\r\n    if (!this.currentStudentId) {\r\n      throw new Error('Contexte utilisateur √©tudiant non d√©fini');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer le profil de l'√©tudiant\r\n   */\r\n  getStudentProfile: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üë§ R√©cup√©ration profil pour user_id:', studentProductionDataService.currentStudentId);\r\n\r\n      const { data, error } = await supabase\r\n        .from('students')\r\n        .select(`\r\n          id,\r\n          first_name,\r\n          last_name,\r\n          full_name,\r\n          matricule,\r\n          date_of_birth,\r\n          gender,\r\n          photo_url,\r\n          is_active,\r\n          user_id,\r\n          class:classes (\r\n            id,\r\n            name,\r\n            level,\r\n            section\r\n          ),\r\n          school:schools (\r\n            id,\r\n            name,\r\n            code,\r\n            type,\r\n            city,\r\n            country\r\n          )\r\n        `)\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .single();\r\n\r\n      console.log('üë§ R√©sultat requ√™te profil - data:', data);\r\n      console.log('üë§ R√©sultat requ√™te profil - error:', error);\r\n\r\n      if (error) throw error;\r\n\r\n      return { data, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration profil √©tudiant:', error);\r\n      return { data: null, error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les statistiques de l'√©tudiant\r\n   */\r\n  getStudentStats: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üìä R√©cup√©ration stats pour √©tudiant:', studentProductionDataService.currentStudentId);\r\n\r\n      // D'abord r√©cup√©rer l'ID de l'√©tudiant depuis user_id\r\n      const { data: studentInfo, error: studentError } = await supabase\r\n        .from('students')\r\n        .select('id, user_id')\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .single();\r\n\r\n      if (studentError || !studentInfo?.id) {\r\n        console.warn('‚ö†Ô∏è Aucun √©tudiant trouv√© pour cet user_id');\r\n        return {\r\n          data: {\r\n            averageGrade: '0.00',\r\n            attendanceRate: '100.0',\r\n            totalAbsences: 0,\r\n            justifiedAbsences: 0,\r\n            unjustifiedAbsences: 0,\r\n            lateArrivals: 0,\r\n            assignmentsDue: 0,\r\n            assignmentsCompleted: 0,\r\n            unreadNotifications: 0\r\n          },\r\n          error: null\r\n        };\r\n      }\r\n\r\n      // R√©cup√©rer moyenne des notes\r\n      const { data: gradesData, error: gradesError } = await supabase\r\n        .from('grades')\r\n        .select('grade')\r\n        .eq('student_id', studentInfo.id);\r\n\r\n      if (gradesError) throw gradesError;\r\n\r\n      // Calculer une moyenne robuste en tenant compte de max_grade et coefficients\r\n      let averageGrade = '0.00';\r\n      try {\r\n        if (gradesData && gradesData.length > 0) {\r\n          const subjMap = {};\r\n          gradesData.forEach(g => {\r\n            const name = g.subject || 'Mati√®re';\r\n            if (!subjMap[name]) subjMap[name] = { grades: [] };\r\n            subjMap[name].grades.push({ grade: g.grade, max_grade: g.max_grade, coefficient: g.coefficient });\r\n          });\r\n\r\n          const subjectsArray = Object.keys(subjMap).map(name => ({\r\n            subject: name,\r\n            average: computeSubjectAverage(subjMap[name].grades),\r\n            coefficient: (subjMap[name].grades.reduce((acc, x) => acc + (Number(x.coefficient) || 1), 0) / Math.max(1, subjMap[name].grades.length))\r\n          }));\r\n\r\n          const overall = computeOverallAverage(subjectsArray, 1);\r\n          averageGrade = overall ? overall.toFixed(2) : '0.00';\r\n        }\r\n      } catch (err) {\r\n        console.warn('‚ö†Ô∏è Erreur calcul moyenne:', err);\r\n        averageGrade = '0.00';\r\n      }\r\n\r\n      // R√©cup√©rer absences\r\n      const { data: absencesData, error: absencesError } = await supabase\r\n        .from('absences')\r\n        .select('*')\r\n        .eq('student_id', studentInfo.id);\r\n\r\n      if (absencesError) throw absencesError;\r\n\r\n      const totalAbsences = absencesData?.length || 0;\r\n      const justifiedAbsences = absencesData?.filter(a => a.justified).length || 0;\r\n      const unjustifiedAbsences = totalAbsences - justifiedAbsences;\r\n      const lateArrivals = absencesData?.filter(a => a.absence_type === 'late').length || 0;\r\n\r\n      // R√©cup√©rer devoirs\r\n      const { data: assignmentsData, error: assignmentsError } = await supabase\r\n        .from('assignments')\r\n        .select('status')\r\n        .eq('student_id', studentInfo.id);\r\n\r\n      if (assignmentsError) console.warn('Erreur assignments:', assignmentsError);\r\n\r\n      const assignmentsDue = assignmentsData?.filter(a => a.status === 'pending').length || 0;\r\n      const assignmentsCompleted = assignmentsData?.filter(a => a.status === 'completed').length || 0;\r\n\r\n      // R√©cup√©rer notifications non lues\r\n      let unreadNotifications = 0;\r\n      if (studentInfo?.user_id) {\r\n        const { data: notifData } = await supabase\r\n          .from('user_notifications')\r\n          .select('id')\r\n          .eq('user_id', studentInfo.user_id)\r\n          .eq('is_read', false);\r\n\r\n        unreadNotifications = notifData?.length || 0;\r\n      }\r\n\r\n      // Calculer taux de pr√©sence\r\n      const totalDays = 30; // Mois en cours\r\n      const attendanceRate = ((totalDays - totalAbsences) / totalDays * 100).toFixed(1);\r\n\r\n      return {\r\n        data: {\r\n          averageGrade,\r\n          attendanceRate,\r\n          totalAbsences,\r\n          justifiedAbsences,\r\n          unjustifiedAbsences,\r\n          lateArrivals,\r\n          assignmentsDue,\r\n          assignmentsCompleted,\r\n          unreadNotifications\r\n        },\r\n        error: null\r\n      };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration stats:', error);\r\n      return { data: null, error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les notes de l'√©tudiant\r\n   */\r\n  getStudentGrades: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üìù R√©cup√©ration notes pour √©tudiant:', studentProductionDataService.currentStudentId);\r\n\r\n      // R√©cup√©rer l'ID de l'√©tudiant depuis user_id\r\n      const { data: studentData, error: studentError } = await supabase\r\n        .from('students')\r\n        .select('id')\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .single();\r\n\r\n      if (studentError || !studentData?.id) {\r\n        console.warn('‚ö†Ô∏è Aucun √©tudiant trouv√© pour cet user_id');\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('grades')\r\n        .select(`\r\n          id,\r\n          grade,\r\n          max_grade,\r\n          coefficient,\r\n          grade_type,\r\n          date,\r\n          comment,\r\n          term,\r\n          subject:subjects (\r\n            id,\r\n            name,\r\n            code\r\n          ),\r\n          teacher:users!grades_teacher_id_fkey (\r\n            full_name\r\n          )\r\n        `)\r\n        .eq('student_id', studentData.id)\r\n        .order('date', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      // Transformer les donn√©es\r\n      const grades = data?.map(grade => ({\r\n        id: grade.id,\r\n        subject: grade.subject?.name || 'Mati√®re inconnue',\r\n        subject_code: grade.subject?.code || '',\r\n        grade: grade.grade,\r\n        max_grade: grade.max_grade || 20,\r\n        coefficient: grade.coefficient || 1,\r\n        grade_type: grade.grade_type || 'Contr√¥le',\r\n        date: grade.date,\r\n        teacher_name: grade.teacher?.full_name || 'Enseignant',\r\n        comment: grade.comment,\r\n        term: grade.term || 'Trimestre 1'\r\n      })) || [];\r\n\r\n      console.log(`‚úÖ ${grades.length} note(s) trouv√©e(s)`);\r\n      return { data: grades, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration notes:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les pr√©sences/absences de l'√©tudiant\r\n   */\r\n  getStudentAttendance: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üìÖ R√©cup√©ration pr√©sences pour √©tudiant:', studentProductionDataService.currentStudentId);\r\n\r\n      // R√©cup√©rer l'ID de l'√©tudiant depuis user_id\r\n      const { data: studentData, error: studentError } = await supabase\r\n        .from('students')\r\n        .select('id')\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .single();\r\n\r\n      if (studentError || !studentData?.id) {\r\n        console.warn('‚ö†Ô∏è Aucun √©tudiant trouv√© pour cet user_id');\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('absences')\r\n        .select('*')\r\n        .eq('student_id', studentData.id)\r\n        .order('absence_date', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      // Transformer les donn√©es\r\n      const attendance = data?.map(record => ({\r\n        id: record.id,\r\n        date: record.absence_date,\r\n        status: record.absence_type === 'late' ? 'late' : 'absent',\r\n        absence_type: record.absence_type,\r\n        justified: record.justified,\r\n        justification: record.justification,\r\n        created_at: record.created_at\r\n      })) || [];\r\n\r\n      console.log(`‚úÖ ${attendance.length} enregistrement(s) de pr√©sence trouv√©(s)`);\r\n      return { data: attendance, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration pr√©sences:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les devoirs/assignments de l'√©tudiant\r\n   */\r\n  getStudentAssignments: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üìö R√©cup√©ration devoirs pour √©tudiant:', studentProductionDataService.currentStudentId);\r\n\r\n      // R√©cup√©rer l'ID de l'√©tudiant depuis user_id\r\n      const { data: studentData, error: studentError } = await supabase\r\n        .from('students')\r\n        .select('id')\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .single();\r\n\r\n      if (studentError || !studentData?.id) {\r\n        console.warn('‚ö†Ô∏è Aucun √©tudiant trouv√© pour cet user_id');\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      // V√©rifier si la table assignments existe\r\n      const { data, error } = await supabase\r\n        .from('assignments')\r\n        .select(`\r\n          id,\r\n          title,\r\n          description,\r\n          due_date,\r\n          status,\r\n          priority,\r\n          subject:subjects (\r\n            name,\r\n            code\r\n          )\r\n        `)\r\n        .eq('student_id', studentData.id)\r\n        .order('due_date', { ascending: true });\r\n\r\n      if (error) {\r\n        console.warn('‚ö†Ô∏è Table assignments non disponible:', error);\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      const assignments = data?.map(assign => ({\r\n        id: assign.id,\r\n        title: assign.title,\r\n        subject: assign.subject?.name || 'Mati√®re',\r\n        subject_code: assign.subject?.code || '',\r\n        description: assign.description,\r\n        due_date: assign.due_date,\r\n        status: assign.status,\r\n        priority: assign.priority || 'medium'\r\n      })) || [];\r\n\r\n      console.log(`‚úÖ ${assignments.length} devoir(s) trouv√©(s)`);\r\n      return { data: assignments, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration devoirs:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les notifications de l'√©tudiant\r\n   */\r\n  getStudentNotifications: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üîî R√©cup√©ration notifications pour √©tudiant:', studentProductionDataService.currentStudentId);\r\n\r\n      const { data, error } = await supabase\r\n        .from('user_notifications')\r\n        .select(`\r\n          id,\r\n          title,\r\n          message,\r\n          type,\r\n          priority,\r\n          is_read,\r\n          metadata,\r\n          created_at,\r\n          school:schools (\r\n            name\r\n          )\r\n        `)\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .order('created_at', { ascending: false })\r\n        .limit(50);\r\n\r\n      if (error) throw error;\r\n\r\n      // Transformer les donn√©es\r\n      const notifications = data?.map(notif => ({\r\n        id: notif.id,\r\n        title: notif.title,\r\n        message: notif.message,\r\n        type: notif.type,\r\n        priority: notif.priority || 'medium',\r\n        school_name: notif.school?.name || '',\r\n        created_at: notif.created_at,\r\n        is_read: notif.is_read || false,\r\n        metadata: notif.metadata || {}\r\n      })) || [];\r\n\r\n      console.log(`‚úÖ ${notifications.length} notification(s) trouv√©e(s)`);\r\n      return { data: notifications, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration notifications:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les badges/achievements de l'√©tudiant\r\n   */\r\n  getStudentAchievements: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üèÜ R√©cup√©ration achievements pour √©tudiant:', studentProductionDataService.currentStudentId);\r\n\r\n      // R√©cup√©rer l'ID de l'√©tudiant depuis user_id\r\n      const { data: studentData, error: studentError } = await supabase\r\n        .from('students')\r\n        .select('id')\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .single();\r\n\r\n      if (studentError || !studentData?.id) {\r\n        console.warn('‚ö†Ô∏è Aucun √©tudiant trouv√© pour cet user_id');\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      // V√©rifier si la table achievements existe\r\n      const { data, error } = await supabase\r\n        .from('achievements')\r\n        .select('*')\r\n        .eq('student_id', studentData.id)\r\n        .order('earned_date', { ascending: false });\r\n\r\n      if (error) {\r\n        console.warn('‚ö†Ô∏è Table achievements non disponible:', error);\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      console.log(`‚úÖ ${data?.length || 0} achievement(s) trouv√©(s)`);\r\n      return { data: data || [], error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration achievements:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer le comportement/discipline de l'√©tudiant\r\n   */\r\n  getStudentBehavior: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üéØ R√©cup√©ration comportement pour √©tudiant:', studentProductionDataService.currentStudentId);\r\n\r\n      // R√©cup√©rer l'ID de l'√©tudiant depuis user_id\r\n      const { data: studentData, error: studentError } = await supabase\r\n        .from('students')\r\n        .select('id')\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .single();\r\n\r\n      if (studentError || !studentData?.id) {\r\n        console.warn('‚ö†Ô∏è Aucun √©tudiant trouv√© pour cet user_id');\r\n        return {\r\n          data: {\r\n            overall_score: 0,\r\n            participation: 0,\r\n            discipline: 0,\r\n            respect: 0,\r\n            homework: 0,\r\n            comments: [],\r\n            positive_notes: []\r\n          },\r\n          error: null\r\n        };\r\n      }\r\n\r\n      // V√©rifier si la table behavior existe\r\n      const { data, error } = await supabase\r\n        .from('behavior')\r\n        .select('*')\r\n        .eq('student_id', studentData.id)\r\n        .single();\r\n\r\n      if (error) {\r\n        console.warn('‚ö†Ô∏è Table behavior non disponible:', error);\r\n        return {\r\n          data: {\r\n            overall_score: 0,\r\n            participation: 0,\r\n            discipline: 0,\r\n            respect: 0,\r\n            homework: 0,\r\n            incidents: [],\r\n            positive_notes: [],\r\n            comments: []\r\n          },\r\n          error: null\r\n        };\r\n      }\r\n\r\n      return { data: data || {}, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration comportement:', error);\r\n      return { data: null, error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer l'emploi du temps de l'√©tudiant\r\n   */\r\n  getStudentSchedule: async (studentId) => {\r\n    try {\r\n      if (studentId) {\r\n        studentProductionDataService.setUserContext(studentId);\r\n      }\r\n      studentProductionDataService.ensureContext();\r\n\r\n      console.log('üìÜ R√©cup√©ration emploi du temps pour √©tudiant:', studentProductionDataService.currentStudentId);\r\n\r\n      // R√©cup√©rer la classe de l'√©tudiant\r\n      const { data: studentData, error: studentError } = await supabase\r\n        .from('students')\r\n        .select('class_id')\r\n        .eq('user_id', studentProductionDataService.currentStudentId)\r\n        .single();\r\n\r\n      if (studentError || !studentData?.class_id) {\r\n        console.warn('‚ö†Ô∏è Classe non trouv√©e pour cet √©tudiant');\r\n        return { data: null, error: null };\r\n      }\r\n\r\n      // V√©rifier si la table schedule existe\r\n      const { data, error } = await supabase\r\n        .from('schedule')\r\n        .select('*')\r\n        .eq('class_id', studentData.class_id);\r\n\r\n      if (error) {\r\n        console.warn('‚ö†Ô∏è Table schedule non disponible:', error);\r\n        return { data: null, error: null };\r\n      }\r\n\r\n      return { data: data || null, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration emploi du temps:', error);\r\n      return { data: null, error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Marquer une notification comme lue\r\n   */\r\n  markNotificationAsRead: async (notificationId) => {\r\n    try {\r\n      studentProductionDataService.ensureContext();\r\n\r\n      const { data, error } = await supabase\r\n        .from('user_notifications')\r\n        .update({ is_read: true, read_at: new Date().toISOString() })\r\n        .eq('id', notificationId)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      return { data, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur marquage notification:', error);\r\n      return { data: null, error };\r\n    }\r\n  }\r\n};\r\n\r\nexport default studentProductionDataService;\r\n","/**\r\n * Hook unifi√© pour g√©rer les donn√©es du dashboard √©tudiant\r\n * R√©cup√®re les donn√©es depuis Supabase uniquement\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport studentProductionDataService from '../services/studentProductionDataService';\r\nimport { computeSubjectAverage, computeOverallAverage } from '../utils/grading';\r\n\r\nexport const useStudentDashboardData = (studentId) => {\r\n  // √âtats pour les donn√©es\r\n  const [studentProfile, setStudentProfile] = useState(null);\r\n  const [stats, setStats] = useState(null);\r\n  const [grades, setGrades] = useState([]);\r\n  const [attendance, setAttendance] = useState([]);\r\n  const [assignments, setAssignments] = useState([]);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [achievements, setAchievements] = useState([]);\r\n  const [behavior, setBehavior] = useState(null);\r\n  const [schedule, setSchedule] = useState(null);\r\n\r\n  // √âtats de chargement et d'erreur\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  /**\r\n   * Charger toutes les donn√©es du dashboard\r\n   */\r\n  const loadDashboardData = async () => {\r\n    if (!studentId) {\r\n      setError('ID √©tudiant non fourni');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // R√©initialiser toutes les donn√©es avant de charger les nouvelles\r\n      setStudentProfile(null);\r\n      setStats(null);\r\n      setGrades([]);\r\n      setAttendance([]);\r\n      setAssignments([]);\r\n      setNotifications([]);\r\n      setAchievements([]);\r\n      setBehavior(null);\r\n      setSchedule(null);\r\n\r\n      console.log(`üìö Chargement donn√©es √©tudiant depuis Supabase...`);\r\n      console.log(`üë§ ID √©tudiant:`, studentId);\r\n\r\n      // D√©finir le contexte utilisateur\r\n      studentProductionDataService.setUserContext(studentId);\r\n\r\n      // Charger toutes les donn√©es en parall√®le\r\n      const [\r\n        profileResult,\r\n        statsResult,\r\n        gradesResult,\r\n        attendanceResult,\r\n        assignmentsResult,\r\n        notificationsResult,\r\n        achievementsResult,\r\n        behaviorResult,\r\n        scheduleResult\r\n      ] = await Promise.all([\r\n        studentProductionDataService.getStudentProfile(studentId),\r\n        studentProductionDataService.getStudentStats(studentId),\r\n        studentProductionDataService.getStudentGrades(studentId),\r\n        studentProductionDataService.getStudentAttendance(studentId),\r\n        studentProductionDataService.getStudentAssignments(studentId),\r\n        studentProductionDataService.getStudentNotifications(studentId),\r\n        studentProductionDataService.getStudentAchievements(studentId),\r\n        studentProductionDataService.getStudentBehavior(studentId),\r\n        studentProductionDataService.getStudentSchedule(studentId)\r\n      ]);\r\n\r\n      console.log('üìã Profile Result:', profileResult);\r\n      console.log('üìä Stats Result:', statsResult);\r\n      console.log('üìù Grades Result:', gradesResult);\r\n\r\n      // Mettre √† jour les √©tats avec les r√©sultats\r\n      setStudentProfile(profileResult.data);\r\n      setStats(statsResult.data);\r\n      setGrades(gradesResult.data || []);\r\n      setAttendance(attendanceResult.data || []);\r\n      setAssignments(assignmentsResult.data || []);\r\n      setNotifications(notificationsResult.data || []);\r\n      setAchievements(achievementsResult.data || []);\r\n      setBehavior(behaviorResult.data);\r\n      setSchedule(scheduleResult.data);\r\n\r\n      // Calculer une moyenne d√©riv√©e plus pr√©cise √† partir des notes r√©cup√©r√©es\r\n      try {\r\n        const rawGrades = gradesResult.data || [];\r\n        const schoolType = profileResult?.data?.school?.type;\r\n\r\n        // Grouper par mati√®re\r\n        const subjMap = {};\r\n        rawGrades.forEach(g => {\r\n          const name = g.subject || 'Mati√®re inconnue';\r\n          if (!subjMap[name]) subjMap[name] = { grades: [] };\r\n          subjMap[name].grades.push(g);\r\n        });\r\n\r\n        const subjectsArray = Object.keys(subjMap).map(name => ({\r\n          subject: name,\r\n          average: computeSubjectAverage(subjMap[name].grades, { schoolType }),\r\n          coefficient: (subjMap[name].grades.reduce((acc, x) => acc + (Number(x.coefficient) || 1), 0) / Math.max(1, subjMap[name].grades.length))\r\n        }));\r\n\r\n        const derivedAverage = computeOverallAverage(subjectsArray, 1);\r\n        setStats(prev => ({ ...(prev || {}), averageGrade: derivedAverage }));\r\n      } catch (err) {\r\n        console.warn('‚ö†Ô∏è Impossible de calculer moyenne d√©riv√©e:', err);\r\n      }\r\n\r\n      // V√©rifier s'il y a des erreurs\r\n      const hasError = [\r\n        profileResult,\r\n        statsResult,\r\n        gradesResult,\r\n        attendanceResult,\r\n        assignmentsResult,\r\n        notificationsResult,\r\n        achievementsResult,\r\n        behaviorResult,\r\n        scheduleResult\r\n      ].some(result => result.error);\r\n\r\n      if (hasError) {\r\n        console.warn('‚ö†Ô∏è Certaines donn√©es n\\'ont pas pu √™tre charg√©es');\r\n      }\r\n\r\n      console.log(`‚úÖ Donn√©es √©tudiant charg√©es avec succ√®s`);\r\n    } catch (err) {\r\n      console.error('‚ùå Erreur chargement donn√©es dashboard √©tudiant:', err);\r\n      setError(err.message || 'Erreur de chargement des donn√©es');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Marquer une notification comme lue\r\n   */\r\n  const markNotificationAsRead = async (notificationId) => {\r\n    try {\r\n      await studentProductionDataService.markNotificationAsRead(notificationId);\r\n\r\n      // Mettre √† jour l'√©tat local\r\n      setNotifications(prev =>\r\n        prev.map(notif =>\r\n          notif.id === notificationId\r\n            ? { ...notif, read: true }\r\n            : notif\r\n        )\r\n      );\r\n    } catch (err) {\r\n      console.error('‚ùå Erreur marquage notification:', err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Rafra√Æchir toutes les donn√©es\r\n   */\r\n  const refresh = () => {\r\n    loadDashboardData();\r\n  };\r\n\r\n  // Charger les donn√©es au montage et quand studentId change\r\n  useEffect(() => {\r\n    if (studentId) {\r\n      loadDashboardData();\r\n    }\r\n  }, [studentId]);\r\n\r\n  return {\r\n    // Donn√©es\r\n    studentProfile,\r\n    stats,\r\n    grades,\r\n    attendance,\r\n    assignments,\r\n    notifications,\r\n    achievements,\r\n    behavior,\r\n    schedule,\r\n\r\n    // √âtat\r\n    loading,\r\n    error,\r\n\r\n    // Actions\r\n    markNotificationAsRead,\r\n    refresh,\r\n    reload: refresh\r\n  };\r\n};\r\n\r\nexport default useStudentDashboardData;\r\n","import React, { useState } from 'react';\r\nimport Image from '../../../components/AppImage';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ProfileCard = ({ student, onPhotoUpdate }) => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [uploadingPhoto, setUploadingPhoto] = useState(false);\r\n\r\n  const handlePhotoUpload = async (event) => {\r\n    const file = event?.target?.files?.[0];\r\n    if (!file) return;\r\n\r\n    setUploadingPhoto(true);\r\n    // Simulate photo upload\r\n    setTimeout(() => {\r\n      const newPhotoUrl = URL.createObjectURL(file);\r\n      onPhotoUpdate(newPhotoUrl);\r\n      setUploadingPhoto(false);\r\n    }, 2000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl border-2 border-gray-200 shadow-lg p-6 hover:shadow-xl transition-shadow\">\r\n      <div className=\"flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6\">\r\n        {/* Profile Photo */}\r\n        <div className=\"relative group\">\r\n          <div className=\"w-28 h-28 rounded-2xl overflow-hidden bg-gradient-to-br from-blue-100 to-indigo-100 border-4 border-blue-200 shadow-lg group-hover:shadow-xl transition-shadow\">\r\n            <Image\r\n              src={student?.photo}\r\n              alt={`Photo de ${student?.name}`}\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            className=\"absolute -bottom-2 -right-2 w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 text-white rounded-xl shadow-lg hover:from-blue-700 hover:to-indigo-700 hover:scale-110 transition-all\"\r\n            onClick={() => document.getElementById('photo-upload')?.click()}\r\n            disabled={uploadingPhoto}\r\n          >\r\n            {uploadingPhoto ? (\r\n              <Icon name=\"Loader2\" size={18} className=\"animate-spin\" />\r\n            ) : (\r\n              <Icon name=\"Camera\" size={18} />\r\n            )}\r\n          </Button>\r\n          <input\r\n            id=\"photo-upload\"\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            className=\"hidden\"\r\n            onChange={handlePhotoUpload}\r\n          />\r\n        </div>\r\n\r\n        {/* Student Info */}\r\n        <div className=\"flex-1 text-center sm:text-left\">\r\n          <h2 className=\"font-heading font-heading-bold text-2xl text-gray-900 mb-3\">\r\n            {student?.name}\r\n          </h2>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <p className=\"flex items-center justify-center sm:justify-start space-x-2 text-gray-600\">\r\n              <div className=\"w-7 h-7 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"Hash\" size={14} className=\"text-blue-600\" />\r\n              </div>\r\n              <span className=\"font-medium\">ID √âtudiant: <span className=\"text-gray-900 font-semibold\">{student?.studentId}</span></span>\r\n            </p>\r\n            <p className=\"flex items-center justify-center sm:justify-start space-x-2 text-gray-600\">\r\n              <div className=\"w-7 h-7 bg-green-100 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"GraduationCap\" size={14} className=\"text-green-600\" />\r\n              </div>\r\n              <span className=\"font-medium\">Classe: <span className=\"text-gray-900 font-semibold\">{student?.class}</span></span>\r\n            </p>\r\n            <p className=\"flex items-center justify-center sm:justify-start space-x-2 text-gray-600\">\r\n              <div className=\"w-7 h-7 bg-purple-100 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"Calendar\" size={14} className=\"text-purple-600\" />\r\n              </div>\r\n              <span className=\"font-medium\">Ann√©e: <span className=\"text-gray-900 font-semibold\">{student?.academicYear}</span></span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quick Stats - Modernis√©es */}\r\n        <div className=\"grid grid-cols-3 gap-3 text-center\">\r\n          <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-4 hover:shadow-md transition-shadow\">\r\n            <div className=\"w-10 h-10 bg-gradient-to-br from-green-600 to-emerald-600 rounded-lg flex items-center justify-center mx-auto mb-2 shadow-md\">\r\n              <Icon name=\"Award\" size={20} className=\"text-white\" />\r\n            </div>\r\n            <div className=\"font-heading font-heading-bold text-xl text-green-900\">\r\n              {student?.stats?.averageGrade}\r\n            </div>\r\n            <div className=\"font-caption font-caption-normal text-xs text-green-700 font-medium\">\r\n              Moyenne\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-4 hover:shadow-md transition-shadow\">\r\n            <div className=\"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center mx-auto mb-2 shadow-md\">\r\n              <Icon name=\"CalendarCheck\" size={20} className=\"text-white\" />\r\n            </div>\r\n            <div className=\"font-heading font-heading-bold text-xl text-blue-900\">\r\n              {student?.stats?.attendanceRate}%\r\n            </div>\r\n            <div className=\"font-caption font-caption-normal text-xs text-blue-700 font-medium\">\r\n              Pr√©sence\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200 rounded-xl p-4 hover:shadow-md transition-shadow\">\r\n            <div className=\"w-10 h-10 bg-gradient-to-br from-orange-600 to-amber-600 rounded-lg flex items-center justify-center mx-auto mb-2 shadow-md\">\r\n              <Icon name=\"BookOpen\" size={20} className=\"text-white\" />\r\n            </div>\r\n            <div className=\"font-heading font-heading-bold text-xl text-orange-900\">\r\n              {student?.stats?.assignmentsDue}\r\n            </div>\r\n            <div className=\"font-caption font-caption-normal text-xs text-orange-700 font-medium\">\r\n              Devoirs\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileCard;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst GradesPanel = ({ grades }) => {\r\n  const [expandedSubjects, setExpandedSubjects] = useState(new Set());\r\n\r\n  const toggleSubject = (subjectId) => {\r\n    const newExpanded = new Set(expandedSubjects);\r\n    if (newExpanded?.has(subjectId)) {\r\n      newExpanded?.delete(subjectId);\r\n    } else {\r\n      newExpanded?.add(subjectId);\r\n    }\r\n    setExpandedSubjects(newExpanded);\r\n  };\r\n\r\n  const getGradeColor = (grade) => {\r\n    if (grade >= 16) return 'text-success';\r\n    if (grade >= 12) return 'text-primary';\r\n    if (grade >= 10) return 'text-warning';\r\n    return 'text-error';\r\n  };\r\n\r\n  const getGradeBg = (grade) => {\r\n    if (grade >= 16) return 'bg-success/10';\r\n    if (grade >= 12) return 'bg-primary/10';\r\n    if (grade >= 10) return 'bg-warning/10';\r\n    return 'bg-error/10';\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl border-2 border-gray-200 shadow-lg hover:shadow-xl transition-shadow\">\r\n      <div className=\"p-6 border-b-2 border-gray-100\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"w-10 h-10 bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl flex items-center justify-center mr-3 shadow-md\">\r\n              <Icon name=\"Award\" size={20} className=\"text-white\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                Mes Notes\r\n              </h3>\r\n              <p className=\"text-xs text-gray-500\">R√©sultats par mati√®re</p>\r\n            </div>\r\n          </div>\r\n          <Button variant=\"outline\" size=\"sm\" className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 hover:border-blue-400 text-blue-700 hover:shadow-md transition-all\">\r\n            <Icon name=\"Download\" size={16} className=\"mr-2\" />\r\n            Exporter\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-6 space-y-3\">\r\n        {grades?.map((subject) => (\r\n          <div key={subject?.id} className=\"border-2 border-gray-200 rounded-xl overflow-hidden hover:border-gray-300 transition-all hover:shadow-md\">\r\n            <button\r\n              onClick={() => toggleSubject(subject?.id)}\r\n              className=\"w-full p-4 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-gray-100 hover:to-gray-200 transition-all flex items-center justify-between\"\r\n            >\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className={`w-14 h-14 rounded-xl ${getGradeBg(subject?.average)} flex items-center justify-center shadow-md border-2 ${\r\n                  subject?.average >= 16 ? 'border-green-300' :\r\n                  subject?.average >= 12 ? 'border-blue-300' :\r\n                  subject?.average >= 10 ? 'border-orange-300' : 'border-red-300'\r\n                }`}>\r\n                  <span className={`font-heading font-heading-bold text-xl ${getGradeColor(subject?.average)}`}>\r\n                    {subject?.average}\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-left\">\r\n                  <h4 className=\"font-body font-body-semibold text-gray-900 text-base\">\r\n                    {subject?.name}\r\n                  </h4>\r\n                  <p className=\"font-caption font-caption-normal text-sm text-gray-500 flex items-center gap-2 mt-1\">\r\n                    <span className=\"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium\">\r\n                      {subject?.assignments?.length} √©vals\r\n                    </span>\r\n                    <span className=\"text-gray-400\">‚Ä¢</span>\r\n                    <span className=\"text-xs\">Coeff. {subject?.coefficient}</span>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Icon \r\n                name={expandedSubjects?.has(subject?.id) ? \"ChevronUp\" : \"ChevronDown\"} \r\n                size={20} \r\n                className=\"text-gray-400\"\r\n              />\r\n            </button>\r\n\r\n            {expandedSubjects?.has(subject?.id) && (\r\n              <div className=\"p-4 bg-white space-y-2\">\r\n                {subject?.assignments?.map((assignment) => (\r\n                  <div key={assignment?.id} className=\"flex items-center justify-between p-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:shadow-sm transition-all\">\r\n                    <div className=\"flex-1\">\r\n                      <h5 className=\"font-body font-body-semibold text-sm text-gray-900\">\r\n                        {assignment?.name}\r\n                      </h5>\r\n                      <div className=\"flex items-center space-x-3 mt-1.5\">\r\n                        <span className=\"font-caption font-caption-normal text-xs text-gray-500 flex items-center gap-1\">\r\n                          <Icon name=\"Calendar\" size={12} />\r\n                          {assignment?.date}\r\n                        </span>\r\n                        <span className={`font-caption font-caption-semibold text-xs px-2.5 py-1 rounded-full ${\r\n                          assignment?.type === 'Contr√¥le' ? 'bg-red-100 text-red-700 border border-red-200' :\r\n                          assignment?.type === 'Devoir'? 'bg-orange-100 text-orange-700 border border-orange-200' : 'bg-blue-100 text-blue-700 border border-blue-200'\r\n                        }`}>\r\n                          {assignment?.type}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <div className={`font-heading font-heading-bold text-xl ${getGradeColor(assignment?.grade)}`}>\r\n                        {assignment?.grade}<span className=\"text-sm text-gray-400\">/20</span>\r\n                      </div>\r\n                      <div className=\"font-caption font-caption-normal text-xs text-gray-500 mt-0.5\">\r\n                        Coeff. {assignment?.coefficient}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                \r\n                {subject?.feedback && (\r\n                  <div className=\"mt-4 p-3 bg-accent/10 rounded-lg\">\r\n                    <div className=\"flex items-start space-x-2\">\r\n                      <Icon name=\"MessageSquare\" size={16} className=\"text-accent-foreground mt-1\" />\r\n                      <div>\r\n                        <h6 className=\"font-body font-body-semibold text-sm text-accent-foreground\">\r\n                          Commentaire du professeur\r\n                        </h6>\r\n                        <p className=\"font-body font-body-normal text-sm text-card-foreground mt-1\">\r\n                          {subject?.feedback}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GradesPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst AttendanceCalendar = ({ attendanceData }) => {\r\n  const [currentMonth, setCurrentMonth] = useState(new Date());\r\n\r\n  const monthNames = [\r\n    'Janvier', 'F√©vrier', 'Mars', 'Avril', 'Mai', 'Juin',\r\n    'Juillet', 'Ao√ªt', 'Septembre', 'Octobre', 'Novembre', 'D√©cembre'\r\n  ];\r\n\r\n  const dayNames = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];\r\n\r\n  const getDaysInMonth = (date) => {\r\n    const year = date?.getFullYear();\r\n    const month = date?.getMonth();\r\n    const firstDay = new Date(year, month, 1);\r\n    const lastDay = new Date(year, month + 1, 0);\r\n    const daysInMonth = lastDay?.getDate();\r\n    const startingDayOfWeek = firstDay?.getDay();\r\n\r\n    const days = [];\r\n    \r\n    // Add empty cells for days before the first day of the month\r\n    for (let i = 0; i < startingDayOfWeek; i++) {\r\n      days?.push(null);\r\n    }\r\n    \r\n    // Add days of the month\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      days?.push(day);\r\n    }\r\n    \r\n    return days;\r\n  };\r\n\r\n  const getAttendanceStatus = (day) => {\r\n    if (!day) return null;\r\n    const dateKey = `${currentMonth?.getFullYear()}-${(currentMonth?.getMonth() + 1)?.toString()?.padStart(2, '0')}-${day?.toString()?.padStart(2, '0')}`;\r\n    return attendanceData?.[dateKey] || null;\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'present':\r\n        return 'bg-success text-success-foreground';\r\n      case 'absent':\r\n        return 'bg-error text-error-foreground';\r\n      case 'late':\r\n        return 'bg-warning text-warning-foreground';\r\n      case 'excused':\r\n        return 'bg-primary text-primary-foreground';\r\n      default:\r\n        return 'bg-muted text-muted-foreground hover:bg-muted/80';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'present':\r\n        return 'Check';\r\n      case 'absent':\r\n        return 'X';\r\n      case 'late':\r\n        return 'Clock';\r\n      case 'excused':\r\n        return 'FileCheck';\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const navigateMonth = (direction) => {\r\n    setCurrentMonth(prev => {\r\n      const newDate = new Date(prev);\r\n      newDate?.setMonth(prev?.getMonth() + direction);\r\n      return newDate;\r\n    });\r\n  };\r\n\r\n  const days = getDaysInMonth(currentMonth);\r\n\r\n  const attendanceStats = {\r\n    present: Object.values(attendanceData)?.filter(status => status === 'present')?.length,\r\n    absent: Object.values(attendanceData)?.filter(status => status === 'absent')?.length,\r\n    late: Object.values(attendanceData)?.filter(status => status === 'late')?.length,\r\n    excused: Object.values(attendanceData)?.filter(status => status === 'excused')?.length\r\n  };\r\n\r\n  const totalDays = Object.keys(attendanceData)?.length;\r\n  const attendanceRate = totalDays > 0 ? Math.round((attendanceStats?.present / totalDays) * 100) : 0;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-lg border-2 border-cyan-200 overflow-hidden\">\r\n      <div className=\"bg-gradient-to-r from-cyan-50 to-teal-50 p-6 border-b-2 border-cyan-100\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-cyan-600 to-teal-600 shadow-lg\">\r\n              <Icon name=\"Calendar\" size={22} className=\"text-white\" />\r\n            </div>\r\n            <h3 className=\"font-display font-bold text-xl bg-gradient-to-r from-cyan-700 to-teal-700 bg-clip-text text-transparent\">\r\n              Pr√©sences\r\n            </h3>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <button \r\n              onClick={() => navigateMonth(-1)}\r\n              className=\"p-2 rounded-xl bg-white border-2 border-cyan-200 text-cyan-700 hover:bg-cyan-50 hover:border-cyan-300 transition-all shadow-sm hover:shadow-md\"\r\n            >\r\n              <Icon name=\"ChevronLeft\" size={18} />\r\n            </button>\r\n            <span className=\"font-body-bold text-sm text-gray-800 min-w-[120px] text-center px-3\">\r\n              {monthNames?.[currentMonth?.getMonth()]} {currentMonth?.getFullYear()}\r\n            </span>\r\n            <button \r\n              onClick={() => navigateMonth(1)}\r\n              className=\"p-2 rounded-xl bg-white border-2 border-cyan-200 text-cyan-700 hover:bg-cyan-50 hover:border-cyan-300 transition-all shadow-sm hover:shadow-md\"\r\n            >\r\n              <Icon name=\"ChevronRight\" size={18} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Attendance Stats - Modernis√© */}\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6\">\r\n          <div className=\"bg-white border-2 border-green-200 rounded-xl p-4 text-center shadow-md hover:shadow-lg transition-all hover:scale-105\">\r\n            <div className=\"text-2xl font-display font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent\">\r\n              {attendanceStats?.present}\r\n            </div>\r\n            <div className=\"font-body-medium text-xs text-gray-600 mt-1\">\r\n              Pr√©sent\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-white border-2 border-red-200 rounded-xl p-4 text-center shadow-md hover:shadow-lg transition-all hover:scale-105\">\r\n            <div className=\"text-2xl font-display font-bold bg-gradient-to-r from-red-600 to-rose-600 bg-clip-text text-transparent\">\r\n              {attendanceStats?.absent}\r\n            </div>\r\n            <div className=\"font-body-medium text-xs text-gray-600 mt-1\">\r\n              Absent\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-white border-2 border-yellow-200 rounded-xl p-4 text-center shadow-md hover:shadow-lg transition-all hover:scale-105\">\r\n            <div className=\"text-2xl font-display font-bold bg-gradient-to-r from-yellow-600 to-amber-600 bg-clip-text text-transparent\">\r\n              {attendanceStats?.late}\r\n            </div>\r\n            <div className=\"font-body-medium text-xs text-gray-600 mt-1\">\r\n              Retard\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-white border-2 border-blue-200 rounded-xl p-4 text-center shadow-md hover:shadow-lg transition-all hover:scale-105\">\r\n            <div className=\"text-2xl font-display font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent\">\r\n              {attendanceRate}%\r\n            </div>\r\n            <div className=\"font-body-medium text-xs text-gray-600 mt-1\">\r\n              Taux\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-6\">\r\n        {/* Calendar Header */}\r\n        <div className=\"grid grid-cols-7 gap-1 mb-3\">\r\n          {dayNames?.map(day => (\r\n            <div key={day} className=\"p-2 text-center\">\r\n              <span className=\"font-body-bold text-xs text-gray-700\">\r\n                {day}\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Calendar Grid */}\r\n        <div className=\"grid grid-cols-7 gap-1\">\r\n          {days?.map((day, index) => {\r\n            const status = getAttendanceStatus(day);\r\n            const statusIcon = getStatusIcon(status);\r\n            \r\n            return (\r\n              <div\r\n                key={index}\r\n                className={`aspect-square p-1 rounded-lg flex items-center justify-center relative transition-micro ${\r\n                  day ? getStatusColor(status) : ''\r\n                }`}\r\n              >\r\n                {day && (\r\n                  <>\r\n                    <span className=\"font-caption font-caption-normal text-xs\">\r\n                      {day}\r\n                    </span>\r\n                    {statusIcon && (\r\n                      <Icon \r\n                        name={statusIcon} \r\n                        size={8} \r\n                        className=\"absolute top-0.5 right-0.5\" \r\n                      />\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Legend */}\r\n        <div className=\"mt-4 flex flex-wrap gap-3 justify-center\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full\"></div>\r\n            <span className=\"font-caption font-caption-normal text-xs text-muted-foreground\">Pr√©sent</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-error rounded-full\"></div>\r\n            <span className=\"font-caption font-caption-normal text-xs text-muted-foreground\">Absent</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-warning rounded-full\"></div>\r\n            <span className=\"font-caption font-caption-normal text-xs text-muted-foreground\">Retard</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-primary rounded-full\"></div>\r\n            <span className=\"font-caption font-caption-normal text-xs text-muted-foreground\">Excus√©</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceCalendar;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\n\r\nconst BehaviorAssessment = ({ behaviorData }) => {\r\n  const [selectedPeriod, setSelectedPeriod] = useState('current');\r\n\r\n  const periods = [\r\n    { value: 'current', label: 'Trimestre actuel' },\r\n    { value: 'previous', label: 'Trimestre pr√©c√©dent' },\r\n    { value: 'year', label: 'Ann√©e compl√®te' }\r\n  ];\r\n\r\n  const getBehaviorIcon = (type) => {\r\n    switch (type) {\r\n      case 'positive':\r\n        return 'ThumbsUp';\r\n      case 'improvement':\r\n        return 'TrendingUp';\r\n      case 'concern':\r\n        return 'AlertTriangle';\r\n      case 'achievement':\r\n        return 'Award';\r\n      default:\r\n        return 'MessageSquare';\r\n    }\r\n  };\r\n\r\n  const getBehaviorColor = (type) => {\r\n    switch (type) {\r\n      case 'positive':\r\n        return 'text-success bg-success/10';\r\n      case 'improvement':\r\n        return 'text-primary bg-primary/10';\r\n      case 'concern':\r\n        return 'text-warning bg-warning/10';\r\n      case 'achievement':\r\n        return 'text-accent-foreground bg-accent/10';\r\n      default:\r\n        return 'text-muted-foreground bg-muted/10';\r\n    }\r\n  };\r\n\r\n  const currentData = behaviorData?.[selectedPeriod] || behaviorData?.current;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-lg border-2 border-purple-200 overflow-hidden\">\r\n      <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 p-6 border-b-2 border-purple-100\">\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-purple-600 to-pink-600 shadow-lg\">\r\n              <Icon name=\"Heart\" size={22} className=\"text-white\" />\r\n            </div>\r\n            <h3 className=\"font-display font-bold text-xl bg-gradient-to-r from-purple-700 to-pink-700 bg-clip-text text-transparent\">\r\n              √âvaluation Comportementale\r\n            </h3>\r\n          </div>\r\n          <select\r\n            value={selectedPeriod}\r\n            onChange={(e) => setSelectedPeriod(e?.target?.value)}\r\n            className=\"px-4 py-2.5 border-2 border-purple-200 rounded-xl bg-white text-gray-800 text-sm font-body-medium focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 shadow-md\"\r\n          >\r\n            {periods?.map(period => (\r\n              <option key={period?.value} value={period?.value}>\r\n                {period?.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-6\">\r\n        {/* Overall Score - Modernis√© */}\r\n        <div className=\"mb-6 p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl border-2 border-purple-200 shadow-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h4 className=\"font-body-bold text-gray-900 mb-2 text-lg\">\r\n                Score Comportemental Global\r\n              </h4>\r\n              <p className=\"font-body text-sm text-gray-600\">\r\n                Bas√© sur les observations des enseignants\r\n              </p>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-4xl font-display font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent\">\r\n                {currentData?.overallScore}/5\r\n              </div>\r\n              <div className=\"flex items-center space-x-1 mt-2\">\r\n                {[...Array(5)]?.map((_, i) => (\r\n                  <Icon\r\n                    key={i}\r\n                    name=\"Star\"\r\n                    size={18}\r\n                    className={i < currentData?.overallScore ? 'text-yellow-500 fill-current' : 'text-gray-300'}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Behavior Categories - Modernis√© */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n          {currentData?.categories?.map((category) => (\r\n            <div key={category?.id} className=\"p-5 border-2 border-purple-200 rounded-2xl bg-white shadow-md hover:shadow-lg transition-all hover:scale-105\">\r\n              <div className=\"flex items-center justify-between mb-3\">\r\n                <h5 className=\"font-body-bold text-sm text-gray-900\">\r\n                  {category?.name}\r\n                </h5>\r\n                <div className=\"flex items-center space-x-1.5\">\r\n                  {[...Array(5)]?.map((_, i) => (\r\n                    <div\r\n                      key={i}\r\n                      className={`w-3 h-3 rounded-full transition-all ${\r\n                        i < category?.score ? 'bg-gradient-to-r from-purple-600 to-pink-600 shadow-md' : 'bg-gray-200'\r\n                      }`}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <p className=\"font-body text-xs text-gray-600\">\r\n                {category?.description}\r\n              </p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Recent Comments - Modernis√© */}\r\n        <div className=\"space-y-4\">\r\n          <h4 className=\"font-body-bold text-gray-900 text-base flex items-center gap-2\">\r\n            <Icon name=\"MessageSquare\" size={20} className=\"text-purple-600\" />\r\n            Commentaires R√©cents\r\n          </h4>\r\n          {currentData?.comments?.map((comment) => (\r\n            <div key={comment?.id} className=\"flex items-start space-x-4 p-5 rounded-2xl border-2 border-gray-200 bg-white shadow-md hover:shadow-lg transition-all hover:border-purple-300\">\r\n              <div className={`w-12 h-12 rounded-2xl flex items-center justify-center shadow-md ${\r\n                comment?.type === 'positive' ? 'bg-gradient-to-br from-green-500 to-emerald-600' :\r\n                comment?.type === 'improvement' ? 'bg-gradient-to-br from-blue-500 to-indigo-600' :\r\n                comment?.type === 'concern' ? 'bg-gradient-to-br from-orange-500 to-amber-600' :\r\n                comment?.type === 'achievement' ? 'bg-gradient-to-br from-purple-500 to-violet-600' :\r\n                'bg-gradient-to-br from-gray-500 to-slate-600'\r\n              }`}>\r\n                <Icon name={getBehaviorIcon(comment?.type)} size={18} className=\"text-white\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h6 className=\"font-body-bold text-sm text-gray-900\">\r\n                    {comment?.subject} - {comment?.teacher}\r\n                  </h6>\r\n                  <span className=\"font-body-medium text-xs text-gray-500\">\r\n                    {comment?.date}\r\n                  </span>\r\n                </div>\r\n                <p className=\"font-body text-sm text-gray-700 mb-3\">\r\n                  {comment?.message}\r\n                </p>\r\n                {comment?.suggestion && (\r\n                  <div className=\"p-4 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-xl border-2 border-yellow-200\">\r\n                    <div className=\"flex items-start space-x-2\">\r\n                      <div className=\"p-1.5 rounded-lg bg-gradient-to-br from-yellow-500 to-amber-600\">\r\n                        <Icon name=\"Lightbulb\" size={16} className=\"text-white\" />\r\n                      </div>\r\n                      <div>\r\n                        <h6 className=\"font-body-bold text-xs text-gray-900 mb-1\">\r\n                          Suggestion d'am√©lioration\r\n                        </h6>\r\n                        <p className=\"font-body text-xs text-gray-700\">\r\n                          {comment?.suggestion}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Achievements - Modernis√© */}\r\n        {currentData?.achievements && currentData?.achievements?.length > 0 && (\r\n          <div className=\"mt-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border-2 border-green-200 shadow-lg\">\r\n            <h4 className=\"font-body-bold text-lg bg-gradient-to-r from-green-700 to-emerald-700 bg-clip-text text-transparent mb-4 flex items-center space-x-2\">\r\n              <div className=\"p-2 rounded-xl bg-gradient-to-br from-green-600 to-emerald-600\">\r\n                <Icon name=\"Trophy\" size={18} className=\"text-white\" />\r\n              </div>\r\n              <span>R√©ussites & Reconnaissances</span>\r\n            </h4>\r\n            <div className=\"space-y-3\">\r\n              {currentData?.achievements?.map((achievement) => (\r\n                <div key={achievement?.id} className=\"flex items-center space-x-3 p-3 bg-white rounded-xl border-2 border-green-100 shadow-sm hover:shadow-md transition-all\">\r\n                  <div className=\"p-1.5 rounded-lg bg-gradient-to-br from-yellow-500 to-amber-600\">\r\n                    <Icon name=\"Medal\" size={16} className=\"text-white\" />\r\n                  </div>\r\n                  <span className=\"font-body-medium text-sm text-gray-800 flex-1\">\r\n                    {achievement?.title}\r\n                  </span>\r\n                  <span className=\"font-body-medium text-xs text-gray-500 px-3 py-1 bg-gray-100 rounded-full\">\r\n                    {achievement?.date}\r\n                  </span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BehaviorAssessment;","import React, { useState } from 'react';\nimport Icon from '../../../components/AppIcon';\nimport Button from '../../../components/ui/Button';\n\nconst NotificationsPanel = ({ notifications }) => {\n  const [filter, setFilter] = useState('all');\n  const [showAll, setShowAll] = useState(false);\n\n  const filters = [\n    { value: 'all', label: 'Toutes', icon: 'Bell' },\n    { value: 'grades', label: 'Notes', icon: 'BookOpen' },\n    { value: 'assignments', label: 'Devoirs', icon: 'FileText' },\n    { value: 'meetings', label: 'R√©unions', icon: 'Calendar' },\n    { value: 'announcements', label: 'Annonces', icon: 'Megaphone' }\n  ];\n\n  const getNotificationIcon = (type) => {\n    switch (type) {\n      case 'grades':\n        return 'BookOpen';\n      case 'assignments':\n        return 'FileText';\n      case 'meetings':\n        return 'Calendar';\n      case 'announcements':\n        return 'Megaphone';\n      case 'payment':\n        return 'CreditCard';\n      case 'attendance':\n        return 'Clock';\n      default:\n        return 'Bell';\n    }\n  };\n\n  const getNotificationColor = (type, priority) => {\n    if (priority === 'high') return 'text-error bg-error/10 border-error/20';\n    \n    switch (type) {\n      case 'grades':\n        return 'text-success bg-success/10 border-success/20';\n      case 'assignments':\n        return 'text-warning bg-warning/10 border-warning/20';\n      case 'meetings':\n        return 'text-primary bg-primary/10 border-primary/20';\n      case 'announcements':\n        return 'text-accent-foreground bg-accent/10 border-accent/20';\n      default:\n        return 'text-muted-foreground bg-muted/10 border-border';\n    }\n  };\n\n  const getPriorityBadge = (priority) => {\n    switch (priority) {\n      case 'high':\n        return 'bg-error text-error-foreground';\n      case 'medium':\n        return 'bg-warning text-warning-foreground';\n      case 'low':\n        return 'bg-muted text-muted-foreground';\n      default:\n        return 'bg-primary text-primary-foreground';\n    }\n  };\n\n  const filteredNotifications = filter === 'all' \n    ? notifications \n    : notifications?.filter(notification => notification?.type === filter);\n\n  const displayedNotifications = showAll \n    ? filteredNotifications \n    : filteredNotifications?.slice(0, 5);\n\n  const unreadCount = notifications?.filter(n => !n?.read)?.length;\n\n  return (\n    <div className=\"bg-card rounded-lg shadow-card border border-border\">\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-2\">\n            <h3 className=\"font-heading font-heading-semibold text-lg text-card-foreground\">\n              Notifications\n            </h3>\n            {unreadCount > 0 && (\n              <span className=\"bg-accent text-accent-foreground text-xs font-caption font-caption-normal px-2 py-1 rounded-full\">\n                {unreadCount} nouvelles\n              </span>\n            )}\n          </div>\n          <Button variant=\"outline\" size=\"sm\">\n            <Icon name=\"Settings\" size={16} className=\"mr-2\" />\n            Pr√©f√©rences\n          </Button>\n        </div>\n\n        {/* Filter Tabs */}\n        <div className=\"flex flex-wrap gap-2\">\n          {filters?.map((filterOption) => (\n            <button\n              key={filterOption?.value}\n              onClick={() => setFilter(filterOption?.value)}\n              className={`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-body font-body-normal transition-micro ${\n                filter === filterOption?.value\n                  ? 'bg-primary text-primary-foreground'\n                  : 'bg-muted text-muted-foreground hover:bg-muted/80 hover:text-card-foreground'\n              }`}\n            >\n              <Icon name={filterOption?.icon} size={14} />\n              <span>{filterOption?.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n      <div className=\"p-6\">\n        {displayedNotifications?.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <Icon name=\"Bell\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\n            <p className=\"font-body font-body-normal text-muted-foreground\">\n              Aucune notification pour le moment\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {displayedNotifications?.map((notification) => (\n              <div\n                key={notification?.id}\n                className={`p-4 rounded-lg border transition-micro hover:shadow-sm ${\n                  notification?.read ? 'opacity-75' : ''\n                } ${getNotificationColor(notification?.type, notification?.priority)}`}\n              >\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"flex-shrink-0 mt-1\">\n                    <Icon name={getNotificationIcon(notification?.type)} size={16} />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <h5 className=\"font-body font-body-semibold text-sm text-card-foreground\">\n                        {notification?.title}\n                      </h5>\n                      <div className=\"flex items-center space-x-2\">\n                        {notification?.priority && (\n                          <span className={`text-xs font-caption font-caption-normal px-2 py-1 rounded-full ${getPriorityBadge(notification?.priority)}`}>\n                            {notification?.priority === 'high' ? 'Urgent' : \n                             notification?.priority === 'medium' ? 'Important' : 'Normal'}\n                          </span>\n                        )}\n                        {!notification?.read && (\n                          <div className=\"w-2 h-2 bg-accent rounded-full\" />\n                        )}\n                      </div>\n                    </div>\n                    <p className=\"font-body font-body-normal text-sm text-card-foreground mb-2\">\n                      {notification?.message}\n                    </p>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"font-caption font-caption-normal text-xs text-muted-foreground\">\n                        {notification?.time}\n                      </span>\n                      {notification?.actionRequired && (\n                        <Button variant=\"ghost\" size=\"sm\" className=\"text-xs\">\n                          <Icon name=\"ExternalLink\" size={12} className=\"mr-1\" />\n                          Action requise\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {filteredNotifications?.length > 5 && (\n          <div className=\"mt-4 text-center\">\n            <Button\n              variant=\"ghost\"\n              onClick={() => setShowAll(!showAll)}\n              className=\"text-sm\"\n            >\n              {showAll ? (\n                <>\n                  <Icon name=\"ChevronUp\" size={16} className=\"mr-2\" />\n                  Voir moins\n                </>\n              ) : (\n                <>\n                  <Icon name=\"ChevronDown\" size={16} className=\"mr-2\" />\n                  Voir toutes ({filteredNotifications?.length - 5} de plus)\n                </>\n              )}\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NotificationsPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst UpcomingAssignments = ({ assignments }) => {\r\n  const [filter, setFilter] = useState('all');\r\n\r\n  const filters = [\r\n    { value: 'all', label: 'Tous' },\r\n    { value: 'urgent', label: 'Urgent' },\r\n    { value: 'thisWeek', label: 'Cette semaine' },\r\n    { value: 'nextWeek', label: 'Semaine prochaine' }\r\n  ];\r\n\r\n  const getUrgencyColor = (daysLeft) => {\r\n    if (daysLeft <= 1) return 'text-error bg-error/10 border-error/20';\r\n    if (daysLeft <= 3) return 'text-warning bg-warning/10 border-warning/20';\r\n    if (daysLeft <= 7) return 'text-primary bg-primary/10 border-primary/20';\r\n    return 'text-muted-foreground bg-muted/10 border-border';\r\n  };\r\n\r\n  const getTypeIcon = (type) => {\r\n    switch (type) {\r\n      case 'homework':\r\n        return 'BookOpen';\r\n      case 'project':\r\n        return 'FolderOpen';\r\n      case 'exam':\r\n        return 'FileText';\r\n      case 'presentation':\r\n        return 'Presentation';\r\n      default:\r\n        return 'FileText';\r\n    }\r\n  };\r\n\r\n  const getTypeColor = (type) => {\r\n    switch (type) {\r\n      case 'homework':\r\n        return 'bg-primary/10 text-primary';\r\n      case 'project':\r\n        return 'bg-accent/10 text-accent-foreground';\r\n      case 'exam':\r\n        return 'bg-error/10 text-error';\r\n      case 'presentation':\r\n        return 'bg-success/10 text-success';\r\n      default:\r\n        return 'bg-muted/10 text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const getDaysLeft = (dueDate) => {\r\n    const today = new Date();\r\n    const due = new Date(dueDate);\r\n    const diffTime = due - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays;\r\n  };\r\n\r\n  const filterAssignments = (assignments, filter) => {\r\n    switch (filter) {\r\n      case 'urgent':\r\n        return assignments?.filter(a => getDaysLeft(a?.dueDate) <= 2);\r\n      case 'thisWeek':\r\n        return assignments?.filter(a => {\r\n          const days = getDaysLeft(a?.dueDate);\r\n          return days >= 0 && days <= 7;\r\n        });\r\n      case 'nextWeek':\r\n        return assignments?.filter(a => {\r\n          const days = getDaysLeft(a?.dueDate);\r\n          return days > 7 && days <= 14;\r\n        });\r\n      default:\r\n        return assignments;\r\n    }\r\n  };\r\n\r\n  const filteredAssignments = filterAssignments(assignments, filter);\r\n  const sortedAssignments = filteredAssignments?.sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-lg border-2 border-orange-200 overflow-hidden\">\r\n      <div className=\"bg-gradient-to-r from-orange-50 to-amber-50 p-6 border-b-2 border-orange-100\">\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-orange-600 to-amber-600 shadow-lg\">\r\n              <Icon name=\"Calendar\" size={22} className=\"text-white\" />\r\n            </div>\r\n            <h3 className=\"font-display font-bold text-xl bg-gradient-to-r from-orange-700 to-amber-700 bg-clip-text text-transparent\">\r\n              Devoirs √† Venir\r\n            </h3>\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {filters?.map((filterOption) => (\r\n              <button\r\n                key={filterOption?.value}\r\n                onClick={() => setFilter(filterOption?.value)}\r\n                className={`px-4 py-2 rounded-xl text-xs font-bold transition-all shadow-md hover:shadow-lg hover:scale-105 ${\r\n                  filter === filterOption?.value\r\n                    ? 'bg-gradient-to-r from-orange-600 to-amber-600 text-white'\r\n                    : 'bg-white text-gray-600 hover:bg-gray-50 border-2 border-gray-200'\r\n                }`}\r\n              >\r\n                {filterOption?.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-6\">\r\n        {sortedAssignments?.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"inline-flex p-4 rounded-full bg-gradient-to-br from-green-100 to-emerald-200 mb-4\">\r\n              <Icon name=\"CheckCircle\" size={40} className=\"text-green-600\" />\r\n            </div>\r\n            <p className=\"font-body-medium text-gray-600 text-lg\">\r\n              Aucun devoir pour cette p√©riode\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {sortedAssignments?.map((assignment) => {\r\n              const daysLeft = getDaysLeft(assignment?.dueDate);\r\n              const isOverdue = daysLeft < 0;\r\n              \r\n              return (\r\n                <div\r\n                  key={assignment?.id}\r\n                  className={`p-5 rounded-2xl border-2 transition-all hover:shadow-lg group ${\r\n                    isOverdue \r\n                      ? 'bg-red-50/50 border-red-300 hover:border-red-400' \r\n                      : daysLeft <= 1 \r\n                        ? 'bg-orange-50/50 border-orange-300 hover:border-orange-400'\r\n                        : daysLeft <= 3\r\n                          ? 'bg-yellow-50/50 border-yellow-300 hover:border-yellow-400'\r\n                          : 'bg-blue-50/50 border-blue-200 hover:border-blue-300'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-start space-x-4\">\r\n                    <div className={`w-12 h-12 rounded-2xl flex items-center justify-center shadow-md transition-transform group-hover:scale-110 ${\r\n                      assignment?.type === 'homework' ? 'bg-gradient-to-br from-blue-500 to-indigo-600' :\r\n                      assignment?.type === 'project' ? 'bg-gradient-to-br from-purple-500 to-violet-600' :\r\n                      assignment?.type === 'exam' ? 'bg-gradient-to-br from-red-500 to-rose-600' :\r\n                      assignment?.type === 'presentation' ? 'bg-gradient-to-br from-green-500 to-emerald-600' :\r\n                      'bg-gradient-to-br from-gray-500 to-slate-600'\r\n                    }`}>\r\n                      <Icon name={getTypeIcon(assignment?.type)} size={18} className=\"text-white\" />\r\n                    </div>\r\n                    \r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        <h4 className=\"font-body-bold text-gray-900 text-base\">\r\n                          {assignment?.title}\r\n                        </h4>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {isOverdue ? (\r\n                            <span className=\"bg-gradient-to-r from-red-600 to-rose-600 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-md\">\r\n                              En retard\r\n                            </span>\r\n                          ) : daysLeft === 0 ? (\r\n                            <span className=\"bg-gradient-to-r from-orange-600 to-amber-600 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-md animate-pulse\">\r\n                              Aujourd'hui\r\n                            </span>\r\n                          ) : daysLeft === 1 ? (\r\n                            <span className=\"bg-gradient-to-r from-red-600 to-orange-600 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-md\">\r\n                              Demain\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"bg-gray-200 text-gray-700 text-xs font-bold px-3 py-1.5 rounded-full\">\r\n                              {daysLeft} jours\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex items-center flex-wrap gap-3 text-sm text-gray-600 mb-3\">\r\n                        <span className=\"flex items-center space-x-1.5 font-body-medium\">\r\n                          <Icon name=\"BookOpen\" size={16} />\r\n                          <span>{assignment?.subject}</span>\r\n                        </span>\r\n                        <span className=\"flex items-center space-x-1.5 font-body-medium\">\r\n                          <Icon name=\"User\" size={16} />\r\n                          <span>{assignment?.teacher}</span>\r\n                        </span>\r\n                        <span className=\"flex items-center space-x-1.5 font-body-medium\">\r\n                          <Icon name=\"Calendar\" size={16} />\r\n                          <span>{new Date(assignment.dueDate)?.toLocaleDateString('fr-FR')}</span>\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      {assignment?.description && (\r\n                        <p className=\"font-body text-sm text-gray-700 mb-4\">\r\n                          {assignment?.description}\r\n                        </p>\r\n                      )}\r\n                      \r\n                      {assignment?.resources && assignment?.resources?.length > 0 && (\r\n                        <div className=\"mb-4\">\r\n                          <h6 className=\"font-body-bold text-xs text-gray-700 mb-2 flex items-center gap-2\">\r\n                            <Icon name=\"Paperclip\" size={14} />\r\n                            Ressources:\r\n                          </h6>\r\n                          <div className=\"flex flex-wrap gap-2\">\r\n                            {assignment?.resources?.map((resource, index) => (\r\n                              <button\r\n                                key={index}\r\n                                className=\"px-3 py-1.5 bg-white border-2 border-gray-200 text-gray-700 text-xs font-body-medium rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all flex items-center gap-1.5 shadow-sm hover:shadow-md\"\r\n                              >\r\n                                <Icon name=\"Paperclip\" size={12} />\r\n                                {resource?.name}\r\n                              </button>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {assignment?.completed ? (\r\n                            <span className=\"flex items-center space-x-1.5 px-3 py-1.5 bg-green-100 text-green-700 text-xs font-bold rounded-full\">\r\n                              <Icon name=\"CheckCircle\" size={14} />\r\n                              <span>Termin√©</span>\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"flex items-center space-x-1.5 px-3 py-1.5 bg-gray-100 text-gray-600 text-xs font-bold rounded-full\">\r\n                              <Icon name=\"Clock\" size={14} />\r\n                              <span>En cours</span>\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {!assignment?.completed && (\r\n                            <button className=\"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xs font-bold rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-md hover:shadow-lg flex items-center gap-1.5\">\r\n                              <Icon name=\"Check\" size={14} />\r\n                              Marquer termin√©\r\n                            </button>\r\n                          )}\r\n                          <button className=\"p-2 bg-white border-2 border-gray-200 text-gray-600 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all shadow-sm hover:shadow-md\">\r\n                            <Icon name=\"ExternalLink\" size={16} />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpcomingAssignments;","import React, { useState } from 'react';\nimport Icon from '../../../components/AppIcon';\nimport Button from '../../../components/ui/Button';\n\nconst AchievementBadges = ({ achievements }) => {\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [showDetails, setShowDetails] = useState(null);\n\n  const categories = [\n    { value: 'all', label: 'Tous', icon: 'Award' },\n    { value: 'academic', label: 'Acad√©mique', icon: 'BookOpen' },\n    { value: 'behavior', label: 'Comportement', icon: 'Heart' },\n    { value: 'participation', label: 'Participation', icon: 'Users' },\n    { value: 'improvement', label: 'Progr√®s', icon: 'TrendingUp' }\n  ];\n\n  const getBadgeColor = (category, rarity) => {\n    const baseColors = {\n      academic: 'from-blue-400 to-blue-600',\n      behavior: 'from-green-400 to-green-600',\n      participation: 'from-purple-400 to-purple-600',\n      improvement: 'from-orange-400 to-orange-600'\n    };\n\n    const rarityColors = {\n      common: 'from-gray-400 to-gray-600',\n      rare: 'from-yellow-400 to-yellow-600',\n      epic: 'from-purple-500 to-purple-700',\n      legendary: 'from-gradient-start to-gradient-end'\n    };\n\n    return rarityColors?.[rarity] || baseColors?.[category] || 'from-gray-400 to-gray-600';\n  };\n\n  const getBadgeIcon = (category) => {\n    switch (category) {\n      case 'academic':\n        return 'BookOpen';\n      case 'behavior':\n        return 'Heart';\n      case 'participation':\n        return 'Users';\n      case 'improvement':\n        return 'TrendingUp';\n      default:\n        return 'Award';\n    }\n  };\n\n  const getRarityLabel = (rarity) => {\n    switch (rarity) {\n      case 'common':\n        return 'Commun';\n      case 'rare':\n        return 'Rare';\n      case 'epic':\n        return '√âpique';\n      case 'legendary':\n        return 'L√©gendaire';\n      default:\n        return 'Standard';\n    }\n  };\n\n  const filteredAchievements = selectedCategory === 'all' \n    ? achievements \n    : achievements?.filter(achievement => achievement?.category === selectedCategory);\n\n  const earnedAchievements = filteredAchievements?.filter(a => a?.earned);\n  const availableAchievements = filteredAchievements?.filter(a => !a?.earned);\n\n  return (\n    <div className=\"bg-card rounded-lg shadow-card border border-border\">\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0\">\n          <div>\n            <h3 className=\"font-heading font-heading-semibold text-lg text-card-foreground\">\n              Badges & R√©ussites\n            </h3>\n            <p className=\"font-body font-body-normal text-sm text-muted-foreground\">\n              {earnedAchievements?.length} sur {filteredAchievements?.length} badges obtenus\n            </p>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            {categories?.map((category) => (\n              <button\n                key={category?.value}\n                onClick={() => setSelectedCategory(category?.value)}\n                className={`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-body font-body-normal transition-micro ${\n                  selectedCategory === category?.value\n                    ? 'bg-primary text-primary-foreground'\n                    : 'bg-muted text-muted-foreground hover:bg-muted/80'\n                }`}\n              >\n                <Icon name={category?.icon} size={14} />\n                <span>{category?.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n      <div className=\"p-6\">\n        {/* Progress Bar */}\n        <div className=\"mb-6\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"font-body font-body-semibold text-sm text-card-foreground\">\n              Progression\n            </span>\n            <span className=\"font-caption font-caption-normal text-xs text-muted-foreground\">\n              {Math.round((earnedAchievements?.length / filteredAchievements?.length) * 100)}%\n            </span>\n          </div>\n          <div className=\"w-full bg-muted rounded-full h-2\">\n            <div \n              className=\"bg-gradient-to-r from-primary to-accent h-2 rounded-full transition-all duration-500\"\n              style={{ width: `${(earnedAchievements?.length / filteredAchievements?.length) * 100}%` }}\n            />\n          </div>\n        </div>\n\n        {/* Earned Achievements */}\n        {earnedAchievements?.length > 0 && (\n          <div className=\"mb-8\">\n            <h4 className=\"font-body font-body-semibold text-card-foreground mb-4 flex items-center space-x-2\">\n              <Icon name=\"Trophy\" size={16} className=\"text-accent\" />\n              <span>Badges Obtenus</span>\n            </h4>\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n              {earnedAchievements?.map((achievement) => (\n                <div\n                  key={achievement?.id}\n                  className=\"relative group cursor-pointer\"\n                  onClick={() => setShowDetails(achievement)}\n                >\n                  <div className={`w-16 h-16 rounded-full bg-gradient-to-br ${getBadgeColor(achievement?.category, achievement?.rarity)} flex items-center justify-center shadow-lg transform transition-transform group-hover:scale-110`}>\n                    <Icon name={getBadgeIcon(achievement?.category)} size={24} color=\"white\" />\n                  </div>\n                  <div className=\"text-center mt-2\">\n                    <p className=\"font-caption font-caption-normal text-xs text-card-foreground line-clamp-2\">\n                      {achievement?.name}\n                    </p>\n                    <p className=\"font-caption font-caption-normal text-xs text-muted-foreground\">\n                      {new Date(achievement.earnedDate)?.toLocaleDateString('fr-FR')}\n                    </p>\n                  </div>\n                  {achievement?.rarity !== 'common' && (\n                    <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-accent rounded-full flex items-center justify-center\">\n                      <Icon name=\"Star\" size={10} color=\"white\" />\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Available Achievements */}\n        {availableAchievements?.length > 0 && (\n          <div>\n            <h4 className=\"font-body font-body-semibold text-card-foreground mb-4 flex items-center space-x-2\">\n              <Icon name=\"Target\" size={16} className=\"text-muted-foreground\" />\n              <span>Badges Disponibles</span>\n            </h4>\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n              {availableAchievements?.map((achievement) => (\n                <div\n                  key={achievement?.id}\n                  className=\"relative group cursor-pointer opacity-60 hover:opacity-80 transition-opacity\"\n                  onClick={() => setShowDetails(achievement)}\n                >\n                  <div className=\"w-16 h-16 rounded-full bg-muted border-2 border-dashed border-muted-foreground flex items-center justify-center\">\n                    <Icon name={getBadgeIcon(achievement?.category)} size={24} className=\"text-muted-foreground\" />\n                  </div>\n                  <div className=\"text-center mt-2\">\n                    <p className=\"font-caption font-caption-normal text-xs text-muted-foreground line-clamp-2\">\n                      {achievement?.name}\n                    </p>\n                    <p className=\"font-caption font-caption-normal text-xs text-muted-foreground\">\n                      {achievement?.progress}% compl√©t√©\n                    </p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Achievement Details Modal */}\n        {showDetails && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-modal p-4\">\n            <div className=\"bg-card rounded-lg shadow-modal max-w-md w-full border border-border\">\n              <div className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"font-heading font-heading-semibold text-lg text-card-foreground\">\n                    D√©tails du Badge\n                  </h3>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => setShowDetails(null)}\n                  >\n                    <Icon name=\"X\" size={16} />\n                  </Button>\n                </div>\n\n                <div className=\"text-center mb-6\">\n                  <div className={`w-24 h-24 rounded-full bg-gradient-to-br ${getBadgeColor(showDetails?.category, showDetails?.rarity)} flex items-center justify-center shadow-lg mx-auto mb-4 ${\n                    !showDetails?.earned ? 'opacity-60 grayscale' : ''\n                  }`}>\n                    <Icon name={getBadgeIcon(showDetails?.category)} size={32} color=\"white\" />\n                  </div>\n                  <h4 className=\"font-heading font-heading-semibold text-xl text-card-foreground mb-2\">\n                    {showDetails?.name}\n                  </h4>\n                  <div className=\"flex items-center justify-center space-x-2 mb-2\">\n                    <span className={`text-xs font-caption font-caption-normal px-2 py-1 rounded-full ${\n                      showDetails?.rarity === 'legendary' ? 'bg-gradient-to-r from-yellow-400 to-orange-500 text-white' :\n                      showDetails?.rarity === 'epic' ? 'bg-purple-100 text-purple-800' :\n                      showDetails?.rarity === 'rare'? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800'\n                    }`}>\n                      {getRarityLabel(showDetails?.rarity)}\n                    </span>\n                    <span className=\"text-xs font-caption font-caption-normal px-2 py-1 rounded-full bg-muted text-muted-foreground\">\n                      {categories?.find(c => c?.value === showDetails?.category)?.label}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div>\n                    <h5 className=\"font-body font-body-semibold text-sm text-card-foreground mb-2\">\n                      Description\n                    </h5>\n                    <p className=\"font-body font-body-normal text-sm text-muted-foreground\">\n                      {showDetails?.description}\n                    </p>\n                  </div>\n\n                  <div>\n                    <h5 className=\"font-body font-body-semibold text-sm text-card-foreground mb-2\">\n                      Crit√®res\n                    </h5>\n                    <p className=\"font-body font-body-normal text-sm text-muted-foreground\">\n                      {showDetails?.criteria}\n                    </p>\n                  </div>\n\n                  {showDetails?.earned ? (\n                    <div className=\"p-3 bg-success/10 rounded-lg\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Icon name=\"CheckCircle\" size={16} className=\"text-success\" />\n                        <span className=\"font-body font-body-semibold text-sm text-success\">\n                          Badge obtenu le {new Date(showDetails.earnedDate)?.toLocaleDateString('fr-FR')}\n                        </span>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"p-3 bg-muted/20 rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"font-body font-body-semibold text-sm text-card-foreground\">\n                          Progression\n                        </span>\n                        <span className=\"font-caption font-caption-normal text-xs text-muted-foreground\">\n                          {showDetails?.progress}%\n                        </span>\n                      </div>\n                      <div className=\"w-full bg-muted rounded-full h-2\">\n                        <div \n                          className=\"bg-primary h-2 rounded-full transition-all\"\n                          style={{ width: `${showDetails?.progress}%` }}\n                        />\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AchievementBadges;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\n/**\r\n * Composant pour afficher les informations du parent/tuteur d'un √©tudiant\r\n * Visible uniquement dans le dashboard √©tudiant\r\n */\r\nconst ParentInfoCard = ({ parentInfo }) => {\r\n  // Si pas d'info parent, ne rien afficher\r\n  if (!parentInfo || (!parentInfo.parent_name && !parentInfo.parent_phone)) {\r\n    return null;\r\n  }\r\n\r\n  const hasParentName = parentInfo.parent_name && parentInfo.parent_name !== 'Non d√©fini';\r\n  const hasParentPhone = parentInfo.parent_phone && parentInfo.parent_phone !== 'Non d√©fini';\r\n  const hasParentEmail = parentInfo.parent_email && parentInfo.parent_email !== 'Non d√©fini';\r\n\r\n  // Si aucune info valide, ne rien afficher\r\n  if (!hasParentName && !hasParentPhone && !hasParentEmail) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border border-purple-200 p-6 shadow-sm hover:shadow-md transition-shadow\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-purple-900 flex items-center\">\r\n          <Icon name=\"Users\" size={20} className=\"mr-2 text-purple-600\" />\r\n          Mon Parent / Tuteur\r\n        </h3>\r\n        <div className=\"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center\">\r\n          <Icon name=\"Heart\" size={20} className=\"text-purple-600\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        {/* Nom du parent */}\r\n        {hasParentName && (\r\n          <div className=\"bg-white rounded-lg p-3 border border-purple-100\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <Icon name=\"User\" size={16} className=\"text-purple-600\" />\r\n              </div>\r\n              <div className=\"min-w-0 flex-1\">\r\n                <p className=\"text-xs text-purple-600 font-medium\">Nom complet</p>\r\n                <p className=\"text-sm font-semibold text-purple-900 truncate\">\r\n                  {parentInfo.parent_name}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* T√©l√©phone du parent */}\r\n        {hasParentPhone && (\r\n          <div className=\"bg-white rounded-lg p-3 border border-purple-100\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <Icon name=\"Phone\" size={16} className=\"text-green-600\" />\r\n              </div>\r\n              <div className=\"min-w-0 flex-1\">\r\n                <p className=\"text-xs text-green-600 font-medium\">T√©l√©phone</p>\r\n                <a \r\n                  href={`tel:${parentInfo.parent_phone}`}\r\n                  className=\"text-sm font-semibold text-green-900 hover:text-green-700 hover:underline\"\r\n                >\r\n                  {parentInfo.parent_phone}\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Email du parent */}\r\n        {hasParentEmail && (\r\n          <div className=\"bg-white rounded-lg p-3 border border-purple-100\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <Icon name=\"Mail\" size={16} className=\"text-blue-600\" />\r\n              </div>\r\n              <div className=\"min-w-0 flex-1\">\r\n                <p className=\"text-xs text-blue-600 font-medium\">Email</p>\r\n                <a \r\n                  href={`mailto:${parentInfo.parent_email}`}\r\n                  className=\"text-sm font-semibold text-blue-900 hover:text-blue-700 hover:underline truncate block\"\r\n                >\r\n                  {parentInfo.parent_email}\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Profession du parent (si disponible) */}\r\n        {parentInfo.parent_profession && parentInfo.parent_profession !== 'Non d√©fini' && (\r\n          <div className=\"bg-white rounded-lg p-3 border border-purple-100\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <Icon name=\"Briefcase\" size={16} className=\"text-orange-600\" />\r\n              </div>\r\n              <div className=\"min-w-0 flex-1\">\r\n                <p className=\"text-xs text-orange-600 font-medium\">Profession</p>\r\n                <p className=\"text-sm font-semibold text-orange-900 truncate\">\r\n                  {parentInfo.parent_profession}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Message informatif */}\r\n      <div className=\"mt-4 bg-purple-100 border border-purple-200 rounded-lg p-3\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={14} className=\"text-purple-600 mt-0.5 flex-shrink-0\" />\r\n          <p className=\"text-xs text-purple-800\">\r\n            Ces informations permettent √† l'√©cole de contacter votre parent/tuteur en cas de besoin.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParentInfoCard;\r\n","import React, { useState, useEffect } from 'react';\nimport { Link, useSearchParams } from 'react-router-dom';\nimport Header from '../../components/ui/Header';\nimport Sidebar from '../../components/ui/Sidebar';\nimport Icon from '../../components/AppIcon';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useStudentDashboardData } from '../../hooks/useStudentDashboardData';\nimport useRoleSession from '../../hooks/useRoleSession';\n\nimport ProfileCard from './components/ProfileCard';\nimport GradesPanel from './components/GradesPanel';\nimport AttendanceCalendar from './components/AttendanceCalendar';\nimport BehaviorAssessment from './components/BehaviorAssessment';\nimport NotificationsPanel from './components/NotificationsPanel';\nimport UpcomingAssignments from './components/UpcomingAssignments';\nimport AchievementBadges from './components/AchievementBadges';\nimport ParentInfoCard from './components/ParentInfoCard';\n\nconst StudentDashboard = () => {\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [searchParams, setSearchParams] = useSearchParams();\n  const activeTab = searchParams.get('tab') || 'dashboard';\n  const [messageTab, setMessageTab] = useState('received'); // 'received', 'sent', 'archived'\n  const [showNewMessageModal, setShowNewMessageModal] = useState(false);\n  const [documentTab, setDocumentTab] = useState('received'); // 'received', 'assignments', 'admin'\n  \n  // NOUVEAU : Charger la session sp√©cifique √† l'√©tudiant\n  const { user: studentUser, loading: sessionLoading, error: sessionError } = useRoleSession('student');\n  const { user: authUser } = useAuth();\n  \n  // Utiliser prioritairement la session √©tudiant\n  const user = studentUser || authUser;\n\n  console.log('üîë Student Session:', studentUser?.email || 'Non trouv√©e');\n  console.log('üîë AuthContext user:', authUser?.email);\n  console.log('üîë Utilisateur actif:', user?.email);\n\n  // Utiliser le nouveau hook unifi√© pour r√©cup√©rer les donn√©es\n  const {\n    loading,\n    error,\n    studentProfile,\n    stats,\n    grades: fetchedGrades,\n    attendance: fetchedAttendance,\n    assignments: fetchedAssignments,\n    notifications: fetchedNotifications,\n    achievements: fetchedAchievements,\n    behavior: fetchedBehavior,\n    schedule: fetchedSchedule,\n    refreshData,\n    markNotificationAsRead: markAsRead,\n    getGradesBySubject,\n    getAttendanceStats,\n    getAssignmentsByStatus,\n    getUnreadNotifications\n  } = useStudentDashboardData(user?.id);\n\n  // Transformer les donn√©es pour correspondre au format attendu par les composants\n  const studentData = studentProfile ? {\n    name: studentProfile.full_name || `${studentProfile.first_name} ${studentProfile.last_name}`,\n    studentId: studentProfile.id,\n    class: studentProfile.class?.name || 'Non assign√©',\n    academicYear: \"2024-2025\",\n    photo: studentProfile.photo_url || \"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face\",\n    stats: {\n      averageGrade: stats?.averageGrade || \"0.00\",\n      attendanceRate: parseFloat(stats?.attendanceRate || \"0\"),\n      assignmentsDue: fetchedAssignments.filter(a => a.status === 'pending').length || 0\n    }\n  } : null;\n\n  console.log('üë§ Student Dashboard - User ID:', user?.id);\n  console.log('üë§ Student Dashboard - Student Profile:', studentProfile);\n  console.log('üë§ Student Dashboard - Student Data:', studentData);\n\n  // Transformer les donn√©es de notes pour correspondre au format attendu\n  const gradesBySubject = getGradesBySubject({ schoolType: studentProfile?.school?.type });\n  const gradesData = gradesBySubject.map((subjectData, index) => ({\n    id: index + 1,\n    name: subjectData.subject,\n    average: parseFloat(subjectData.average),\n    coefficient: 5, // Default coefficient\n    assignments: subjectData.grades.map(g => ({\n      id: g.id,\n      name: g.grade_type,\n      grade: g.grade,\n      coefficient: g.coefficient,\n      type: g.grade_type,\n      date: new Date(g.date).toLocaleDateString('fr-FR')\n    })),\n    feedback: subjectData.grades[0]?.comment || \"Continuez vos efforts\"\n  }));\n\n  // Transformer les donn√©es de pr√©sence\n  const attendanceData = fetchedAttendance.reduce((acc, item) => {\n    acc[item.date] = item.status;\n    return acc;\n  }, {});\n\n  // Utiliser les donn√©es de comportement du hook\n  const behaviorData = fetchedBehavior ? {\n    current: {\n      overallScore: fetchedBehavior.overall_score || 0,\n      categories: [\n        { id: 1, name: \"Participation\", score: fetchedBehavior.participation || 0, description: \"Participation en classe\" },\n        { id: 2, name: \"Discipline\", score: fetchedBehavior.discipline || 0, description: \"Respect des r√®gles\" },\n        { id: 3, name: \"Respect\", score: fetchedBehavior.respect || 0, description: \"Respect envers les autres\" },\n        { id: 4, name: \"Devoirs\", score: fetchedBehavior.homework || 0, description: \"Assiduit√© dans les devoirs\" }\n      ],\n      comments: fetchedBehavior.comments || [],\n      achievements: fetchedBehavior.positive_notes || []\n    }\n  } : null;\n\n  // Utiliser les notifications r√©cup√©r√©es du hook\n  const notificationsData = fetchedNotifications.map(n => ({\n    id: n.id,\n    title: n.title,\n    message: n.message,\n    type: n.type,\n    priority: n.priority || \"medium\",\n    time: new Date(n.created_at).toLocaleString('fr-FR'),\n    read: n.is_read || false,\n    actionRequired: n.priority === 'high'\n  }));\n\n  // Utiliser les devoirs r√©cup√©r√©s du hook\n  const assignmentsData = fetchedAssignments.map(a => ({\n    id: a.id,\n    title: a.title,\n    subject: a.subject,\n    teacher: a.teacher_name || 'Enseignant',\n    type: 'homework',\n    dueDate: a.due_date,\n    description: a.description,\n    completed: a.status === 'completed',\n    resources: []\n  }));\n\n  // Utiliser les achievements r√©cup√©r√©s du hook\n  const achievementsData = fetchedAchievements.map(a => ({\n    id: a.id,\n    name: a.title,\n    description: a.description,\n    category: a.category || 'academic',\n    rarity: a.level || 'common',\n    earned: true,\n    earnedDate: a.earned_date,\n    criteria: a.description,\n    progress: 100\n  }));\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  const handlePhotoUpdate = (newPhotoUrl) => {\n    // Handle photo update logic here\n    console.log('Photo updated:', newPhotoUrl);\n  };\n\n  const getGreeting = () => {\n    const hour = currentTime?.getHours();\n    if (hour < 12) return \"Bonjour\";\n    if (hour < 18) return \"Bon apr√®s-midi\";\n    return \"Bonsoir\";\n  };\n\n  const renderTabContent = () => {\n    switch(activeTab) {\n      case 'profile':\n        return (\n          <div className=\"space-y-6\">\n            <ProfileCard \n              student={studentData}\n              onPhotoUpdate={handlePhotoUpdate}\n            />\n            <BehaviorAssessment behaviorData={behaviorData} />\n          </div>\n        );\n      \n      case 'grades':\n        return (\n          <div className=\"space-y-6\">\n            <GradesPanel grades={gradesData} />\n            <AchievementBadges achievements={achievementsData} />\n          </div>\n        );\n      \n      case 'assignments':\n        return <UpcomingAssignments assignments={assignmentsData} />;\n      \n      case 'attendance':\n        return <AttendanceCalendar attendanceData={attendanceData} />;\n      \n      case 'schedule':\n        // V√©rifier si on a des donn√©es d'emploi du temps\n        const hasScheduleData = fetchedSchedule && Array.isArray(fetchedSchedule) && fetchedSchedule.length > 0;\n        \n        return (\n          <div className=\"space-y-6\">\n            {/* Header modernis√© */}\n            <div className=\"bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl shadow-xl p-6 text-white\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl\">\n                  üìÖ\n                </div>\n                <div>\n                  <h2 className=\"font-heading font-heading-bold text-2xl\">\n                    Emploi du temps\n                  </h2>\n                  <p className=\"text-purple-100 text-sm mt-1\">\n                    {hasScheduleData ? 'Votre planning hebdomadaire' : 'Aucun emploi du temps disponible'}\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            {!hasScheduleData ? (\n              <div className=\"bg-white rounded-2xl border-2 border-gray-200 shadow-lg p-12 text-center\">\n                <div className=\"inline-flex p-4 rounded-full bg-gradient-to-br from-purple-100 to-pink-200 mb-4\">\n                  <Icon name=\"Calendar\" size={48} className=\"text-purple-600\" />\n                </div>\n                <h3 className=\"font-body-bold text-xl text-gray-900 mb-2\">\n                  Aucun emploi du temps disponible\n                </h3>\n                <p className=\"text-gray-600 font-body-medium\">\n                  Votre emploi du temps sera disponible une fois que votre classe aura √©t√© configur√©e par l'administration.\n                </p>\n              </div>\n            ) : (\n              <>\n            {/* Weekly Schedule - Modernis√© */}\n            <div className=\"bg-white rounded-2xl border-2 border-gray-200 shadow-lg overflow-hidden hover:shadow-xl transition-shadow\">\n              <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 p-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"font-heading font-heading-semibold text-xl text-white\">\n                      Semaine du {new Date().toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' })}\n                    </h3>\n                    <p className=\"text-purple-100 text-sm mt-1\">Emploi du temps complet</p>\n                  </div>\n                  <button className=\"px-4 py-2 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-xl transition-all flex items-center space-x-2\">\n                    <Icon name=\"Download\" size={18} />\n                    <span className=\"hidden sm:inline\">T√©l√©charger</span>\n                  </button>\n                </div>\n              </div>\n              \n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gradient-to-r from-gray-50 to-gray-100\">\n                    <tr>\n                      <th className=\"px-4 py-4 text-left font-heading font-heading-bold text-sm text-gray-900 border-b-2 border-gray-200\">‚è∞ Horaire</th>\n                      <th className=\"px-4 py-4 text-left font-heading font-heading-bold text-sm text-gray-900 border-b-2 border-gray-200\">Lundi</th>\n                      <th className=\"px-4 py-4 text-left font-heading font-heading-bold text-sm text-gray-900 border-b-2 border-gray-200\">Mardi</th>\n                      <th className=\"px-4 py-4 text-left font-heading font-heading-bold text-sm text-gray-900 border-b-2 border-gray-200\">Mercredi</th>\n                      <th className=\"px-4 py-4 text-left font-heading font-heading-bold text-sm text-gray-900 border-b-2 border-gray-200\">Jeudi</th>\n                      <th className=\"px-4 py-4 text-left font-heading font-heading-bold text-sm text-gray-900 border-b-2 border-gray-200\">Vendredi</th>\n                      <th className=\"px-4 py-4 text-left font-heading font-heading-bold text-sm text-gray-900 border-b-2 border-gray-200\">Samedi</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y-2 divide-gray-100\">\n                    {fetchedSchedule.map((slot, index) => (\n                      <tr key={index} className=\"hover:bg-gray-50/50 transition-colors\">\n                        <td className=\"px-4 py-4 font-caption font-caption-bold text-sm whitespace-nowrap text-gray-700 bg-gray-50\">\n                          {slot.start_time} - {slot.end_time}\n                        </td>\n                        {['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'].map((day) => {\n                          const course = slot[day];\n                          if (!course) {\n                            return <td key={day} className=\"px-4 py-4 text-center text-gray-400 text-sm\">-</td>;\n                          }\n                          const colors = {\n                            'Mathematiques': 'from-blue-50 to-indigo-50 border-blue-500 text-blue-900',\n                            'Francais': 'from-purple-50 to-pink-50 border-purple-500 text-purple-900',\n                            'Physique': 'from-green-50 to-emerald-50 border-green-500 text-green-900',\n                            'Histoire': 'from-orange-50 to-amber-50 border-orange-500 text-orange-900',\n                            'Anglais': 'from-red-50 to-rose-50 border-red-500 text-red-900',\n                            'EPS': 'from-indigo-50 to-blue-50 border-indigo-500 text-indigo-900'\n                          };\n                          const colorClass = colors[course.subject] || 'from-gray-50 to-slate-50 border-gray-500 text-gray-900';\n                          return (\n                            <td key={day} className=\"px-4 py-4\">\n                              <div className={`bg-gradient-to-br ${colorClass} border-l-4 p-3 rounded-xl shadow-sm hover:shadow-md transition-shadow`}>\n                                <div className=\"font-body font-body-semibold text-sm\">{course.subject}</div>\n                                <div className=\"text-xs mt-1 flex items-center gap-1\">\n                                  <Icon name=\"User\" size={10} />\n                                  {course.teacher} - {course.room}\n                                </div>\n                              </div>\n                            </td>\n                          );\n                        })}\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            </>\n            )}\n          </div>\n        );\n      \n      case 'documents':\n        // Documents re√ßus des enseignants\n        const receivedDocuments = [\n          {\n            id: 1,\n            title: 'Cours de Math√©matiques - Chapitre 5',\n            subject: 'Math√©matiques',\n            type: 'Cours',\n            teacher: 'M. Nkolo',\n            date: '2025-11-25',\n            size: '2.4 MB',\n            format: 'PDF',\n            new: true\n          },\n          {\n            id: 2,\n            title: 'Exercices de Fran√ßais - Grammaire',\n            subject: 'Fran√ßais',\n            type: 'Exercices',\n            teacher: 'Mme Djomo',\n            date: '2025-11-24',\n            size: '1.8 MB',\n            format: 'PDF',\n            new: false\n          },\n          {\n            id: 3,\n            title: 'Correction Examen Math',\n            subject: 'Math√©matiques',\n            type: 'Correction',\n            teacher: 'M. Nkolo',\n            date: '2025-11-19',\n            size: '945 KB',\n            format: 'PDF',\n            new: false\n          },\n          {\n            id: 4,\n            title: 'TP Physique - Optique',\n            subject: 'Physique',\n            type: 'TP',\n            teacher: 'M. Fouda',\n            date: '2025-11-21',\n            size: '1.2 MB',\n            format: 'PDF',\n            new: false\n          },\n          {\n            id: 5,\n            title: 'Cours - La Guerre Froide',\n            subject: 'Histoire-G√©ographie',\n            type: 'Cours',\n            teacher: 'M. Kamga',\n            date: '2025-11-22',\n            size: '1.5 MB',\n            format: 'PDF',\n            new: true\n          }\n        ];\n\n        // Devoirs √† rendre\n        const assignments = [\n          {\n            id: 1,\n            title: 'Devoir de Math√©matiques - √âquations',\n            subject: 'Math√©matiques',\n            teacher: 'M. Nkolo',\n            dueDate: '2025-12-02',\n            status: 'pending',\n            hasSubmitted: false,\n            maxSize: '5 MB',\n            allowedFormats: ['PDF', 'DOCX']\n          },\n          {\n            id: 2,\n            title: 'Dissertation de Fran√ßais',\n            subject: 'Fran√ßais',\n            teacher: 'Mme Djomo',\n            dueDate: '2025-12-05',\n            status: 'pending',\n            hasSubmitted: false,\n            maxSize: '5 MB',\n            allowedFormats: ['PDF', 'DOCX']\n          },\n          {\n            id: 3,\n            title: 'Compte-rendu TP Physique',\n            subject: 'Physique',\n            teacher: 'M. Fouda',\n            dueDate: '2025-11-28',\n            status: 'submitted',\n            hasSubmitted: true,\n            submittedDate: '2025-11-27',\n            submittedFile: 'CR_Physique_Optique.pdf',\n            maxSize: '5 MB',\n            allowedFormats: ['PDF']\n          }\n        ];\n\n        // Documents administratifs\n        const adminDocuments = [\n          {\n            id: 1,\n            title: 'Bulletin Scolaire - Trimestre 1',\n            type: 'Bulletin',\n            date: '2025-11-20',\n            size: '320 KB',\n            format: 'PDF'\n          },\n          {\n            id: 2,\n            title: 'Certificat de Scolarit√© 2025-2026',\n            type: 'Certificat',\n            date: '2025-09-15',\n            size: '180 KB',\n            format: 'PDF'\n          },\n          {\n            id: 3,\n            title: 'Calendrier Scolaire',\n            type: 'Calendrier',\n            date: '2025-09-01',\n            size: '412 KB',\n            format: 'PDF'\n          }\n        ];\n\n        return (\n          <div className=\"space-y-6\">\n            {/* Header modernis√© */}\n            <div className=\"bg-gradient-to-br from-red-600 to-rose-600 rounded-2xl shadow-xl p-6 text-white\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl\">\n                    üìÑ\n                  </div>\n                  <div>\n                    <h2 className=\"font-heading font-heading-bold text-2xl\">\n                      Mes Documents\n                    </h2>\n                    <p className=\"text-red-100 text-sm mt-1\">\n                      Cours, devoirs et documents officiels\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            {/* Tabs et contenu - Modernis√© */}\n            <div className=\"bg-white rounded-2xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n              <div className=\"border-b-2 border-gray-100\">\n                <nav className=\"flex -mb-0.5 px-2\">\n                  <button\n                    onClick={() => setDocumentTab('received')}\n                    className={`px-6 py-4 text-sm font-body font-body-semibold border-b-4 transition-all duration-300 ${\n                      documentTab === 'received'\n                        ? 'border-blue-600 text-blue-900 bg-blue-50/50'\n                        : 'border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <Icon name=\"BookOpen\" size={18} />\n                      <span>Documents re√ßus</span>\n                      <span className={`px-2.5 py-1 text-xs font-bold rounded-full ${\n                        documentTab === 'received' \n                          ? 'bg-blue-600 text-white' \n                          : 'bg-blue-100 text-blue-700'\n                      }`}>\n                        {receivedDocuments.length}\n                      </span>\n                    </div>\n                  </button>\n                  <button\n                    onClick={() => setDocumentTab('assignments')}\n                    className={`px-6 py-4 text-sm font-body font-body-semibold border-b-4 transition-all duration-300 ${\n                      documentTab === 'assignments'\n                        ? 'border-orange-600 text-orange-900 bg-orange-50/50'\n                        : 'border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <Icon name=\"Upload\" size={18} />\n                      <span>Mes devoirs</span>\n                      <span className={`px-2.5 py-1 text-xs font-bold rounded-full ${\n                        documentTab === 'assignments'\n                          ? 'bg-orange-600 text-white animate-pulse' \n                          : 'bg-orange-100 text-orange-700'\n                      }`}>\n                        {assignments.filter(a => !a.hasSubmitted).length}\n                      </span>\n                    </div>\n                  </button>\n                  <button\n                    onClick={() => setDocumentTab('admin')}\n                    className={`px-6 py-4 text-sm font-body font-body-semibold border-b-4 transition-all duration-300 ${\n                      documentTab === 'admin'\n                        ? 'border-purple-600 text-purple-900 bg-purple-50/50'\n                        : 'border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <Icon name=\"Shield\" size={18} />\n                      <span>Documents administratifs</span>\n                      <span className={`px-2.5 py-1 text-xs font-bold rounded-full ${\n                        documentTab === 'admin' \n                          ? 'bg-purple-600 text-white' \n                          : 'bg-purple-100 text-purple-700'\n                      }`}>\n                        {adminDocuments.length}\n                      </span>\n                    </div>\n                  </button>\n                </nav>\n              </div>\n\n              <div className=\"p-6\">\n                {documentTab === 'received' && (\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <p className=\"text-sm text-muted-foreground\">\n                        Documents mis √† disposition par vos enseignants\n                      </p>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"px-3 py-1 text-sm bg-green-50 text-green-700 rounded-full\">\n                          {receivedDocuments.filter(d => d.new).length} nouveaux\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"min-w-full divide-y divide-border\">\n                        <thead className=\"bg-muted\">\n                          <tr>\n                            <th className=\"px-6 py-3 text-left text-xs font-body font-body-medium text-muted-foreground uppercase tracking-wider\">\n                              Document\n                            </th>\n                            <th className=\"px-6 py-3 text-left text-xs font-body font-body-medium text-muted-foreground uppercase tracking-wider\">\n                              Type\n                            </th>\n                            <th className=\"px-6 py-3 text-left text-xs font-body font-body-medium text-muted-foreground uppercase tracking-wider\">\n                              Enseignant\n                            </th>\n                            <th className=\"px-6 py-3 text-left text-xs font-body font-body-medium text-muted-foreground uppercase tracking-wider\">\n                              Date\n                            </th>\n                            <th className=\"px-6 py-3 text-left text-xs font-body font-body-medium text-muted-foreground uppercase tracking-wider\">\n                              Taille\n                            </th>\n                            <th className=\"px-6 py-3 text-right text-xs font-body font-body-medium text-muted-foreground uppercase tracking-wider\">\n                              Actions\n                            </th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"bg-card divide-y divide-border\">\n                          {receivedDocuments.map((doc) => (\n                            <tr key={doc.id} className=\"hover:bg-muted/50\">\n                              <td className=\"px-6 py-4\">\n                                <div className=\"flex items-center\">\n                                  <div className=\"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-blue-50 rounded-lg\">\n                                    <Icon name=\"FileText\" size={20} className=\"text-blue-600\" />\n                                  </div>\n                                  <div className=\"ml-4\">\n                                    <div className=\"flex items-center gap-2\">\n                                      <div className=\"text-sm font-body font-body-medium text-card-foreground\">{doc.title}</div>\n                                      {doc.new && (\n                                        <span className=\"px-2 py-1 text-xs font-body font-body-semibold text-green-600 bg-green-100 rounded-full\">\n                                          Nouveau\n                                        </span>\n                                      )}\n                                    </div>\n                                    <div className=\"text-sm text-muted-foreground\">{doc.subject}</div>\n                                  </div>\n                                </div>\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap\">\n                                <span className=\"px-2 py-1 text-xs font-body font-body-semibold text-purple-600 bg-purple-100 rounded-full\">\n                                  {doc.type}\n                                </span>\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-card-foreground\">\n                                {doc.teacher}\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">\n                                {new Date(doc.date).toLocaleDateString('fr-FR')}\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">\n                                {doc.size}\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                                <div className=\"flex items-center justify-end gap-2\">\n                                  <button className=\"text-blue-600 hover:text-blue-900\">\n                                    <Icon name=\"Eye\" size={18} />\n                                  </button>\n                                  <button className=\"text-green-600 hover:text-green-900\">\n                                    <Icon name=\"Download\" size={18} />\n                                  </button>\n                                </div>\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                )}\n\n                {documentTab === 'assignments' && (\n                  <div className=\"space-y-4\">\n                    <div className=\"mb-4\">\n                      <p className=\"text-sm text-muted-foreground\">\n                        D√©posez vos devoirs avant la date limite\n                      </p>\n                    </div>\n                    <div className=\"space-y-4\">\n                      {assignments.map((assignment) => (\n                        <div\n                          key={assignment.id}\n                          className={`border-2 rounded-lg p-6 ${\n                            assignment.hasSubmitted\n                              ? 'border-green-200 bg-green-50'\n                              : 'border-orange-200 bg-orange-50'\n                          }`}\n                        >\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-3 mb-2\">\n                                <h3 className=\"text-lg font-heading font-heading-semibold text-card-foreground\">\n                                  {assignment.title}\n                                </h3>\n                                {assignment.hasSubmitted ? (\n                                  <span className=\"px-3 py-1 text-xs font-body font-body-semibold text-green-700 bg-green-200 rounded-full flex items-center gap-1\">\n                                    <Icon name=\"CheckCircle\" size={16} />\n                                    Rendu\n                                  </span>\n                                ) : (\n                                  <span className=\"px-3 py-1 text-xs font-body font-body-semibold text-orange-700 bg-orange-200 rounded-full flex items-center gap-1\">\n                                    <Icon name=\"Clock\" size={16} />\n                                    √Ä rendre\n                                  </span>\n                                )}\n                              </div>\n                              <div className=\"space-y-2\">\n                                <div className=\"flex items-center gap-4 text-sm text-gray-700\">\n                                  <span className=\"flex items-center gap-1\">\n                                    <Icon name=\"BookOpen\" size={16} />\n                                    {assignment.subject}\n                                  </span>\n                                  <span className=\"flex items-center gap-1\">\n                                    <Icon name=\"User\" size={16} />\n                                    {assignment.teacher}\n                                  </span>\n                                  <span className=\"flex items-center gap-1\">\n                                    <Icon name=\"Calendar\" size={16} />\n                                    Date limite: {new Date(assignment.dueDate).toLocaleDateString('fr-FR')}\n                                  </span>\n                                </div>\n                                <div className=\"text-sm text-muted-foreground\">\n                                  Formats accept√©s: {assignment.allowedFormats.join(', ')} | Taille max: {assignment.maxSize}\n                                </div>\n                                {assignment.hasSubmitted && (\n                                  <div className=\"mt-3 p-3 bg-white rounded-lg border border-green-200\">\n                                    <div className=\"flex items-center gap-2\">\n                                      <Icon name=\"FileCheck\" size={20} className=\"text-green-600\" />\n                                      <div>\n                                        <p className=\"text-sm font-body font-body-medium text-card-foreground\">{assignment.submittedFile}</p>\n                                        <p className=\"text-xs text-muted-foreground\">\n                                          Soumis le {new Date(assignment.submittedDate).toLocaleDateString('fr-FR')}\n                                        </p>\n                                      </div>\n                                    </div>\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                            <div>\n                              {assignment.hasSubmitted ? (\n                                <button className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2\">\n                                  <Icon name=\"RefreshCw\" size={18} />\n                                  Modifier\n                                </button>\n                              ) : (\n                                <button className=\"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2\">\n                                  <Icon name=\"Upload\" size={18} />\n                                  Soumettre\n                                </button>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {documentTab === 'admin' && (\n                  <div className=\"space-y-4 p-6\">\n                    <div className=\"mb-6\">\n                      <p className=\"text-sm text-gray-600 font-body-medium\">\n                        Bulletins, certificats et documents officiels\n                      </p>\n                    </div>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                      {adminDocuments.map((doc) => (\n                        <div\n                          key={doc.id}\n                          className=\"bg-white border-2 border-purple-200 rounded-2xl p-5 hover:shadow-xl transition-all hover:scale-105 group\"\n                        >\n                          <div className=\"flex items-start gap-4\">\n                            <div className=\"flex-shrink-0 h-14 w-14 flex items-center justify-center bg-gradient-to-br from-purple-500 to-violet-600 rounded-2xl shadow-lg\">\n                              <Icon name=\"FileText\" size={26} className=\"text-white\" />\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <h3 className=\"text-sm font-body-bold text-gray-900 mb-2 truncate\">\n                                {doc.title}\n                              </h3>\n                              <div className=\"space-y-2\">\n                                <p className=\"text-xs\">\n                                  <span className=\"inline-block px-3 py-1 bg-purple-100 text-purple-700 rounded-full font-bold\">\n                                    {doc.type}\n                                  </span>\n                                </p>\n                                <p className=\"text-xs text-gray-600 font-body-medium\">\n                                  {new Date(doc.date).toLocaleDateString('fr-FR')} ‚Ä¢ {doc.size}\n                                </p>\n                              </div>\n                              <div className=\"flex items-center gap-2 mt-4\">\n                                <button className=\"flex-1 px-3 py-2 text-xs bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all font-bold flex items-center justify-center gap-1.5 shadow-md hover:shadow-lg\">\n                                  <Icon name=\"Eye\" size={14} />\n                                  Voir\n                                </button>\n                                <button className=\"flex-1 px-3 py-2 text-xs bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all font-bold flex items-center justify-center gap-1.5 shadow-md hover:shadow-lg\">\n                                  <Icon name=\"Download\" size={14} />\n                                  T√©l√©charger\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        );\n      \n      case 'messages':\n        // MODIFICATION: Utiliser les donn√©es de la base si disponibles, sinon afficher un message\n        const receivedMessages = [];\n        const sentMessages = [];\n        const archivedMessages = [];\n        \n        const hasMessages = receivedMessages.length > 0 || sentMessages.length > 0 || archivedMessages.length > 0;        const getMessagesToShow = () => {\n          switch (messageTab) {\n            case 'sent':\n              return sentMessages;\n            case 'archived':\n              return archivedMessages;\n            default:\n              return receivedMessages;\n          }\n        };\n\n        const messagesToShow = getMessagesToShow();\n\n        return (\n          <div className=\"space-y-6\">\n            {/* New Message Modal - Modernis√© */}\n            {showNewMessageModal && (\n              <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n                <div className=\"bg-white rounded-2xl shadow-2xl border-2 border-gray-200 max-w-2xl w-full max-h-[90vh] overflow-auto\">\n                  <div className=\"p-6\">\n                    <div className=\"flex items-center justify-between mb-6\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-cyan-600 to-teal-600 rounded-xl flex items-center justify-center shadow-md\">\n                          <Icon name=\"Mail\" size={20} className=\"text-white\" />\n                        </div>\n                        <h3 className=\"font-heading font-heading-bold text-xl text-gray-900\">\n                          Nouveau message\n                        </h3>\n                      </div>\n                      <button \n                        onClick={() => setShowNewMessageModal(false)}\n                        className=\"w-10 h-10 flex items-center justify-center rounded-xl text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-all\"\n                      >\n                        <Icon name=\"X\" size={24} />\n                      </button>\n                    </div>\n\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-body font-body-semibold mb-2 text-gray-700\">Destinataire</label>\n                        <select className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-cyan-600 focus:border-cyan-600 transition-all\">\n                          <option>S√©lectionner un destinataire...</option>\n                          <option>M. Nkolo (Math√©matiques)</option>\n                          <option>Mme Djomo (Fran√ßais)</option>\n                          <option>M. Fouda (Physique-Chimie)</option>\n                          <option>M. Kamga (Histoire-G√©ographie)</option>\n                          <option>Administration</option>\n                          <option>Vie scolaire</option>\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-body font-body-semibold mb-2 text-gray-700\">Objet</label>\n                        <input \n                          type=\"text\" \n                          className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-cyan-600 focus:border-cyan-600 transition-all\"\n                          placeholder=\"Entrez l'objet du message...\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-body font-body-semibold mb-2 text-gray-700\">Message</label>\n                        <textarea \n                          rows=\"8\"\n                          className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 focus:outline-none focus:ring-2 focus:ring-cyan-600 focus:border-cyan-600 resize-none transition-all\"\n                          placeholder=\"√âcrivez votre message ici...\"\n                        ></textarea>\n                      </div>\n\n                      <div className=\"flex items-center gap-2\">\n                        <button className=\"px-4 py-2 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 rounded-xl hover:from-gray-200 hover:to-gray-300 transition-all flex items-center gap-2 border-2 border-gray-300\">\n                          <Icon name=\"Paperclip\" size={18} />\n                          Joindre un fichier\n                        </button>\n                      </div>\n\n                      <div className=\"flex items-center gap-3 pt-4 border-t-2 border-gray-100\">\n                        <button \n                          onClick={() => {\n                            setShowNewMessageModal(false);\n                            // Logique d'envoi ici\n                          }}\n                          className=\"px-6 py-3 bg-gradient-to-r from-cyan-600 to-teal-600 text-white rounded-xl hover:from-cyan-700 hover:to-teal-700 hover:shadow-lg transition-all flex items-center gap-2 font-semibold\"\n                        >\n                          <Icon name=\"Send\" size={18} />\n                          Envoyer\n                        </button>\n                        <button \n                          onClick={() => setShowNewMessageModal(false)}\n                          className=\"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all font-semibold\"\n                        >\n                          Annuler\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Header modernis√© */}\n            <div className=\"bg-gradient-to-br from-cyan-600 to-teal-600 rounded-2xl shadow-xl p-6 text-white\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl\">\n                    üí¨\n                  </div>\n                  <div>\n                    <h2 className=\"font-heading font-heading-bold text-2xl\">\n                      Mes Messages\n                    </h2>\n                    <p className=\"text-cyan-100 text-sm mt-1\">\n                      {hasMessages ? 'Communication avec vos enseignants' : 'Aucun message pour le moment'}\n                    </p>\n                  </div>\n                </div>\n                <button \n                onClick={() => setShowNewMessageModal(true)}\n                className=\"px-4 py-2.5 bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white rounded-xl transition-all flex items-center gap-2 font-semibold shadow-lg hover:shadow-xl hover:scale-105\"\n              >\n                <Icon name=\"Plus\" size={18} />\n                <span className=\"hidden sm:inline\">Nouveau message</span>\n              </button>\n            </div>\n            </div>\n\n            {!hasMessages ? (\n              <div className=\"bg-white rounded-2xl border-2 border-gray-200 shadow-lg p-12 text-center\">\n                <div className=\"inline-flex p-4 rounded-full bg-gradient-to-br from-cyan-100 to-teal-200 mb-4\">\n                  <Icon name=\"Mail\" size={48} className=\"text-cyan-600\" />\n                </div>\n                <h3 className=\"font-body-bold text-xl text-gray-900 mb-2\">\n                  Aucun message disponible\n                </h3>\n                <p className=\"text-gray-600 font-body-medium mb-6\">\n                  Vous n'avez pas encore de messages. Les communications avec vos enseignants appara√Ætront ici.\n                </p>\n                <button \n                  onClick={() => setShowNewMessageModal(true)}\n                  className=\"px-6 py-3 bg-gradient-to-r from-cyan-600 to-teal-600 text-white rounded-xl hover:from-cyan-700 hover:to-teal-700 transition-all flex items-center gap-2 font-semibold mx-auto shadow-lg hover:shadow-xl\"\n                >\n                  <Icon name=\"Plus\" size={18} />\n                  Envoyer un message\n                </button>\n              </div>\n            ) : (\n            <>\n            {/* Messages Tabs - Modernis√© */}\n            <div className=\"bg-white rounded-2xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n              <div className=\"border-b-2 border-gray-100\">\n                <div className=\"flex px-2\">\n                  <button \n                    onClick={() => setMessageTab('received')}\n                    className={`px-6 py-4 font-body text-sm border-b-4 transition-all duration-300 ${\n                      messageTab === 'received' \n                        ? 'font-body-bold border-cyan-600 text-cyan-900 bg-cyan-50/50' \n                        : 'font-body-medium border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <Icon name=\"Inbox\" size={18} />\n                      <span>Re√ßus</span>\n                      {receivedMessages.filter(m => !m.read).length > 0 && (\n                        <span className={`px-2.5 py-1 text-xs font-bold rounded-full ${\n                          messageTab === 'received'\n                            ? 'bg-cyan-600 text-white animate-pulse'\n                            : 'bg-cyan-100 text-cyan-700'\n                        }`}>\n                          {receivedMessages.filter(m => !m.read).length}\n                        </span>\n                      )}\n                    </div>\n                  </button>\n                  <button \n                    onClick={() => setMessageTab('sent')}\n                    className={`px-6 py-4 font-body text-sm border-b-4 transition-all duration-300 ${\n                      messageTab === 'sent' \n                        ? 'font-body-bold border-green-600 text-green-900 bg-green-50/50' \n                        : 'font-body-medium border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <Icon name=\"Send\" size={18} />\n                      <span>Envoy√©s</span>\n                      <span className={`px-2.5 py-1 text-xs font-bold rounded-full ${\n                        messageTab === 'sent'\n                          ? 'bg-green-600 text-white'\n                          : 'bg-green-100 text-green-700'\n                      }`}>\n                        {sentMessages.length}\n                      </span>\n                    </div>\n                  </button>\n                  <button \n                    onClick={() => setMessageTab('archived')}\n                    className={`px-6 py-4 font-body text-sm border-b-4 transition-all duration-300 ${\n                      messageTab === 'archived' \n                        ? 'font-body-bold border-purple-600 text-purple-900 bg-purple-50/50' \n                        : 'font-body-medium border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                    }`}\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <Icon name=\"Archive\" size={18} />\n                      <span>Archiv√©s</span>\n                      <span className={`px-2.5 py-1 text-xs font-bold rounded-full ${\n                        messageTab === 'archived'\n                          ? 'bg-purple-600 text-white'\n                          : 'bg-purple-100 text-purple-700'\n                      }`}>\n                        {archivedMessages.length}\n                      </span>\n                    </div>\n                  </button>\n                </div>\n              </div>\n\n              {/* Messages List - Modernis√© */}\n              <div className=\"divide-y-2 divide-gray-100\">\n                {messagesToShow.length === 0 ? (\n                  <div className=\"p-12 text-center\">\n                    <div className=\"inline-flex p-4 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 mb-4\">\n                      <Icon name=\"Mail\" size={48} className=\"text-gray-400\" />\n                    </div>\n                    <p className=\"text-gray-500 font-body-medium text-lg\">Aucun message dans cette cat√©gorie</p>\n                  </div>\n                ) : (\n                  messagesToShow.map((message) => (\n                    <div \n                      key={message.id}\n                      className={`p-5 hover:bg-gradient-to-r transition-all duration-300 cursor-pointer group ${\n                        !message.read && messageTab === 'received' \n                          ? 'bg-blue-50/50 hover:from-blue-50 hover:to-cyan-50 border-l-4 border-blue-500' \n                          : 'hover:from-gray-50 hover:to-gray-100/50 border-l-4 border-transparent hover:border-gray-300'\n                      }`}\n                    >\n                      <div className=\"flex items-start gap-4\">\n                        <div className={`w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-md transition-transform group-hover:scale-110 ${\n                          message.avatar === 'AlertCircle' ? 'bg-gradient-to-br from-orange-400 to-amber-500' :\n                          message.avatar === 'Calendar' ? 'bg-gradient-to-br from-pink-400 to-rose-500' :\n                          message.avatar === 'FileText' ? 'bg-gradient-to-br from-gray-400 to-slate-500' :\n                          message.categoryColor === 'purple' ? 'bg-gradient-to-br from-purple-400 to-violet-500' :\n                          message.categoryColor === 'green' ? 'bg-gradient-to-br from-green-400 to-emerald-500' :\n                          'bg-gradient-to-br from-blue-400 to-indigo-500'\n                        }`}>\n                          <Icon \n                            name={message.avatar} \n                            size={22} \n                            className=\"text-white\"\n                          />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <div className=\"flex items-center gap-2\">\n                              <span className={`text-sm ${\n                                !message.read && messageTab === 'received' ? 'font-body-bold text-gray-900' : 'font-body-medium text-gray-700'\n                              }`}>\n                                {messageTab === 'sent' ? message.to : message.from}\n                              </span>\n                              {!message.read && messageTab === 'received' && (\n                                <span className=\"px-2 py-0.5 bg-blue-600 text-white text-xs font-bold rounded-full animate-pulse\">Nouveau</span>\n                              )}\n                            </div>\n                            <span className=\"text-xs text-gray-500 font-body-medium\">{message.time}</span>\n                          </div>\n                          <h4 className={`text-sm mb-1 flex items-center gap-2 ${\n                            !message.read && messageTab === 'received' ? 'font-body-bold text-gray-900' : 'font-body-medium text-gray-800'\n                          }`}>\n                            {message.subject}\n                            {message.attachment && (\n                              <Icon name=\"Paperclip\" size={14} className=\"text-muted-foreground\" />\n                            )}\n                          </h4>\n                          <p className=\"text-sm text-gray-600 line-clamp-2 font-body\">\n                            {message.preview}\n                          </p>\n                          <div className=\"flex items-center gap-2 mt-3 flex-wrap\">\n                            {message.tags ? (\n                              message.tags.map((tag, idx) => (\n                                <span key={idx} className={`px-3 py-1 text-xs font-bold rounded-full shadow-sm ${\n                                  tag === 'Important' \n                                    ? 'bg-gradient-to-r from-orange-500 to-amber-500 text-white' \n                                    : 'bg-gray-200 text-gray-700'\n                                }`}>\n                                  {tag}\n                                </span>\n                              ))\n                            ) : (\n                              <span className={`px-3 py-1 text-xs font-bold rounded-full shadow-sm ${\n                                message.categoryColor === 'purple' ? 'bg-gradient-to-r from-purple-500 to-violet-500 text-white' :\n                                message.categoryColor === 'green' ? 'bg-gradient-to-r from-green-500 to-emerald-500 text-white' :\n                                'bg-gradient-to-r from-blue-500 to-indigo-500 text-white'\n                              }`}>\n                                {message.category}\n                              </span>\n                            )}\n                            {message.attachment && (\n                              <div className=\"flex items-center gap-1.5 px-3 py-1 bg-gray-100 rounded-full text-xs text-gray-700 font-body-medium\">\n                                <Icon name=\"File\" size={14} />\n                                <span>{message.attachment.name} ({message.attachment.size})</span>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                        <Icon name=\"ChevronRight\" size={20} className=\"text-gray-400 flex-shrink-0 group-hover:text-gray-600 transition-colors\" />\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n\n            {/* Statistics Cards - Modernis√© */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6\">\n              <div className=\"bg-white rounded-2xl border-2 border-blue-200 shadow-lg p-6 hover:shadow-xl transition-all hover:scale-105\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <span className=\"text-sm text-gray-600 font-body-medium\">Messages non lus</span>\n                  <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 shadow-md\">\n                    <Icon name=\"Mail\" size={20} className=\"text-white\" />\n                  </div>\n                </div>\n                <p className=\"text-3xl font-display font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent\">{receivedMessages.filter(m => !m.read).length}</p>\n              </div>\n              <div className=\"bg-white rounded-2xl border-2 border-green-200 shadow-lg p-6 hover:shadow-xl transition-all hover:scale-105\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <span className=\"text-sm text-gray-600 font-body-medium\">Messages envoy√©s</span>\n                  <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 shadow-md\">\n                    <Icon name=\"Send\" size={20} className=\"text-white\" />\n                  </div>\n                </div>\n                <p className=\"text-3xl font-display font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent\">{sentMessages.length}</p>\n              </div>\n              <div className=\"bg-white rounded-2xl border-2 border-purple-200 shadow-lg p-6 hover:shadow-xl transition-all hover:scale-105\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <span className=\"text-sm text-gray-600 font-body-medium\">Messages archiv√©s</span>\n                  <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-purple-500 to-violet-600 shadow-md\">\n                    <Icon name=\"Archive\" size={20} className=\"text-white\" />\n                  </div>\n                </div>\n                <p className=\"text-3xl font-display font-bold bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent\">{archivedMessages.length}</p>\n              </div>\n            </div>\n            </>\n            )}\n          </div>\n        );\n      \n      default:\n        // Dashboard complet\n        return (\n          <>\n            {/* Profile Card */}\n            <ProfileCard \n              student={studentData}\n              onPhotoUpdate={handlePhotoUpdate}\n            />\n\n            {/* Main Content Grid */}\n            <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\n              {/* Left Column - Grades and Assignments */}\n              <div className=\"xl:col-span-2 space-y-6\">\n                <GradesPanel grades={gradesData} />\n                <UpcomingAssignments assignments={assignmentsData} />\n              </div>\n\n              {/* Right Column - Attendance, Parent Info and Notifications */}\n              <div className=\"space-y-6\">\n                <AttendanceCalendar attendanceData={attendanceData} />\n                <ParentInfoCard parentInfo={studentProfile} />\n                <NotificationsPanel notifications={notificationsData} />\n              </div>\n            </div>\n\n            {/* Secondary Content Grid */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <BehaviorAssessment behaviorData={behaviorData} />\n              <AchievementBadges achievements={achievementsData} />\n            </div>\n          </>\n        );\n    }\n  };\n\n  // Affichage de l'√©tat de chargement\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <Header \n          userRole=\"student\" \n          userName=\"Chargement...\"\n          onToggleSidebar={() => setSidebarCollapsed(!sidebarCollapsed)}\n        />\n        <Sidebar \n          userRole=\"student\"\n          isCollapsed={sidebarCollapsed}\n          onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\n        />\n        <main className={`pt-20 sm:pt-16 transition-all duration-state ${\n          sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-64'\n        }`}>\n          <div className=\"p-4 lg:p-6 space-y-6\">\n            <div className=\"flex items-center justify-center h-96\">\n              <div className=\"text-center\">\n                <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4\"></div>\n                <p className=\"text-muted-foreground\">Chargement de vos donn√©es...</p>\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header \n        userRole=\"student\" \n        userName={studentData?.name}\n        onToggleSidebar={() => setSidebarCollapsed(!sidebarCollapsed)}\n      />\n      <Sidebar \n        userRole=\"student\"\n        isCollapsed={sidebarCollapsed}\n        onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\n      />\n      <main className={`pt-20 sm:pt-16 transition-all duration-state ${\n        sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-64'\n      }`}>\n        <div className=\"px-2 sm:px-4 lg:px-6 py-2 sm:py-3 space-y-2 sm:space-y-3 w-full overflow-x-hidden\">\n          {/* Error Banner - Modernis√© */}\n          {error && (\n            <div className=\"bg-gradient-to-r from-red-50 via-rose-50 to-pink-50 border-2 border-red-300 rounded-2xl p-5 shadow-lg\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-red-500 to-rose-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md\">\n                  <Icon name=\"AlertCircle\" size={24} className=\"text-white\" />\n                </div>\n                <div className=\"flex-1\">\n                  <p className=\"font-heading font-heading-semibold text-red-900 text-lg mb-1\">\n                    Erreur de chargement\n                  </p>\n                  <p className=\"text-sm text-red-800 leading-relaxed\">\n                    {error} - Affichage des donn√©es de d√©monstration.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Welcome Section - Modernis√© */}\n          <div className=\"bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl shadow-xl p-6 sm:p-8 text-white overflow-hidden relative\">\n            <div className=\"absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -mr-32 -mt-32\"></div>\n            <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-white opacity-5 rounded-full -ml-24 -mb-24\"></div>\n            <div className=\"relative z-10 flex flex-col lg:flex-row lg:items-center lg:justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center space-x-3 mb-3\">\n                  <div className=\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl\">\n                    üëã\n                  </div>\n                  <div>\n                    <h1 className=\"font-heading font-heading-bold text-2xl sm:text-3xl\">\n                      {getGreeting()}, {studentData?.name?.split(' ')?.[0]} !\n                    </h1>\n                    <p className=\"text-blue-100 text-sm mt-1\">\n                      {currentTime?.toLocaleDateString('fr-FR', { \n                        weekday: 'long', \n                        year: 'numeric', \n                        month: 'long', \n                        day: 'numeric' \n                      })}\n                    </p>\n                  </div>\n                </div>\n                <p className=\"text-blue-100 text-base sm:text-lg mt-4 max-w-2xl\">\n                  Bienvenue sur votre espace personnel ! Consultez vos notes, devoirs et emploi du temps.\n                </p>\n              </div>\n              <div className=\"hidden lg:block mt-4 lg:mt-0\">\n                <div className=\"w-32 h-32 bg-white/10 backdrop-blur-sm rounded-2xl flex items-center justify-center text-6xl transform rotate-6 hover:rotate-0 transition-transform duration-300\">\n                  üéì\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Tab Content */}\n          {renderTabContent()}\n\n          {/* Quick Actions - Modernis√© */}\n          <div className=\"bg-white rounded-2xl border-2 border-gray-200 shadow-lg p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <div className=\"flex items-center\">\n                <div className=\"w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center mr-3 shadow-md\">\n                  <Icon name=\"Zap\" size={20} className=\"text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Actions Rapides</h3>\n                  <p className=\"text-xs text-gray-500\">Acc√®s direct √† vos outils</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4\">\n              <Link\n                to=\"/student-dashboard?tab=profile\"\n                className=\"group p-4 bg-gradient-to-br from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105\"\n              >\n                <div className=\"flex flex-col items-center text-center\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center mb-3 shadow-md group-hover:scale-110 transition-transform\">\n                    <Icon name=\"User\" size={24} className=\"text-white\" />\n                  </div>\n                  <span className=\"text-sm font-semibold text-blue-900\">\n                    Mon profil\n                  </span>\n                </div>\n              </Link>\n              \n              <Link\n                to=\"/student-dashboard?tab=grades\"\n                className=\"group p-4 bg-gradient-to-br from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 border-2 border-green-200 hover:border-green-400 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105\"\n              >\n                <div className=\"flex flex-col items-center text-center\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl flex items-center justify-center mb-3 shadow-md group-hover:scale-110 transition-transform\">\n                    <Icon name=\"FileBarChart\" size={24} className=\"text-white\" />\n                  </div>\n                  <span className=\"text-sm font-semibold text-green-900\">\n                    Mes notes\n                  </span>\n                </div>\n              </Link>\n\n              <Link\n                to=\"/student-dashboard?tab=assignments\"\n                className=\"group p-4 bg-gradient-to-br from-orange-50 to-amber-50 hover:from-orange-100 hover:to-amber-100 border-2 border-orange-200 hover:border-orange-400 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105\"\n              >\n                <div className=\"flex flex-col items-center text-center\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-orange-600 to-amber-600 rounded-xl flex items-center justify-center mb-3 shadow-md group-hover:scale-110 transition-transform\">\n                    <Icon name=\"FileText\" size={24} className=\"text-white\" />\n                  </div>\n                  <span className=\"text-sm font-semibold text-orange-900\">\n                    Mes devoirs\n                  </span>\n                </div>\n              </Link>\n\n              <Link\n                to=\"/student-dashboard?tab=schedule\"\n                className=\"group p-4 bg-gradient-to-br from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105\"\n              >\n                <div className=\"flex flex-col items-center text-center\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center mb-3 shadow-md group-hover:scale-110 transition-transform\">\n                    <Icon name=\"Calendar\" size={24} className=\"text-white\" />\n                  </div>\n                  <span className=\"text-sm font-semibold text-purple-900\">\n                    Emploi du temps\n                  </span>\n                </div>\n              </Link>\n\n              <Link\n                to=\"/student-dashboard?tab=messages\"\n                className=\"group p-4 bg-gradient-to-br from-cyan-50 to-teal-50 hover:from-cyan-100 hover:to-teal-100 border-2 border-cyan-200 hover:border-cyan-400 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105\"\n              >\n                <div className=\"flex flex-col items-center text-center\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-cyan-600 to-teal-600 rounded-xl flex items-center justify-center mb-3 shadow-md group-hover:scale-110 transition-transform\">\n                    <Icon name=\"MessageSquare\" size={24} className=\"text-white\" />\n                  </div>\n                  <span className=\"text-sm font-semibold text-cyan-900\">\n                    Messages\n                  </span>\n                </div>\n              </Link>\n\n              <Link\n                to=\"/student-dashboard?tab=documents\"\n                className=\"group p-4 bg-gradient-to-br from-red-50 to-rose-50 hover:from-red-100 hover:to-rose-100 border-2 border-red-200 hover:border-red-400 rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-105\"\n              >\n                <div className=\"flex flex-col items-center text-center\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-red-600 to-rose-600 rounded-xl flex items-center justify-center mb-3 shadow-md group-hover:scale-110 transition-transform\">\n                    <Icon name=\"Library\" size={24} className=\"text-white\" />\n                  </div>\n                  <span className=\"text-sm font-semibold text-red-900\">\n                    Documents\n                  </span>\n                </div>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default StudentDashboard;"],"names":["studentProductionDataService","studentId","data","error","supabase","studentInfo","studentError","gradesData","gradesError","averageGrade","subjMap","g","name","subjectsArray","computeSubjectAverage","acc","x","overall","computeOverallAverage","err","absencesData","absencesError","totalAbsences","justifiedAbsences","a","unjustifiedAbsences","lateArrivals","assignmentsData","assignmentsError","assignmentsDue","assignmentsCompleted","unreadNotifications","notifData","totalDays","attendanceRate","studentData","grades","grade","_a","_b","_c","attendance","record","assignments","assign","notifications","notif","notificationId","useStudentDashboardData","studentProfile","setStudentProfile","useState","stats","setStats","setGrades","setAttendance","setAssignments","setNotifications","achievements","setAchievements","behavior","setBehavior","schedule","setSchedule","loading","setLoading","setError","loadDashboardData","profileResult","statsResult","gradesResult","attendanceResult","assignmentsResult","notificationsResult","achievementsResult","behaviorResult","scheduleResult","rawGrades","schoolType","derivedAverage","prev","result","markNotificationAsRead","refresh","useEffect","ProfileCard","student","onPhotoUpdate","isEditing","setIsEditing","uploadingPhoto","setUploadingPhoto","handlePhotoUpload","event","file","newPhotoUrl","jsxs","jsx","Image","Button","Icon","GradesPanel","expandedSubjects","setExpandedSubjects","toggleSubject","subjectId","newExpanded","getGradeColor","getGradeBg","subject","assignment","AttendanceCalendar","attendanceData","currentMonth","setCurrentMonth","monthNames","dayNames","getDaysInMonth","date","year","month","firstDay","lastDay","daysInMonth","startingDayOfWeek","days","i","day","getAttendanceStatus","dateKey","getStatusColor","status","getStatusIcon","navigateMonth","direction","newDate","attendanceStats","_d","_f","_e","_h","_g","_i","index","statusIcon","Fragment","BehaviorAssessment","behaviorData","selectedPeriod","setSelectedPeriod","periods","getBehaviorIcon","type","currentData","e","period","_","category","comment","achievement","NotificationsPanel","filter","setFilter","showAll","setShowAll","filters","getNotificationIcon","getNotificationColor","priority","getPriorityBadge","filteredNotifications","notification","displayedNotifications","unreadCount","n","filterOption","UpcomingAssignments","getTypeIcon","getDaysLeft","dueDate","today","diffTime","filteredAssignments","sortedAssignments","b","daysLeft","isOverdue","resource","AchievementBadges","selectedCategory","setSelectedCategory","showDetails","setShowDetails","categories","getBadgeColor","rarity","baseColors","rarityColors","getBadgeIcon","getRarityLabel","filteredAchievements","earnedAchievements","availableAchievements","c","ParentInfoCard","parentInfo","hasParentName","hasParentPhone","hasParentEmail","StudentDashboard","sidebarCollapsed","setSidebarCollapsed","currentTime","setCurrentTime","searchParams","useSearchParams","activeTab","messageTab","setMessageTab","showNewMessageModal","setShowNewMessageModal","documentTab","setDocumentTab","studentUser","useRoleSession","authUser","useAuth","user","fetchedAttendance","fetchedAssignments","fetchedNotifications","fetchedAchievements","fetchedBehavior","fetchedSchedule","getGradesBySubject","subjectData","item","notificationsData","achievementsData","timer","handlePhotoUpdate","getGreeting","hour","renderTabContent","hasScheduleData","slot","course","colorClass","receivedDocuments","adminDocuments","d","doc","receivedMessages","sentMessages","archivedMessages","hasMessages","messagesToShow","m","message","tag","idx","Header","Sidebar","Link"],"mappings":"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"}