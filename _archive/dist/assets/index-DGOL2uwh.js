import{u as E,j as e}from"./contexts-fbpOeTmm.js";import{e as C,r as l,L as S}from"./react-vendor-CFDIsUAY.js";import{I as i,a as x,B as z}from"./index-BPV3rumr.js";import"./services-CdXttHtG.js";import"./supabase-CIvuJI4W.js";import"./ui-vendor-BrXTGbgA.js";const P=()=>{const p=C(),{login:h}=E(),[r,j]=l.useState({email:"",password:""}),[b,m]=l.useState(!1),[d,c]=l.useState(""),[o,g]=l.useState(!1),u=s=>{const{name:t,value:n}=s.target;j(a=>({...a,[t]:n})),d&&c("")},v=async s=>{if(s.preventDefault(),!r.email||!r.password){c("Veuillez remplir tous les champs");return}m(!0),c("");try{if(await f(r.email,r.password)){const n=w(r.email),a={id:Date.now(),email:r.email,name:y(r.email),role:n,avatar:N(n)};h(a),p(k(n))}else c("Email ou mot de passe incorrect")}catch(t){console.error("Erreur de connexion:",t),c("Erreur de connexion. Veuillez r√©essayer.")}finally{m(!1)}},f=async(s,t)=>(await new Promise(a=>setTimeout(a,1e3)),[{email:"admin@edutrack.cm",password:"admin123",role:"admin"},{email:"directeur@edutrack.cm",password:"dir123",role:"principal"},{email:"secretaire@edutrack.cm",password:"sec123",role:"secretary"},{email:"enseignant@edutrack.cm",password:"prof123",role:"teacher"},{email:"parent@edutrack.cm",password:"parent123",role:"parent"},{email:"eleve@edutrack.cm",password:"eleve123",role:"student"}].some(a=>a.email===s&&a.password===t)),w=s=>s.includes("admin")?"admin":s.includes("directeur")?"principal":s.includes("secretaire")?"secretary":s.includes("enseignant")?"teacher":s.includes("parent")?"parent":(s.includes("eleve"),"student"),y=s=>{const t=s.split("@")[0];return t.charAt(0).toUpperCase()+t.slice(1)},N=s=>({admin:"üë®‚Äçüíº",principal:"üéì",secretary:"üìã",teacher:"üë©‚Äçüè´",parent:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶",student:"üéí"})[s]||"üë§",k=s=>({admin:"/admin-dashboard",principal:"/principal-dashboard",secretary:"/secretary-dashboard",teacher:"/teacher-dashboard",parent:"/parent-dashboard",student:"/student-dashboard"})[s]||"/student-dashboard";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(i,{name:"GraduationCap",size:32,className:"text-blue-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"EduTrack CM"}),e.jsx("p",{className:"text-gray-600",children:"Connexion √† votre espace"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-8",children:[d&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3",children:[e.jsx(i,{name:"AlertCircle",size:20,className:"text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Erreur de connexion"}),e.jsx("p",{className:"text-red-700 text-sm",children:d})]})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsx(x,{label:"Adresse email",type:"email",name:"email",value:r.email,onChange:u,placeholder:"votre.email@exemple.com",icon:"Mail",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{label:"Mot de passe",type:o?"text":"password",name:"password",value:r.password,onChange:u,placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",icon:"Lock",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!o),className:"absolute right-3 top-[38px] text-gray-500 hover:text-gray-700 focus:outline-none",tabIndex:-1,children:e.jsx(i,{name:o?"EyeOff":"Eye",size:20})})]}),e.jsxs(z,{type:"submit",loading:b,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:!r.email||!r.password,children:[e.jsx(i,{name:"LogIn",size:16,className:"mr-2"}),"Se connecter"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(S,{to:"/password-recovery",className:"text-sm text-blue-600 hover:text-blue-700 hover:underline flex items-center justify-center",children:[e.jsx(i,{name:"HelpCircle",size:16,className:"mr-2"}),"Mot de passe oubli√© ?"]})})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(i,{name:"Info",size:20,className:"text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900",children:"Comptes de test disponibles"}),e.jsxs("div",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Admin:"})," admin@edutrack.cm / admin123"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Directeur:"})," directeur@edutrack.cm / dir123"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Secr√©taire:"})," secretaire@edutrack.cm / sec123"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Enseignant:"})," enseignant@edutrack.cm / prof123"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Parent:"})," parent@edutrack.cm / parent123"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"√âl√®ve:"})," eleve@edutrack.cm / eleve123"]})]})]})]})}),e.jsx("footer",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["¬© ",new Date().getFullYear()," EduTrack CM ‚Ä¢ Syst√®me de gestion scolaire"]})})]})})};export{P as default};
//# sourceMappingURL=index-DGOL2uwh.js.map
