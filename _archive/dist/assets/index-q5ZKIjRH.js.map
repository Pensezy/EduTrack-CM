{"version":3,"file":"index-q5ZKIjRH.js","sources":["../../src/pages/notification-management/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Helmet } from 'react-helmet';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Input from '../../components/ui/Input';\r\nimport useDashboardData from '../../hooks/useDashboardData';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { sendBulkNotification, isEmailConfigured } from '../../services/emailService';\r\n\r\nconst NotificationManagement = () => {\r\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [recentNotifications, setRecentNotifications] = useState([]);\r\n  const [notificationData, setNotificationData] = useState({\r\n    title: '',\r\n    message: '',\r\n    target: 'all',\r\n    priority: 'normal',\r\n    type: 'info'\r\n  });\r\n\r\n  // Hook pour r√©cup√©rer les donn√©es de production\r\n  const {\r\n    user\r\n  } = useDashboardData();\r\n\r\n  // Charger les notifications depuis Supabase\r\n  useEffect(() => {\r\n    if (user?.current_school_id) {\r\n      loadNotifications();\r\n    }\r\n  }, [user?.current_school_id]);\r\n\r\n  const loadNotifications = async () => {\r\n    try {\r\n      const { data: notifications, error } = await supabase\r\n        .from('notifications')\r\n        .select('*')\r\n        .eq('school_id', user.current_school_id)\r\n        .order('sent_at', { ascending: false })\r\n        .limit(10);\r\n\r\n      if (error) throw error;\r\n\r\n      setRecentNotifications(notifications || []);\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur chargement notifications:', error);\r\n    }\r\n  };\r\n\r\n  const toggleSidebar = () => {\r\n    setIsSidebarCollapsed(!isSidebarCollapsed);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNotificationData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSendNotification = async () => {\r\n    if (!notificationData.title || !notificationData.message) {\r\n      alert('Veuillez remplir le titre et le message');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      console.log('Envoi de la notification...');\r\n\r\n      // 1. R√©cup√©rer les destinataires selon le target\r\n      let recipients = [];\r\n      const { current_school_id } = user;\r\n\r\n      if (notificationData.target !== 'all') {\r\n        const table = notificationData.target === 'parents' ? 'parents' :\r\n                     notificationData.target === 'students' ? 'students' :\r\n                     notificationData.target === 'teachers' ? 'teachers' :\r\n                     notificationData.target === 'staff' ? 'users' : null;\r\n\r\n        if (table) {\r\n          const query = supabase\r\n            .from(table)\r\n            .select('email, full_name')\r\n            .eq('school_id', current_school_id)\r\n            .eq('is_active', true);\r\n\r\n          const { data: users } = await query;\r\n          \r\n          recipients = (users || [])\r\n            .filter(u => u.email)\r\n            .map(u => ({\r\n              email: u.email,\r\n              name: u.full_name\r\n            }));\r\n        }\r\n      }\r\n\r\n      // 2. Sauvegarder dans Supabase\r\n      const { data: savedNotification, error: saveError } = await supabase\r\n        .from('notifications')\r\n        .insert({\r\n          school_id: current_school_id,\r\n          sender_id: user.id,\r\n          title: notificationData.title,\r\n          message: notificationData.message,\r\n          target: notificationData.target,\r\n          priority: notificationData.priority,\r\n          type: notificationData.type,\r\n          status: 'sent',\r\n          recipients_count: recipients.length\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (saveError) throw saveError;\r\n\r\n      console.log('‚úÖ Notification sauvegard√©e:', savedNotification);\r\n\r\n      // 3. Envoyer les emails si EmailJS est configur√©\r\n      if (isEmailConfigured() && recipients.length > 0) {\r\n        const emailResult = await sendBulkNotification({\r\n          title: notificationData.title,\r\n          message: notificationData.message,\r\n          target: notificationData.target,\r\n          priority: notificationData.priority,\r\n          type: notificationData.type,\r\n          schoolName: user.schoolData?.name || '√âcole',\r\n          senderName: user.full_name || 'Directeur',\r\n          recipients\r\n        });\r\n\r\n        console.log('üìß R√©sultat envoi emails:', emailResult);\r\n        \r\n        alert(`‚úÖ Notification envoy√©e !\\n\\n${emailResult.message}\\n\\nNotification sauvegard√©e dans le syst√®me.`);\r\n      } else {\r\n        alert('‚úÖ Notification enregistr√©e avec succ√®s !\\n\\nNote : Service d\\'email non configur√©.');\r\n      }\r\n\r\n      // 4. Recharger les notifications et r√©initialiser le formulaire\r\n      await loadNotifications();\r\n      setNotificationData({\r\n        title: '',\r\n        message: '',\r\n        target: 'all',\r\n        priority: 'normal',\r\n        type: 'info'\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Erreur:', error);\r\n      alert('Erreur lors de l\\'envoi : ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Gestion des Notifications - EduTrack CM</title>\r\n        <meta name=\"description\" content=\"G√©rer et envoyer des notifications √† l'√©cole\" />\r\n      </Helmet>\r\n      \r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header \r\n          userRole=\"principal\" \r\n          userName={\r\n            user?.schoolData?.director_name || \r\n            user?.schoolData?.users?.full_name ||\r\n            user?.full_name ||\r\n            user?.email?.split('@')[0] || \r\n            'Directeur'\r\n          }\r\n          isCollapsed={isSidebarCollapsed}\r\n          onToggleSidebar={toggleSidebar}\r\n        />\r\n        \r\n        <div className=\"flex pt-16\">\r\n          <Sidebar \r\n            userRole=\"principal\"\r\n            isCollapsed={isSidebarCollapsed}\r\n            onToggle={toggleSidebar}\r\n          />\r\n          \r\n          <main className={`flex-1 transition-all duration-300 ${\r\n            isSidebarCollapsed ? 'lg:ml-20' : 'lg:ml-64'\r\n          } p-6`}>\r\n            \r\n\r\n            {/* Page Header */}\r\n            <div className=\"mb-8\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center\">\r\n                    <Icon name=\"Bell\" size={20} className=\"text-primary\" />\r\n                  </div>\r\n                  <h1 className=\"text-2xl font-heading font-heading-bold text-foreground\">\r\n                    Gestion des Notifications\r\n                  </h1>\r\n                </div>\r\n              </div>\r\n              <p className=\"text-muted-foreground\">\r\n                Envoyer des notifications et messages √† {user?.schoolData?.name || 'votre √©cole'}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n              {/* Nouvelle notification */}\r\n              <div className=\"bg-card border border-border rounded-lg p-6 shadow-card\">\r\n                <div className=\"flex items-center space-x-2 mb-6\">\r\n                  <Icon name=\"Plus\" size={20} className=\"text-primary\" />\r\n                  <h2 className=\"text-lg font-heading font-heading-semibold text-card-foreground\">\r\n                    Nouvelle Notification\r\n                  </h2>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                      Titre\r\n                    </label>\r\n                    <Input\r\n                      name=\"title\"\r\n                      value={notificationData.title}\r\n                      onChange={handleInputChange}\r\n                      placeholder=\"Titre de la notification\"\r\n                      className=\"w-full\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                      Message\r\n                    </label>\r\n                    <textarea\r\n                      name=\"message\"\r\n                      value={notificationData.message}\r\n                      onChange={handleInputChange}\r\n                      placeholder=\"Contenu du message...\"\r\n                      rows={4}\r\n                      className=\"w-full p-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                        Destinataires\r\n                      </label>\r\n                      <select\r\n                        name=\"target\"\r\n                        value={notificationData.target}\r\n                        onChange={handleInputChange}\r\n                        className=\"w-full p-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\r\n                      >\r\n                        <option value=\"all\">Tout le monde</option>\r\n                        <option value=\"students\">√âl√®ves</option>\r\n                        <option value=\"teachers\">Enseignants</option>\r\n                        <option value=\"parents\">Parents</option>\r\n                        <option value=\"staff\">Personnel</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                        Priorit√©\r\n                      </label>\r\n                      <select\r\n                        name=\"priority\"\r\n                        value={notificationData.priority}\r\n                        onChange={handleInputChange}\r\n                        className=\"w-full p-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary\"\r\n                      >\r\n                        <option value=\"low\">Faible</option>\r\n                        <option value=\"normal\">Normale</option>\r\n                        <option value=\"high\">√âlev√©e</option>\r\n                        <option value=\"urgent\">Urgente</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Button \r\n                    onClick={handleSendNotification}\r\n                    className=\"w-full\"\r\n                    disabled={!notificationData.title || !notificationData.message || loading}\r\n                    loading={loading}\r\n                  >\r\n                    <Icon name=\"Send\" size={16} className=\"mr-2\" />\r\n                    {loading ? 'Envoi en cours...' : 'Envoyer la Notification'}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Notifications r√©centes */}\r\n              <div className=\"bg-card border border-border rounded-lg p-6 shadow-card\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name=\"History\" size={20} className=\"text-primary\" />\r\n                    <h2 className=\"text-lg font-heading font-heading-semibold text-card-foreground\">\r\n                      Notifications R√©centes\r\n                    </h2>\r\n                  </div>\r\n                  <Button variant=\"ghost\" size=\"sm\">\r\n                    <Icon name=\"RefreshCw\" size={14} />\r\n                  </Button>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  {recentNotifications.map((notification) => (\r\n                    <div\r\n                      key={notification.id}\r\n                      className=\"p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors\"\r\n                    >\r\n                      <div className=\"flex items-start justify-between mb-2\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <h3 className=\"font-medium text-foreground\">\r\n                            {notification.title}\r\n                          </h3>\r\n                        </div>\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          {new Date(notification.sent_at || notification.date).toLocaleDateString('fr-FR')}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground mb-2\">\r\n                        {notification.message}\r\n                      </p>\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <span className=\"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary\">\r\n                          {notification.target}\r\n                        </span>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {notification.recipients_count > 0 && (\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {notification.recipients_count} destinataire(s)\r\n                            </span>\r\n                          )}\r\n                          <span className=\"text-xs flex items-center text-success\">\r\n                            <Icon name=\"CheckCircle\" size={12} className=\"mr-1\" />\r\n                            {notification.status === 'sent' ? 'Envoy√©' : '√âchou√©'}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NotificationManagement;"],"names":["NotificationManagement","isSidebarCollapsed","setIsSidebarCollapsed","useState","loading","setLoading","recentNotifications","setRecentNotifications","notificationData","setNotificationData","user","useDashboardData","useEffect","loadNotifications","notifications","error","supabase","toggleSidebar","handleInputChange","e","name","value","prev","handleSendNotification","recipients","current_school_id","table","query","users","u","savedNotification","saveError","isEmailConfigured","emailResult","sendBulkNotification","_a","jsxs","Fragment","Helmet","jsx","Header","_c","_b","_d","Sidebar","Icon","_e","Input","Button","notification"],"mappings":"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"}