const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/services-CdXttHtG.js","assets/supabase-CIvuJI4W.js"])))=>i.map(i=>d[i]);
import{s as C,_ as ae}from"./services-CdXttHtG.js";import{u as te,j as e}from"./contexts-fbpOeTmm.js";import{r as v,u as le}from"./react-vendor-CFDIsUAY.js";import{I as d,B as q,a as z}from"./index-BPV3rumr.js";import{p as re}from"./productionDataService-T6uUAzM-.js";import{u as ne}from"./useRoleSession-CjNGQy2C.js";import"./supabase-CIvuJI4W.js";import"./ui-vendor-BrXTGbgA.js";const ie=(i=null)=>{const{user:a}=te(),[p,f]=v.useState(null),[N,s]=v.useState(!0),[y,b]=v.useState(null),x=i||a;return v.useEffect(()=>{(async()=>{if(!x){s(!1);return}console.log("üë§ useUserProfile - Chargement profil pour:",x.email,"(ID:",x.id,")"),s(!0),b(null);try{const o=await oe(x);console.log("üìã Profil charg√©:",o),f(o)}catch(o){console.error("Erreur chargement profil:",o),b(o),f(ce(x))}finally{s(!1)}})()},[x]),{profile:p,loading:N,error:y}},oe=async i=>{var p,f,N,s,y,b,x,_,o,w,t;let a={id:i.id,full_name:i.full_name||((p=i.user_metadata)==null?void 0:p.full_name)||((f=i.email)==null?void 0:f.split("@")[0])||"Utilisateur",email:i.email,phone:i.phone||((N=i.user_metadata)==null?void 0:N.phone),role:i.role||((s=i.user_metadata)==null?void 0:s.role)||"student",avatar:i.avatar||((y=i.user_metadata)==null?void 0:y.avatar),created_at:i.created_at};try{switch(i.current_school_id&&re.setUserContext(i.id,i.current_school_id),a.role){case"principal":if(i.current_school_id||(b=i.schoolData)!=null&&b.id){const l=i.current_school_id||((x=i.schoolData)==null?void 0:x.id),n=await re.getSchoolDetails();if(n.data){const{data:m}=await C.from("users").select("id",{count:"exact"}).eq("current_school_id",l).in("role",["teacher","secretary"]),{data:E,count:r}=await C.from("students").select("id",{count:"exact",head:!0}).eq("school_id",l);a={...a,school_name:n.data.name||"√âcole non d√©finie",school_address:n.data.address||"Adresse non d√©finie",school_city:n.data.city||"",school_country:n.data.country||"",school_phone:n.data.phone||"",school_code:n.data.code||"",position:"Directeur d'√âtablissement",experience:"Non d√©fini",specialization:"Administration Scolaire",employees_count:(m==null?void 0:m.length)||0,students_count:r||0,classes_managed:n.data.available_classes||[],school_type:n.data.type||"Non d√©fini",school_status:n.data.status||"active"}}}break;case"teacher":if(i.current_school_id){const{data:l}=await C.from("teachers").select("*, classes(name)").eq("user_id",i.id).eq("is_active",!0).maybeSingle();if(l){a={...a,full_name:a.full_name||`${l.first_name} ${l.last_name}`,subject:l.specialty||"Mati√®re non d√©finie",degree:l.degree||"Non d√©fini",experience:l.hire_date?`${new Date().getFullYear()-new Date(l.hire_date).getFullYear()} ans`:"Non d√©fini",classes:((_=l.classes)==null?void 0:_.map(m=>m.name))||[],phone:l.phone||a.phone};const{count:n}=await C.from("students").select("id",{count:"exact",head:!0}).eq("school_id",i.current_school_id);a.students_count=n||0}}break;case"student":const{data:u,error:h}=await C.from("students").select(`
            *,
            classes(name),
            schools(name)
          `).eq("user_id",i.id).maybeSingle();if(console.log("üìö Donn√©es √©tudiant charg√©es:",u),u){let l=null;const{data:n}=await C.from("parent_students").select(`
              parent_id,
              relationship,
              is_primary,
              parents!inner(
                id,
                user_id,
                profession,
                address,
                emergency_contact,
                users!inner(id, full_name, phone, email)
              )
            `).eq("student_id",u.id).eq("is_primary",!0).maybeSingle();if((o=n==null?void 0:n.parents)!=null&&o.users){const m=n.parents,E=m.users;l={id:E.id,name:E.full_name||"Non d√©fini",phone:E.phone||"Non d√©fini",email:E.email||"Non d√©fini",profession:m.profession||null,address:m.address||null,emergency_contact:m.emergency_contact||null,relationship:n.relationship||"Parent"}}else if(u.parent_id){const{data:m}=await C.from("parents").select(`
                *,
                users!inner(id, full_name, phone, email)
              `).eq("id",u.parent_id).maybeSingle();m!=null&&m.users&&(l={id:m.users.id,name:m.users.full_name||"Non d√©fini",phone:m.users.phone||"Non d√©fini",email:m.users.email||"Non d√©fini",profession:m.profession||null,address:m.address||null,emergency_contact:m.emergency_contact||null,relationship:"Parent"})}a={...a,full_name:u.first_name&&u.last_name?`${u.first_name} ${u.last_name}`:a.full_name,class_name:((w=u.classes)==null?void 0:w.name)||"Non assign√©",school_name:((t=u.schools)==null?void 0:t.name)||"√âcole non d√©finie",student_id:u.student_number||"Non d√©fini",birth_date:u.birth_date||"Non d√©fini",parent_name:(l==null?void 0:l.name)||"Non d√©fini",parent_phone:(l==null?void 0:l.phone)||"Non d√©fini",parent_email:(l==null?void 0:l.email)||null,parent_profession:(l==null?void 0:l.profession)||null,parent_address:(l==null?void 0:l.address)||null,parent_emergency_contact:(l==null?void 0:l.emergency_contact)||null,parent_relationship:(l==null?void 0:l.relationship)||null,phone:u.phone||a.phone,gender:u.gender||"Non d√©fini",average_grade:"√Ä calculer",attendance_rate:"√Ä calculer",subjects:[]}}break;case"secretary":if(i.current_school_id){const{data:l}=await C.from("schools").select("name, address").eq("id",i.current_school_id).maybeSingle();a={...a,position:"Secr√©taire",school_name:(l==null?void 0:l.name)||"√âcole non d√©finie",specialization:"Gestion Administrative",permissions:["Gestion √âtudiants","Documents Administratifs"]}}break;default:break}}catch(u){console.warn("Erreur chargement donn√©es sp√©cifiques:",u)}return a},ce=i=>{var a;return{id:i.id,full_name:i.full_name||((a=i.email)==null?void 0:a.split("@")[0])||"Utilisateur",email:i.email,role:i.role||"student",phone:i.phone||"Non d√©fini"}},je=()=>{const i=le(),{user:a}=te();console.log("üîç ProfileSettings - AuthUser re√ßu:",a==null?void 0:a.email,"Role:",a==null?void 0:a.role,"ID:",a==null?void 0:a.id);let p=a,f=(a==null?void 0:a.role)||"student";if(!(a!=null&&a.role)){const r=i.pathname;r.includes("principal")?f="principal":r.includes("teacher")?f="teacher":r.includes("parent")?f="parent":r.includes("secretary")&&(f="secretary")}const{user:N}=ne(f);!p&&N&&(p=N,console.log("üë§ ProfileSettings - Utilisation RoleSession (fallback):",N.email)),console.log("‚úÖ ProfileSettings - Utilisateur final s√©lectionn√©:",p==null?void 0:p.email,"(r√¥le:",p==null?void 0:p.role,")");const{profile:s,loading:y,error:b}=ie(p),[x,_]=v.useState(!1),[o,w]=v.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[t,u]=v.useState({current:!1,new:!1,confirm:!1});if(y||!p)return e.jsx("div",{className:"max-w-2xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-6",children:[e.jsxs("div",{className:"animate-pulse flex space-x-4",children:[e.jsx("div",{className:"rounded-full bg-gray-200 h-16 w-16"}),e.jsxs("div",{className:"flex-1 space-y-2 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3 mt-2"})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/5"})]})]})});if(b&&!y)return e.jsx("div",{className:"max-w-2xl mx-auto p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"AlertCircle",size:20,className:"text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-900",children:"Erreur de chargement"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Impossible de charger les informations du profil. Veuillez actualiser la page."})]})]})})});const l=(r=>{const c=r.length>=8,S=/[A-Z]/.test(r),P=/[a-z]/.test(r),k=/\d/.test(r),j=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(r);return{isValid:c&&S&&P&&k&&j,criteria:{minLength:c,hasUpper:S,hasLower:P,hasNumber:k,hasSpecial:j}}})(o.newPassword),n=async()=>{if(!o.currentPassword||!o.newPassword||!o.confirmPassword){alert("Veuillez remplir tous les champs");return}if(o.newPassword!==o.confirmPassword){alert("Les nouveaux mots de passe ne correspondent pas");return}if(!l.isValid){alert("Le nouveau mot de passe ne respecte pas les crit√®res de s√©curit√©");return}try{await new Promise(r=>setTimeout(r,1e3)),alert("Mot de passe chang√© avec succ√®s !"),w({currentPassword:"",newPassword:"",confirmPassword:""}),_(!1)}catch(r){console.error("Erreur changement mot de passe:",r),alert("Erreur lors du changement de mot de passe. Veuillez r√©essayer.")}},m=()=>{const r="abcdefghijklmnopqrstuvwxyz",c="ABCDEFGHIJKLMNOPQRSTUVWXYZ",S="0123456789",P="!@#$%^&*()_+-=[]{}|;:,.<>?",k=r+c+S+P;let j="";j+=r[Math.floor(Math.random()*r.length)],j+=c[Math.floor(Math.random()*c.length)],j+=S[Math.floor(Math.random()*S.length)],j+=P[Math.floor(Math.random()*P.length)];for(let D=4;D<12;D++)j+=k[Math.floor(Math.random()*k.length)];return j.split("").sort(()=>Math.random()-.5).join("")},E=()=>{const r=m();w(c=>({...c,newPassword:r,confirmPassword:r}))};return e.jsx("div",{className:"max-w-2xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${s.role==="principal"?"bg-purple-100":s.role==="teacher"?"bg-green-100":s.role==="secretary"?"bg-blue-100":s.role==="student"?"bg-yellow-100":s.role==="parent"?"bg-pink-100":"bg-gray-100"}`,children:e.jsx(d,{name:s.role==="principal"?"Crown":s.role==="teacher"?"GraduationCap":s.role==="secretary"?"UserCheck":s.role==="student"?"BookOpen":s.role==="parent"?"Users":"User",size:24,className:s.role==="principal"?"text-purple-600":s.role==="teacher"?"text-green-600":s.role==="secretary"?"text-blue-600":s.role==="student"?"text-yellow-600":s.role==="parent"?"text-pink-600":"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.role==="principal"?"bg-purple-100 text-purple-800":s.role==="teacher"?"bg-green-100 text-green-800":s.role==="secretary"?"bg-blue-100 text-blue-800":s.role==="student"?"bg-yellow-100 text-yellow-800":s.role==="parent"?"bg-pink-100 text-pink-800":"bg-gray-100 text-gray-800"}`,children:s.role==="principal"?"Directeur":s.role==="teacher"?"Enseignant":s.role==="secretary"?"Secr√©taire":s.role==="student"?"√âtudiant":s.role==="parent"?"Parent":s.role}),s.position&&e.jsxs("span",{className:"text-xs text-gray-500",children:["‚Ä¢ ",s.position]})]})]})]})})}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations du profil"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:s.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T√©l√©phone"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:s.phone||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"R√¥le"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:s.role==="principal"?"Directeur d'√âtablissement":s.role==="teacher"?"Enseignant":s.role==="secretary"?"Secr√©taire":s.role==="student"?"√âtudiant":s.role==="parent"?"Parent d'√âl√®ve":s.role})]})]}),s.role==="principal"&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-purple-900 mb-3 flex items-center",children:[e.jsx(d,{name:"Crown",size:16,className:"mr-2"}),"Informations Directeur"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"√âtablissement"}),e.jsx("p",{className:"text-sm text-purple-900 bg-white p-2 rounded",children:s.school_name||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Exp√©rience"}),e.jsx("p",{className:"text-sm text-purple-900 bg-white p-2 rounded",children:s.experience||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Personnel g√©r√©"}),e.jsxs("p",{className:"text-sm text-purple-900 bg-white p-2 rounded",children:[s.employees_count||0," employ√©s"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"√âl√®ves"}),e.jsxs("p",{className:"text-sm text-purple-900 bg-white p-2 rounded",children:[s.students_count||0," √©tudiants"]})]}),s.school_address&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Adresse √©tablissement"}),e.jsx("p",{className:"text-sm text-purple-900 bg-white p-2 rounded",children:s.school_address})]}),s.classes_managed&&s.classes_managed.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-1",children:"Classes de l'√©tablissement"}),e.jsx("div",{className:"bg-white p-2 rounded",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.classes_managed.map((r,c)=>e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs",children:r},c))})})]})]})]}),s.role==="teacher"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-green-900 mb-3 flex items-center",children:[e.jsx(d,{name:"GraduationCap",size:16,className:"mr-2"}),"Informations Enseignant"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Mati√®re enseign√©e"}),e.jsx("p",{className:"text-sm text-green-900 bg-white p-2 rounded",children:s.subject||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Exp√©rience"}),e.jsx("p",{className:"text-sm text-green-900 bg-white p-2 rounded",children:s.experience||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Nombre d'√©l√®ves"}),e.jsxs("p",{className:"text-sm text-green-900 bg-white p-2 rounded",children:[s.students_count||0," √©tudiants"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Dipl√¥me"}),e.jsx("p",{className:"text-sm text-green-900 bg-white p-2 rounded",children:s.degree||"Non d√©fini"})]}),s.classes&&s.classes.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Classes enseign√©es"}),e.jsx("div",{className:"bg-white p-2 rounded",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.classes.map((r,c)=>e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:r},c))})})]}),s.specialization&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Sp√©cialisation"}),e.jsx("p",{className:"text-sm text-green-900 bg-white p-2 rounded",children:s.specialization})]})]})]}),s.role==="secretary"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-3 flex items-center",children:[e.jsx(d,{name:"UserCheck",size:16,className:"mr-2"}),"Informations Secr√©taire"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Position"}),e.jsx("p",{className:"text-sm text-blue-900 bg-white p-2 rounded",children:s.position||"Secr√©taire"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Exp√©rience"}),e.jsx("p",{className:"text-sm text-blue-900 bg-white p-2 rounded",children:s.experience||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Horaires"}),e.jsx("p",{className:"text-sm text-blue-900 bg-white p-2 rounded",children:s.schedule||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Sp√©cialisation"}),e.jsx("p",{className:"text-sm text-blue-900 bg-white p-2 rounded",children:s.specialization||"Non d√©fini"})]}),s.permissions&&s.permissions.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Permissions"}),e.jsx("div",{className:"bg-white p-2 rounded",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.permissions.map((r,c)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:r},c))})})]})]})]}),s.role==="student"&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-yellow-900 mb-3 flex items-center",children:[e.jsx(d,{name:"BookOpen",size:16,className:"mr-2"}),"Informations √âtudiant"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-1",children:"Classe"}),e.jsx("p",{className:"text-sm text-yellow-900 bg-white p-2 rounded",children:s.class_name||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-1",children:"Num√©ro √©tudiant"}),e.jsx("p",{className:"text-sm text-yellow-900 bg-white p-2 rounded",children:s.student_id||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-1",children:"Date de naissance"}),e.jsx("p",{className:"text-sm text-yellow-900 bg-white p-2 rounded",children:s.birth_date?new Date(s.birth_date).toLocaleDateString("fr-FR"):"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-1",children:"Genre"}),e.jsx("p",{className:"text-sm text-yellow-900 bg-white p-2 rounded",children:s.gender==="M"?"Masculin":s.gender==="F"?"F√©minin":"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-1",children:"Moyenne g√©n√©rale"}),e.jsx("p",{className:"text-sm text-yellow-900 bg-white p-2 rounded",children:s.average_grade||"Non calcul√©e"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-1",children:"Taux de pr√©sence"}),e.jsx("p",{className:"text-sm text-yellow-900 bg-white p-2 rounded",children:s.attendance_rate||"Non calcul√©"})]}),s.subjects&&s.subjects.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-1",children:"Mati√®res √©tudi√©es"}),e.jsx("div",{className:"bg-white p-2 rounded",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.subjects.map((r,c)=>e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs",children:r},c))})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-yellow-300",children:[e.jsxs("h5",{className:"font-medium text-yellow-900 mb-3 flex items-center",children:[e.jsx(d,{name:"Users",size:16,className:"mr-2"}),"Informations Parent / Tuteur"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 p-3 rounded-lg border border-yellow-300",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-200 rounded-full flex items-center justify-center",children:e.jsx(d,{name:"User",size:20,className:"text-yellow-700"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-yellow-700 mb-1",children:"Nom complet"}),e.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:s.parent_name||"Non d√©fini"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 p-3 rounded-lg border border-yellow-300",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-200 rounded-full flex items-center justify-center",children:e.jsx(d,{name:"Phone",size:20,className:"text-yellow-700"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-yellow-700 mb-1",children:"T√©l√©phone"}),e.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:s.parent_phone||"Non d√©fini"})]})]})}),s.parent_email&&e.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 p-3 rounded-lg border border-yellow-300",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-200 rounded-full flex items-center justify-center",children:e.jsx(d,{name:"Mail",size:20,className:"text-yellow-700"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-yellow-700 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:s.parent_email})]})]})}),s.parent_profession&&e.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 p-3 rounded-lg border border-yellow-300",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-200 rounded-full flex items-center justify-center",children:e.jsx(d,{name:"Briefcase",size:20,className:"text-yellow-700"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-yellow-700 mb-1",children:"Profession"}),e.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:s.parent_profession})]})]})})]}),e.jsx("div",{className:"mt-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(d,{name:"Info",size:16,className:"text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-900 font-medium",children:"Informations importantes"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"En cas d'urgence ou pour toute question concernant votre scolarit√©, votre parent/tuteur peut √™tre contact√© aux coordonn√©es ci-dessus."})]})]})})]})]}),s.role==="parent"&&e.jsxs("div",{className:"bg-pink-50 border border-pink-200 rounded-lg p-4 mb-4",children:[e.jsxs("h4",{className:"font-medium text-pink-900 mb-3 flex items-center",children:[e.jsx(d,{name:"Users",size:16,className:"mr-2"}),"Informations Parent"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-pink-700 mb-1",children:"Profession"}),e.jsx("p",{className:"text-sm text-pink-900 bg-white p-2 rounded",children:s.profession||"Non d√©fini"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-pink-700 mb-1",children:"Contact d'urgence"}),e.jsx("p",{className:"text-sm text-pink-900 bg-white p-2 rounded",children:s.emergency_contact||"Non d√©fini"})]}),s.address&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-pink-700 mb-1",children:"Adresse"}),e.jsx("p",{className:"text-sm text-pink-900 bg-white p-2 rounded",children:s.address})]}),s.children&&s.children.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-pink-700 mb-1",children:"Enfants scolaris√©s"}),e.jsx("div",{className:"bg-white p-2 rounded space-y-2",children:s.children.map((r,c)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-pink-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-pink-900",children:r.name}),e.jsxs("span",{className:"text-sm text-pink-700 ml-2",children:["Classe: ",r.class]})]}),e.jsxs("span",{className:"text-sm text-pink-600",children:["Moyenne: ",r.average]})]},c))})]})]})]}),s.certifications&&s.certifications.length>0&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(d,{name:"Award",size:16,className:"mr-2"}),"Certifications & Formations"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.certifications.map((r,c)=>e.jsx("span",{className:"px-3 py-1 bg-white border border-gray-300 text-gray-700 rounded-full text-sm",children:r},c))})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"S√©curit√© du compte"}),!x&&e.jsxs(q,{onClick:()=>_(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(d,{name:"Lock",size:16,className:"mr-2"}),"Changer le mot de passe"]})]}),x?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(d,{name:"Info",size:20,className:"text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Changement de mot de passe"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Pour votre s√©curit√©, votre nouveau mot de passe doit respecter tous les crit√®res list√©s ci-dessous."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(z,{label:"Mot de passe actuel",type:t.current?"text":"password",value:o.currentPassword,onChange:r=>w(c=>({...c,currentPassword:r.target.value})),placeholder:"Saisissez votre mot de passe actuel",rightIcon:e.jsx("button",{type:"button",onClick:()=>u(r=>({...r,current:!r.current})),className:"text-gray-400 hover:text-gray-600",children:e.jsx(d,{name:t.current?"EyeOff":"Eye",size:16})})})}),e.jsxs("div",{children:[e.jsx(z,{label:"Nouveau mot de passe",type:t.new?"text":"password",value:o.newPassword,onChange:r=>w(c=>({...c,newPassword:r.target.value})),placeholder:"Saisissez votre nouveau mot de passe",rightIcon:e.jsx("button",{type:"button",onClick:()=>u(r=>({...r,new:!r.new})),className:"text-gray-400 hover:text-gray-600",children:e.jsx(d,{name:t.new?"EyeOff":"Eye",size:16})})}),e.jsxs(q,{type:"button",variant:"outline",size:"sm",onClick:E,className:"mt-2",children:[e.jsx(d,{name:"Shuffle",size:14,className:"mr-2"}),"G√©n√©rer un mot de passe s√©curis√©"]})]}),e.jsx("div",{children:e.jsx(z,{label:"Confirmer le nouveau mot de passe",type:t.confirm?"text":"password",value:o.confirmPassword,onChange:r=>w(c=>({...c,confirmPassword:r.target.value})),placeholder:"Confirmez votre nouveau mot de passe",rightIcon:e.jsx("button",{type:"button",onClick:()=>u(r=>({...r,confirm:!r.confirm})),className:"text-gray-400 hover:text-gray-600",children:e.jsx(d,{name:t.confirm?"EyeOff":"Eye",size:16})})})}),o.newPassword&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Crit√®res de s√©curit√©"}),e.jsx("div",{className:"space-y-2",children:[{key:"minLength",label:"Au moins 8 caract√®res"},{key:"hasUpper",label:"Au moins une lettre majuscule (A-Z)"},{key:"hasLower",label:"Au moins une lettre minuscule (a-z)"},{key:"hasNumber",label:"Au moins un chiffre (0-9)"},{key:"hasSpecial",label:"Au moins un caract√®re sp√©cial (!@#$...)"}].map(({key:r,label:c})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{name:l.criteria[r]?"CheckCircle":"XCircle",size:16,className:l.criteria[r]?"text-green-600":"text-red-500"}),e.jsx("span",{className:`text-sm ${l.criteria[r]?"text-green-700":"text-red-600"}`,children:c})]},r))})]}),o.newPassword&&o.confirmPassword&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{name:o.newPassword===o.confirmPassword?"CheckCircle":"XCircle",size:16,className:o.newPassword===o.confirmPassword?"text-green-600":"text-red-500"}),e.jsxs("span",{className:`text-sm ${o.newPassword===o.confirmPassword?"text-green-700":"text-red-600"}`,children:["Les mots de passe ",o.newPassword===o.confirmPassword?"correspondent":"ne correspondent pas"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[e.jsx(q,{variant:"outline",onClick:()=>{_(!1),w({currentPassword:"",newPassword:"",confirmPassword:""})},children:"Annuler"}),e.jsxs(q,{onClick:n,disabled:!l.isValid||o.newPassword!==o.confirmPassword,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300",children:[e.jsx(d,{name:"Save",size:16,className:"mr-2"}),"Changer le mot de passe"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"Shield",size:20,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"S√©curit√© du compte"}),e.jsx("p",{className:"text-sm text-green-700",children:"Votre compte est s√©curis√©. Changez r√©guli√®rement votre mot de passe pour maintenir la s√©curit√©."})]})]})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:e.jsx("strong",{children:"Recommandations de s√©curit√© :"})}),e.jsxs("ul",{className:"mt-2 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Changez votre mot de passe tous les 3 mois"}),e.jsx("li",{children:"Utilisez un mot de passe unique pour cette plateforme"}),e.jsx("li",{children:"Ne partagez jamais vos identifiants"}),e.jsx("li",{children:"D√©connectez-vous apr√®s chaque session"})]})]})]})]}),e.jsx(de,{userRole:s==null?void 0:s.role,userId:p==null?void 0:p.id,userEmail:p==null?void 0:p.email})]})})},de=({userRole:i,userId:a,userEmail:p})=>{const[f,N]=v.useState(!1),[s,y]=v.useState(""),[b,x]=v.useState(!1),[_,o]=v.useState(null),w=async()=>{if(s!=="SUPPRIMER MON COMPTE"){alert('Veuillez taper exactement "SUPPRIMER MON COMPTE" pour confirmer');return}x(!0),o(null);try{const{supabase:t}=await ae(async()=>{const{supabase:h}=await import("./services-CdXttHtG.js").then(l=>l.a);return{supabase:h}},__vite__mapDeps([0,1]));if(i==="principal"){const{data:h,error:l}=await t.from("users").select("current_school_id").eq("id",a).single();if(l)throw console.error("‚ùå Erreur lors de la r√©cup√©ration des donn√©es utilisateur:",l),new Error(`Impossible de r√©cup√©rer les donn√©es utilisateur: ${l.message}`);if(h!=null&&h.current_school_id){const n=h.current_school_id;console.log("üóëÔ∏è D√©but de la suppression compl√®te de l'√©cole et de toutes ses donn√©es..."),console.log(`üìã √âcole ID: ${n}`);try{console.log("1/7 Suppression des notes...");const{error:m}=await t.from("grades").delete().eq("school_id",n);m&&console.error("Erreur suppression notes:",m),console.log("2/7 Suppression des pr√©sences...");const{error:E}=await t.from("attendances").delete().eq("school_id",n);E&&console.error("Erreur suppression pr√©sences:",E),console.log("3/7 Suppression des paiements...");const{error:r}=await t.from("payments").delete().eq("school_id",n);r&&console.error("Erreur suppression paiements:",r),console.log("4/7 Suppression des notifications...");const{error:c}=await t.from("notifications").delete().eq("school_id",n);c&&console.error("Erreur suppression notifications:",c),console.log("   Suppression des communications...");const{error:S}=await t.from("communications").delete().eq("school_id",n);S&&console.error("Erreur suppression communications:",S),console.log("   Suppression des mod√®les de messages...");const{error:P}=await t.from("message_templates").delete().eq("school_id",n);P&&console.error("Erreur suppression mod√®les messages:",P),console.log("   Suppression des logs d'audit...");const{error:k}=await t.from("audit_logs").delete().eq("school_id",n);k&&console.error("Erreur suppression audit logs:",k),console.log("   Suppression des relations classes-mati√®res...");const{error:j}=await t.from("class_subjects").delete().eq("school_id",n);j&&console.error("Erreur suppression class_subjects:",j),console.log("   Suppression des relations enseignants-mati√®res...");const{error:D}=await t.from("teacher_subjects").delete().eq("school_id",n);D&&console.error("Erreur suppression teacher_subjects:",D),console.log("   Suppression des relations parents-√©tudiants...");const{error:U}=await t.from("parent_student_schools").delete().eq("school_id",n);U&&console.error("Erreur suppression parent_student_schools:",U),console.log("5/7 Suppression des √©tudiants...");const{data:T,error:L}=await t.from("students").select("user_id").eq("school_id",n);L&&console.error("Erreur r√©cup√©ration √©tudiants:",L);const{error:$}=await t.from("students").delete().eq("school_id",n);$&&console.error("Erreur suppression √©tudiants:",$),console.log("   Suppression des enseignants...");const{data:M,error:V}=await t.from("teachers").select("user_id").eq("school_id",n);V&&console.error("Erreur r√©cup√©ration enseignants:",V);const{error:F}=await t.from("teachers").delete().eq("school_id",n);F&&console.error("Erreur suppression enseignants:",F),console.log("   Suppression des parents...");const{data:A,error:G}=await t.from("parents").select("user_id").eq("school_id",n);G&&console.error("Erreur r√©cup√©ration parents:",G);const{error:B}=await t.from("parents").delete().eq("school_id",n);B&&console.error("Erreur suppression parents:",B),console.log("   Suppression des secr√©taires...");const{data:I,error:Z}=await t.from("secretaries").select("user_id").eq("school_id",n);Z&&console.error("Erreur r√©cup√©ration secr√©taires:",Z);const{error:Y}=await t.from("secretaries").delete().eq("school_id",n);Y&&console.error("Erreur suppression secr√©taires:",Y);const R=[...(T==null?void 0:T.map(g=>g.user_id))||[],...(M==null?void 0:M.map(g=>g.user_id))||[],...(A==null?void 0:A.map(g=>g.user_id))||[],...(I==null?void 0:I.map(g=>g.user_id))||[]].filter(g=>g&&g!==a);if(R.length>0){console.log(`   Suppression de ${R.length} comptes utilisateurs li√©s...`);const{error:g}=await t.from("users").delete().in("id",R);g&&console.error("Erreur suppression comptes users:",g)}console.log("6/7 Suppression des mati√®res...");const{error:X}=await t.from("subjects").delete().eq("school_id",n);X&&console.error("Erreur suppression mati√®res:",X),console.log("   Suppression des classes...");const{error:H}=await t.from("classes").delete().eq("school_id",n);H&&console.error("Erreur suppression classes:",H),console.log("   Suppression des p√©riodes d'√©valuation...");const{error:Q}=await t.from("evaluation_periods").delete().eq("school_id",n);Q&&console.error("Erreur suppression p√©riodes √©valuation:",Q),console.log("   Suppression des ann√©es acad√©miques...");const{error:J}=await t.from("academic_years").delete().eq("school_id",n);J&&console.error("Erreur suppression ann√©es acad√©miques:",J),console.log("   Suppression des types de notes...");const{error:K}=await t.from("grade_types").delete().eq("school_id",n);K&&console.error("Erreur suppression types notes:",K),console.log("   Suppression des types de pr√©sences...");const{error:W}=await t.from("attendance_types").delete().eq("school_id",n);W&&console.error("Erreur suppression types pr√©sences:",W),console.log("   Suppression des types de paiements...");const{error:ee}=await t.from("payment_types").delete().eq("school_id",n);ee&&console.error("Erreur suppression types paiements:",ee),console.log("   Suppression des r√¥les utilisateurs...");const{error:se}=await t.from("user_roles").delete().eq("school_id",n);se&&console.error("Erreur suppression r√¥les utilisateurs:",se),console.log("7/7 Suppression de l'√©cole...");const{error:O}=await t.from("schools").delete().eq("id",n);if(O)throw console.error("‚ùå ERREUR CRITIQUE - Impossible de supprimer l'√©cole:",O),new Error(`√âchec de suppression de l'√©cole: ${O.message}`);console.log("‚úÖ Toutes les donn√©es de l'√©cole ont √©t√© supprim√©es avec succ√®s !")}catch(m){throw console.error("‚ùå ERREUR pendant la suppression des donn√©es √©cole:",m),new Error(`Erreur lors de la suppression des donn√©es de l'√©cole: ${m.message}`)}}else console.log("‚ö†Ô∏è Aucune √©cole associ√©e trouv√©e pour ce directeur")}if(console.log("üóëÔ∏è Nettoyage des r√©f√©rences utilisateur..."),["teacher","parent","student","secretary"].includes(i)){console.log(`üìã R√¥le ${i}: D√©sactivation au lieu de suppression`);const{error:h}=await t.from("users").update({is_active:!1,email:`deleted_${Date.now()}_${a.substring(0,8)}@deleted.local`,phone:null,updated_at:new Date().toISOString()}).eq("id",a);if(h)throw console.error("Erreur d√©sactivation user:",h),h;i==="teacher"?(await t.from("teachers").update({is_active:!1,updated_at:new Date().toISOString()}).eq("user_id",a),await t.from("teacher_assignments").update({is_active:!1,end_date:new Date().toISOString()}).eq("teacher_id",a)):i==="parent"?await t.from("parents").update({is_active:!1,updated_at:new Date().toISOString()}).eq("user_id",a):i==="student"?await t.from("students").update({is_active:!1,updated_at:new Date().toISOString()}).eq("user_id",a):i==="secretary"&&await t.from("secretaries").update({is_active:!1,updated_at:new Date().toISOString()}).eq("user_id",a),console.log("‚úÖ Compte d√©sactiv√©. Les donn√©es de l'√©tablissement sont pr√©serv√©es.")}else{console.log("‚ö†Ô∏è Suppression compl√®te pour ce type de compte"),await t.from("message_templates").delete().eq("created_by",a),await t.from("communications").delete().eq("sent_by_user_id",a),await t.from("notifications").delete().eq("created_by_user_id",a);const{error:h}=await t.from("users").delete().eq("id",a);if(h)throw h}const{error:u}=await t.auth.admin.deleteUser(a);u&&console.warn("Impossible de supprimer le compte auth:",u),await t.auth.signOut(),["teacher","parent","student","secretary"].includes(i)?alert("‚úÖ Votre compte a √©t√© d√©sactiv√©. Vous ne pourrez plus vous connecter mais l'historique de l'√©tablissement est pr√©serv√©."):alert("‚úÖ Votre compte a √©t√© supprim√© avec succ√®s. Toutes vos donn√©es ont √©t√© effac√©es."),window.location.href="/"}catch(t){console.error("‚ùå Erreur lors de la suppression du compte:",t),o(t.message||"Une erreur est survenue lors de la suppression du compte"),x(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg border-2 border-red-200 shadow-sm p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(d,{name:"AlertTriangle",size:24,className:"text-red-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-red-900 mb-2",children:"Zone de danger"}),e.jsxs("p",{className:"text-gray-700 mb-4",children:["La suppression de votre compte est ",e.jsx("strong",{children:"irr√©versible"}),". Toutes vos donn√©es seront d√©finitivement effac√©es."]}),i==="principal"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(d,{name:"AlertCircle",size:20,className:"text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900 mb-1",children:"‚ö†Ô∏è ATTENTION - Compte Directeur"}),e.jsxs("p",{className:"text-sm text-red-700 mb-2",children:["La suppression de votre compte entra√Ænera la ",e.jsx("strong",{children:"suppression D√âFINITIVE et IRR√âVERSIBLE"})," de :"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-red-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"üë• Comptes utilisateurs :"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:[e.jsx("li",{children:"Tous les √©tudiants"}),e.jsx("li",{children:"Tous les enseignants"}),e.jsx("li",{children:"Tous les parents"}),e.jsx("li",{children:"Tous les secr√©taires"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"üìä Donn√©es p√©dagogiques :"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:[e.jsx("li",{children:"Toutes les notes"}),e.jsx("li",{children:"Toutes les pr√©sences"}),e.jsx("li",{children:"Tous les paiements"}),e.jsx("li",{children:"Toutes les notifications"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"üè´ Structure de l'√©cole :"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:[e.jsx("li",{children:"Toutes les classes"}),e.jsx("li",{children:"Toutes les mati√®res"}),e.jsx("li",{children:"Ann√©es acad√©miques"}),e.jsx("li",{children:"P√©riodes d'√©valuation"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"‚öôÔ∏è Configuration :"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 ml-2",children:[e.jsx("li",{children:"Types de notes"}),e.jsx("li",{children:"Types de pr√©sences"}),e.jsx("li",{children:"Types de paiements"}),e.jsx("li",{children:"Logs d'audit"})]})]})]}),e.jsx("p",{className:"text-sm text-red-800 font-bold mt-3 bg-red-100 px-3 py-2 rounded border border-red-300",children:"üè¢ L'√©cole enti√®re sera supprim√©e d√©finitivement !"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(d,{name:"Info",size:16,className:"text-gray-500"}),e.jsxs("span",{children:["Email du compte : ",e.jsx("strong",{children:p})]})]}),e.jsxs(q,{variant:"outline",onClick:()=>N(!0),className:"border-red-300 text-red-700 hover:bg-red-50 hover:border-red-400",children:[e.jsx(d,{name:"Trash2",size:16,className:"mr-2"}),"Supprimer d√©finitivement mon compte"]})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:e.jsx(d,{name:"AlertTriangle",size:32,className:"text-red-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Confirmer la suppression"}),e.jsxs("p",{className:"text-gray-600",children:["Cette action est ",e.jsx("strong",{className:"text-red-600",children:"d√©finitive et irr√©versible"}),"."]})]}),_&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-700",children:_})}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium mb-2",children:"Pour confirmer, tapez exactement :"}),e.jsx("p",{className:"text-lg font-mono font-bold text-red-900 bg-white px-3 py-2 rounded border border-red-300",children:"SUPPRIMER MON COMPTE"})]}),e.jsx(z,{value:s,onChange:t=>y(t.target.value),placeholder:"Tapez ici...",className:"mb-6",disabled:b}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(q,{variant:"outline",onClick:()=>{N(!1),y(""),o(null)},disabled:b,className:"flex-1",children:"Annuler"}),e.jsx(q,{onClick:w,disabled:s!=="SUPPRIMER MON COMPTE"||b,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-gray-300 text-white",children:b?e.jsxs(e.Fragment,{children:[e.jsx(d,{name:"Loader",size:16,className:"mr-2 animate-spin"}),"Suppression..."]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{name:"Trash2",size:16,className:"mr-2"}),"Supprimer d√©finitivement"]})})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Cette action supprimera toutes vos donn√©es de mani√®re permanente"})]})})]})};export{je as default};
//# sourceMappingURL=index-C1h2SCqI.js.map
