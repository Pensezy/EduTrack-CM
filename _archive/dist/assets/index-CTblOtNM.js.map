{"version":3,"file":"index-CTblOtNM.js","sources":["../../src/services/parentProductionDataService.js","../../src/hooks/useParentDashboardData.js","../../src/pages/parent-dashboard/components/ChildSelector.jsx","../../src/pages/parent-dashboard/components/ChildOverviewCard.jsx","../../src/pages/parent-dashboard/components/AttendanceTracker.jsx","../../src/pages/parent-dashboard/components/GradesOverview.jsx","../../src/pages/parent-dashboard/components/PaymentStatus.jsx","../../src/pages/parent-dashboard/components/CommunicationCenter.jsx","../../src/pages/parent-dashboard/components/UpcomingEvents.jsx","../../src/pages/parent-dashboard/components/MultiSchoolChildrenOverview.jsx","../../src/pages/parent-dashboard/components/ManageChildModal.jsx","../../src/pages/parent-dashboard/index.jsx"],"sourcesContent":["/**\r\n * Service de donn√©es de production pour le dashboard parent\r\n * G√®re les requ√™tes Supabase pour r√©cup√©rer les vraies donn√©es des enfants\r\n */\r\n\r\nimport { supabase } from '../lib/supabase';\r\n\r\nconst parentProductionDataService = {\r\n  /**\r\n   * Contexte de s√©curit√© (ID du parent connect√©)\r\n   */\r\n  currentParentId: null,\r\n\r\n  /**\r\n   * D√©finir le contexte utilisateur parent\r\n   */\r\n  setUserContext(parentId) {\r\n    this.currentParentId = parentId;\r\n    console.log('üîê Contexte parent d√©fini:', parentId);\r\n  },\r\n\r\n  /**\r\n   * V√©rifier que le contexte est d√©fini\r\n   */\r\n  ensureContext() {\r\n    if (!this.currentParentId) {\r\n      throw new Error('Contexte utilisateur parent non d√©fini');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer le profil du parent\r\n   */\r\n  getParentProfile: async (parentId) => {\r\n    try {\r\n      if (parentId) {\r\n        parentProductionDataService.setUserContext(parentId);\r\n      }\r\n      parentProductionDataService.ensureContext();\r\n\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .select('id, email, full_name, phone, role, is_active')\r\n        .eq('id', parentProductionDataService.currentParentId)\r\n        .eq('role', 'parent')\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      return { data, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration profil parent:', error);\r\n      return { data: null, error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer tous les enfants d'un parent\r\n   */\r\n  getChildren: async (parentId) => {\r\n    try {\r\n      if (parentId) {\r\n        parentProductionDataService.setUserContext(parentId);\r\n      }\r\n      parentProductionDataService.ensureContext();\r\n\r\n      console.log('üìö R√©cup√©ration enfants pour parent USER ID:', parentProductionDataService.currentParentId);\r\n\r\n      // D'abord, r√©cup√©rer l'ID du parent depuis la table parents\r\n      const { data: parentData, error: parentError } = await supabase\r\n        .from('parents')\r\n        .select('id')\r\n        .eq('user_id', parentProductionDataService.currentParentId)\r\n        .single();\r\n\r\n      if (parentError) {\r\n        console.error('‚ùå Erreur r√©cup√©ration ID parent:', parentError);\r\n        throw parentError;\r\n      }\r\n\r\n      if (!parentData) {\r\n        console.error('‚ùå Aucun parent trouv√© pour user_id:', parentProductionDataService.currentParentId);\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      const parentTableId = parentData.id;\r\n      console.log('‚úÖ ID parent dans table parents:', parentTableId);\r\n\r\n      // Maintenant, r√©cup√©rer les enfants avec cet ID\r\n      const { data, error } = await supabase\r\n        .from('parent_students')\r\n        .select(`\r\n          relationship,\r\n          is_primary,\r\n          students!inner (\r\n            id,\r\n            matricule,\r\n            full_name,\r\n            gender,\r\n            date_of_birth,\r\n            photo_url,\r\n            is_active,\r\n            classes (\r\n              id,\r\n              name,\r\n              level,\r\n              section\r\n            ),\r\n            schools (\r\n              id,\r\n              name,\r\n              code,\r\n              type,\r\n              city,\r\n              country\r\n            )\r\n          )\r\n        `)\r\n        .eq('parent_id', parentTableId)\r\n        .eq('students.is_active', true);\r\n\r\n      if (error) {\r\n        console.error('‚ùå Erreur Supabase:', error);\r\n        throw error;\r\n      }\r\n\r\n      console.log('üì¶ Donn√©es brutes re√ßues:', data);\r\n\r\n      // Transformer les donn√©es pour avoir un format plat\r\n      const children = data\r\n        ?.map(item => {\r\n          const student = item.students;\r\n          if (!student) return null;\r\n          \r\n          return {\r\n            id: student.id,\r\n            matricule: student.matricule,\r\n            full_name: student.full_name,\r\n            name: student.full_name,\r\n            gender: student.gender,\r\n            date_of_birth: student.date_of_birth,\r\n            birth_date: student.date_of_birth,\r\n            photo_url: student.photo_url,\r\n            photo: student.photo_url,\r\n            is_active: student.is_active,\r\n            class: student.classes,\r\n            class_name: student.classes?.name,\r\n            school: student.schools,\r\n            schoolId: student.schools?.id,\r\n            relationship: item.relationship,\r\n            is_primary: item.is_primary,\r\n            // Donn√©es par d√©faut pour compatibilit√©\r\n            averageGrade: 0,\r\n            attendanceRate: 0,\r\n            unreadNotifications: 0,\r\n            pendingPayments: 0\r\n          };\r\n        })\r\n        .filter(child => child !== null) || [];\r\n\r\n      console.log(`‚úÖ ${children.length} enfant(s) trouv√©(s) et format√©(s):`, children);\r\n      return { data: children, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration enfants:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les notes d'un enfant\r\n   */\r\n  getChildGrades: async (childId) => {\r\n    try {\r\n      parentProductionDataService.ensureContext();\r\n\r\n      console.log('üìù R√©cup√©ration notes pour enfant:', childId);\r\n\r\n      // V√©rifier que l'enfant appartient bien au parent\r\n      const { data: verifyData, error: verifyError } = await supabase\r\n        .from('parent_students')\r\n        .select('student_id')\r\n        .eq('parent_id', parentProductionDataService.currentParentId)\r\n        .eq('student_id', childId)\r\n        .single();\r\n\r\n      if (verifyError || !verifyData) {\r\n        throw new Error('Acc√®s non autoris√© √† cet enfant');\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('grades')\r\n        .select(`\r\n          id,\r\n          grade,\r\n          max_grade,\r\n          coefficient,\r\n          grade_type,\r\n          date,\r\n          comment,\r\n          subject:subjects (\r\n            id,\r\n            name,\r\n            code\r\n          ),\r\n          teacher:users!grades_teacher_id_fkey (\r\n            full_name\r\n          )\r\n        `)\r\n        .eq('student_id', childId)\r\n        .order('date', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      // Transformer et enrichir les donn√©es\r\n      const grades = data?.map(grade => ({\r\n        id: grade.id,\r\n        subject: grade.subject?.name || 'Mati√®re inconnue',\r\n        subject_code: grade.subject?.code || '',\r\n        grade: grade.grade,\r\n        max_grade: grade.max_grade || 20,\r\n        coefficient: grade.coefficient || 1,\r\n        grade_type: grade.grade_type || 'Contr√¥le',\r\n        date: grade.date,\r\n        teacher_name: grade.teacher?.full_name || 'Enseignant',\r\n        comment: grade.comment,\r\n        average: grade.grade, // √Ä calculer si besoin\r\n        trend: 'stable' // √Ä calculer si besoin\r\n      })) || [];\r\n\r\n      console.log(`‚úÖ ${grades.length} note(s) trouv√©e(s)`);\r\n      return { data: grades, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration notes:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les pr√©sences/absences d'un enfant\r\n   */\r\n  getChildAttendance: async (childId) => {\r\n    try {\r\n      parentProductionDataService.ensureContext();\r\n\r\n      console.log('üìÖ R√©cup√©ration pr√©sences pour enfant:', childId);\r\n\r\n      // V√©rifier que l'enfant appartient bien au parent\r\n      const { data: verifyData, error: verifyError } = await supabase\r\n        .from('parent_students')\r\n        .select('student_id')\r\n        .eq('parent_id', parentProductionDataService.currentParentId)\r\n        .eq('student_id', childId)\r\n        .single();\r\n\r\n      if (verifyError || !verifyData) {\r\n        throw new Error('Acc√®s non autoris√© √† cet enfant');\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('absences')\r\n        .select(`\r\n          id,\r\n          absence_date,\r\n          absence_type,\r\n          justified,\r\n          justification,\r\n          created_at\r\n        `)\r\n        .eq('student_id', childId)\r\n        .order('absence_date', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      // Transformer en objet avec dates comme cl√©s\r\n      const attendance = {};\r\n      data?.forEach(absence => {\r\n        const status = absence.justified \r\n          ? 'excused' \r\n          : absence.absence_type === 'late' \r\n            ? 'late' \r\n            : 'absent';\r\n        \r\n        attendance[absence.absence_date] = {\r\n          status,\r\n          justification: absence.justification\r\n        };\r\n      });\r\n\r\n      console.log(`‚úÖ ${Object.keys(attendance).length} enregistrement(s) de pr√©sence`);\r\n      return { data: attendance, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration pr√©sences:', error);\r\n      return { data: {}, error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les paiements d'un enfant\r\n   */\r\n  getChildPayments: async (childId) => {\r\n    try {\r\n      parentProductionDataService.ensureContext();\r\n\r\n      console.log('üí∞ R√©cup√©ration paiements pour enfant:', childId);\r\n\r\n      // V√©rifier que l'enfant appartient bien au parent\r\n      const { data: verifyData, error: verifyError } = await supabase\r\n        .from('parent_students')\r\n        .select('student_id')\r\n        .eq('parent_id', parentProductionDataService.currentParentId)\r\n        .eq('student_id', childId)\r\n        .single();\r\n\r\n      if (verifyError || !verifyData) {\r\n        throw new Error('Acc√®s non autoris√© √† cet enfant');\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('payments')\r\n        .select(`\r\n          id,\r\n          type,\r\n          description,\r\n          amount,\r\n          currency,\r\n          status,\r\n          due_date,\r\n          paid_date,\r\n          payment_method,\r\n          created_at\r\n        `)\r\n        .eq('student_id', childId)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      console.log(`‚úÖ ${data?.length || 0} paiement(s) trouv√©(s)`);\r\n      return { data: data || [], error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration paiements:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les notifications d'un enfant\r\n   */\r\n  getChildNotifications: async (childId) => {\r\n    try {\r\n      parentProductionDataService.ensureContext();\r\n\r\n      console.log('üîî R√©cup√©ration notifications pour enfant:', childId);\r\n\r\n      // V√©rifier que l'enfant appartient bien au parent\r\n      const { data: verifyData, error: verifyError } = await supabase\r\n        .from('parent_students')\r\n        .select('student_id')\r\n        .eq('parent_id', parentProductionDataService.currentParentId)\r\n        .eq('student_id', childId)\r\n        .single();\r\n\r\n      if (verifyError || !verifyData) {\r\n        throw new Error('Acc√®s non autoris√© √† cet enfant');\r\n      }\r\n\r\n      // R√©cup√©rer l'user_id de l'√©tudiant\r\n      const { data: studentData, error: studentError } = await supabase\r\n        .from('students')\r\n        .select('user_id')\r\n        .eq('id', childId)\r\n        .single();\r\n\r\n      if (studentError || !studentData?.user_id) {\r\n        console.warn('‚ö†Ô∏è Aucun user_id trouv√© pour cet √©tudiant');\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('user_notifications')\r\n        .select(`\r\n          id,\r\n          title,\r\n          message,\r\n          type,\r\n          priority,\r\n          is_read,\r\n          metadata,\r\n          created_at,\r\n          school:schools (\r\n            name\r\n          )\r\n        `)\r\n        .eq('user_id', studentData.user_id)\r\n        .order('created_at', { ascending: false })\r\n        .limit(50);\r\n\r\n      if (error) throw error;\r\n\r\n      // Transformer les donn√©es\r\n      const notifications = data?.map(notif => ({\r\n        id: notif.id,\r\n        title: notif.title,\r\n        message: notif.message,\r\n        type: notif.type,\r\n        priority: notif.priority || 'medium',\r\n        school_name: notif.school?.name || '',\r\n        created_at: notif.created_at,\r\n        read: notif.is_read || false,\r\n        metadata: notif.metadata || {}\r\n      })) || [];\r\n\r\n      console.log(`‚úÖ ${notifications.length} notification(s) trouv√©e(s)`);\r\n      return { data: notifications, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration notifications:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer les √©v√©nements √† venir\r\n   */\r\n  getUpcomingEvents: async (parentId) => {\r\n    try {\r\n      if (parentId) {\r\n        parentProductionDataService.setUserContext(parentId);\r\n      }\r\n      parentProductionDataService.ensureContext();\r\n\r\n      console.log('üìÜ R√©cup√©ration √©v√©nements pour parent:', parentProductionDataService.currentParentId);\r\n\r\n      // R√©cup√©rer d'abord les IDs des enfants\r\n      const { data: childrenData, error: childrenError } = await supabase\r\n        .from('parent_students')\r\n        .select('student_id')\r\n        .eq('parent_id', parentProductionDataService.currentParentId);\r\n\r\n      if (childrenError) throw childrenError;\r\n\r\n      const childIds = childrenData?.map(item => item.student_id) || [];\r\n\r\n      if (childIds.length === 0) {\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      // R√©cup√©rer les √©v√©nements pour ces enfants\r\n      const { data, error } = await supabase\r\n        .from('events')\r\n        .select(`\r\n          id,\r\n          title,\r\n          description,\r\n          event_date,\r\n          start_time,\r\n          end_time,\r\n          location,\r\n          type,\r\n          status,\r\n          school:schools (\r\n            name\r\n          ),\r\n          student:students (\r\n            full_name\r\n          )\r\n        `)\r\n        .in('student_id', childIds)\r\n        .gte('event_date', new Date().toISOString().split('T')[0])\r\n        .order('event_date', { ascending: true })\r\n        .limit(20);\r\n\r\n      if (error) throw error;\r\n\r\n      // Transformer les donn√©es\r\n      const events = data?.map(event => ({\r\n        id: event.id,\r\n        title: event.title,\r\n        description: event.description,\r\n        school_name: event.school?.name || '',\r\n        child_name: event.student?.full_name || '',\r\n        event_date: event.event_date,\r\n        start_time: event.start_time,\r\n        end_time: event.end_time,\r\n        location: event.location,\r\n        type: event.type,\r\n        status: event.status || 'upcoming'\r\n      })) || [];\r\n\r\n      console.log(`‚úÖ ${events.length} √©v√©nement(s) √† venir`);\r\n      return { data: events, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration √©v√©nements:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©cup√©rer toutes les √©coles des enfants\r\n   */\r\n  getSchools: async (parentId) => {\r\n    try {\r\n      if (parentId) {\r\n        parentProductionDataService.setUserContext(parentId);\r\n      }\r\n      parentProductionDataService.ensureContext();\r\n\r\n      console.log('üè´ R√©cup√©ration √©coles pour parent USER ID:', parentProductionDataService.currentParentId);\r\n\r\n      // D'abord, r√©cup√©rer l'ID du parent depuis la table parents\r\n      const { data: parentData, error: parentError } = await supabase\r\n        .from('parents')\r\n        .select('id')\r\n        .eq('user_id', parentProductionDataService.currentParentId)\r\n        .single();\r\n\r\n      if (parentError) {\r\n        console.error('‚ùå Erreur r√©cup√©ration ID parent:', parentError);\r\n        throw parentError;\r\n      }\r\n\r\n      if (!parentData) {\r\n        console.error('‚ùå Aucun parent trouv√© pour user_id:', parentProductionDataService.currentParentId);\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      const parentTableId = parentData.id;\r\n      console.log('‚úÖ ID parent dans table parents:', parentTableId);\r\n\r\n      const { data, error } = await supabase\r\n        .from('parent_students')\r\n        .select(`\r\n          students (\r\n            schools (\r\n              id,\r\n              name,\r\n              code,\r\n              type,\r\n              city,\r\n              country\r\n            )\r\n          )\r\n        `)\r\n        .eq('parent_id', parentTableId);\r\n\r\n      if (error) {\r\n        console.error('‚ùå Erreur Supabase:', error);\r\n        throw error;\r\n      }\r\n\r\n      console.log('üì¶ Donn√©es √©coles brutes:', data);\r\n\r\n      // D√©dupliquer les √©coles\r\n      const schoolsMap = new Map();\r\n      data?.forEach(item => {\r\n        const school = item.students?.schools;\r\n        if (school && !schoolsMap.has(school.id)) {\r\n          schoolsMap.set(school.id, {\r\n            ...school,\r\n            childrenCount: 1\r\n          });\r\n        } else if (school) {\r\n          const existing = schoolsMap.get(school.id);\r\n          existing.childrenCount += 1;\r\n        }\r\n      });\r\n\r\n      const schools = Array.from(schoolsMap.values());\r\n\r\n      console.log(`‚úÖ ${schools.length} √©cole(s) trouv√©e(s):`, schools);\r\n      return { data: schools, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur r√©cup√©ration √©coles:', error);\r\n      return { data: [], error };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Marquer une notification comme lue\r\n   */\r\n  markNotificationAsRead: async (notificationId) => {\r\n    try {\r\n      parentProductionDataService.ensureContext();\r\n\r\n      const { data, error } = await supabase\r\n        .from('user_notifications')\r\n        .update({ is_read: true, read_at: new Date().toISOString() })\r\n        .eq('id', notificationId)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      return { data, error: null };\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur marquage notification:', error);\r\n      return { data: null, error };\r\n    }\r\n  }\r\n};\r\n\r\nexport default parentProductionDataService;\r\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase';\nimport parentProductionDataService from '../services/parentProductionDataService';\n\n/**\n * Hook unifi√© pour r√©cup√©rer les donn√©es parent depuis Supabase uniquement\n */\nexport const useParentDashboardData = () => {\n  const [user, setUser] = useState(null);\n  const [userLoading, setUserLoading] = useState(true);\n\n  const [parentProfile, setParentProfile] = useState(null);\n  const [children, setChildren] = useState([]);\n  const [selectedChild, setSelectedChild] = useState(null);\n  const [selectedSchool, setSelectedSchool] = useState(null);\n  const [gradesData, setGradesData] = useState({});\n  const [attendanceData, setAttendanceData] = useState({});\n  const [paymentData, setPaymentData] = useState({});\n  const [notificationsData, setNotificationsData] = useState({});\n  const [upcomingEvents, setUpcomingEvents] = useState([]);\n  const [schools, setSchools] = useState([]);\n\n  const [loading, setLoading] = useState({\n    profile: false,\n    children: false,\n    grades: false,\n    attendance: false,\n    payments: false,\n    notifications: false,\n    events: false,\n    schools: false\n  });\n\n  const [errors, setErrors] = useState({});\n\n  // R√©cup√©rer l'utilisateur connect√© au montage\n  useEffect(() => {\n    const getUser = async () => {\n      try {\n        const { data: { user: authUser }, error } = await supabase.auth.getUser();\n        if (error) throw error;\n        setUser(authUser);\n      } catch (error) {\n        console.error('Erreur r√©cup√©ration utilisateur:', error);\n      } finally {\n        setUserLoading(false);\n      }\n    };\n    getUser();\n  }, []);\n\n  // Fonction pour charger le profil parent\n  const loadParentProfile = async () => {\n    if (userLoading) return;\n\n    setLoading(prev => ({ ...prev, profile: true }));\n    setErrors(prev => ({ ...prev, profile: null }));\n\n    try {\n      // Initialiser le contexte\n      if (parentProductionDataService.setUserContext && user?.id) {\n        parentProductionDataService.setUserContext(user.id);\n      }\n\n      const result = await parentProductionDataService.getParentProfile(user?.id);\n\n      if (result.error) {\n        throw result.error;\n      }\n\n      setParentProfile(result.data);\n    } catch (error) {\n      console.error('Erreur chargement profil parent:', error);\n      setErrors(prev => ({ ...prev, profile: error }));\n    } finally {\n      setLoading(prev => ({ ...prev, profile: false }));\n    }\n  };\n\n  // Fonction pour charger les enfants\n  const loadChildren = async () => {\n    console.log('üéØ loadChildren appel√© - user:', user?.id);\n\n    if (userLoading) {\n      console.log('‚è∏Ô∏è loadChildren bloqu√© - utilisateur en cours de chargement');\n      return;\n    }\n\n    setLoading(prev => ({ ...prev, children: true }));\n    setErrors(prev => ({ ...prev, children: null }));\n\n    try {\n      console.log('üîß Service: PRODUCTION (Supabase)');\n\n      // Initialiser le contexte\n      if (parentProductionDataService.setUserContext && user?.id) {\n        console.log('üîë Initialisation contexte avec parentId:', user.id);\n        parentProductionDataService.setUserContext(user.id);\n      } else {\n        console.error('‚ùå Pas de parentId disponible !');\n      }\n\n      const parentId = user?.id;\n      console.log('üìû Appel getChildren avec parentId:', parentId);\n      const result = await parentProductionDataService.getChildren(parentId);\n      console.log('üì¶ R√©sultat getChildren:', result);\n\n      if (result.error) {\n        throw result.error;\n      }\n\n      const childrenData = result.data || [];\n      console.log('üë∂ Enfants charg√©s:', childrenData.length);\n      setChildren(childrenData);\n\n      // S√©lectionner automatiquement le premier enfant si disponible\n      if (childrenData.length > 0 && !selectedChild) {\n        console.log('‚úÖ S√©lection automatique du premier enfant');\n        setSelectedChild(childrenData[0]);\n\n        // Charger aussi l'√©cole associ√©e\n        if (childrenData[0].school_id) {\n          setSelectedSchool({ id: childrenData[0].school_id });\n        }\n      }\n    } catch (error) {\n      console.error('‚ùå Erreur chargement enfants:', error);\n      setErrors(prev => ({ ...prev, children: error }));\n    } finally {\n      setLoading(prev => ({ ...prev, children: false }));\n    }\n  };\n\n  // Fonction pour charger les notes d'un enfant\n  const loadChildGrades = async (childId, schoolId = null) => {\n    if (userLoading || !childId) return;\n\n    const key = `${childId}_${schoolId || 'all'}`;\n    setLoading(prev => ({ ...prev, grades: true }));\n    setErrors(prev => ({ ...prev, grades: null }));\n\n    try {\n      const result = await parentProductionDataService.getChildGrades(childId, schoolId);\n\n      if (result.error) {\n        throw result.error;\n      }\n\n      setGradesData(prev => ({ ...prev, [key]: result.data }));\n    } catch (error) {\n      console.error('Erreur chargement notes:', error);\n      setErrors(prev => ({ ...prev, grades: error }));\n    } finally {\n      setLoading(prev => ({ ...prev, grades: false }));\n    }\n  };\n\n  // Fonction pour charger l'assiduit√© d'un enfant\n  const loadChildAttendance = async (childId, schoolId = null) => {\n    if (userLoading || !childId) return;\n\n    const key = `${childId}_${schoolId || 'all'}`;\n    setLoading(prev => ({ ...prev, attendance: true }));\n    setErrors(prev => ({ ...prev, attendance: null }));\n\n    try {\n      const result = await parentProductionDataService.getChildAttendance(childId, schoolId);\n\n      if (result.error) {\n        throw result.error;\n      }\n\n      setAttendanceData(prev => ({ ...prev, [key]: result.data }));\n    } catch (error) {\n      console.error('Erreur chargement assiduit√©:', error);\n      setErrors(prev => ({ ...prev, attendance: error }));\n    } finally {\n      setLoading(prev => ({ ...prev, attendance: false }));\n    }\n  };\n\n  // Fonction pour charger les paiements\n  const loadChildPayments = async (childId, schoolId = null) => {\n    if (userLoading || !childId) return;\n\n    const key = `${childId}_${schoolId || 'all'}`;\n    setLoading(prev => ({ ...prev, payments: true }));\n    setErrors(prev => ({ ...prev, payments: null }));\n\n    try {\n      const result = await parentProductionDataService.getChildPayments(childId, schoolId);\n\n      if (result.error) {\n        throw result.error;\n      }\n\n      setPaymentData(prev => ({ ...prev, [key]: result.data }));\n    } catch (error) {\n      console.error('Erreur chargement paiements:', error);\n      setErrors(prev => ({ ...prev, payments: error }));\n    } finally {\n      setLoading(prev => ({ ...prev, payments: false }));\n    }\n  };\n\n  // Fonction pour charger les notifications\n  const loadChildNotifications = async (childId, schoolId = null) => {\n    if (userLoading || !childId) return;\n\n    const key = `${childId}_${schoolId || 'all'}`;\n    setLoading(prev => ({ ...prev, notifications: true }));\n    setErrors(prev => ({ ...prev, notifications: null }));\n\n    try {\n      const result = await parentProductionDataService.getChildNotifications(childId, schoolId);\n\n      if (result.error) {\n        throw result.error;\n      }\n\n      setNotificationsData(prev => ({ ...prev, [key]: result.data }));\n    } catch (error) {\n      console.error('Erreur chargement notifications:', error);\n      setErrors(prev => ({ ...prev, notifications: error }));\n    } finally {\n      setLoading(prev => ({ ...prev, notifications: false }));\n    }\n  };\n\n  // Fonction pour charger les √©v√©nements √† venir\n  const loadUpcomingEvents = async () => {\n    if (userLoading) return;\n\n    setLoading(prev => ({ ...prev, events: true }));\n    setErrors(prev => ({ ...prev, events: null }));\n\n    try {\n      const result = await parentProductionDataService.getUpcomingEvents();\n\n      if (result.error) {\n        throw result.error;\n      }\n\n      setUpcomingEvents(result.data || []);\n    } catch (error) {\n      console.error('Erreur chargement √©v√©nements:', error);\n      setErrors(prev => ({ ...prev, events: error }));\n    } finally {\n      setLoading(prev => ({ ...prev, events: false }));\n    }\n  };\n\n  // Fonction pour charger les √©coles\n  const loadSchools = async () => {\n    if (userLoading) return;\n\n    setLoading(prev => ({ ...prev, schools: true }));\n    setErrors(prev => ({ ...prev, schools: null }));\n\n    try {\n      const parentId = user?.id;\n      const result = await parentProductionDataService.getSchools(parentId);\n\n      if (result.error) {\n        throw result.error;\n      }\n\n      setSchools(result.data || []);\n    } catch (error) {\n      console.error('Erreur chargement √©coles:', error);\n      setErrors(prev => ({ ...prev, schools: error }));\n    } finally {\n      setLoading(prev => ({ ...prev, schools: false }));\n    }\n  };\n\n  // Fonction pour marquer une notification comme lue\n  const markNotificationAsRead = async (notificationId) => {\n    try {\n      await parentProductionDataService.markNotificationAsRead(notificationId);\n\n      // Mettre √† jour l'√©tat local\n      setNotificationsData(prev => {\n        const updated = { ...prev };\n        Object.keys(updated).forEach(key => {\n          if (Array.isArray(updated[key])) {\n            updated[key] = updated[key].map(notif =>\n              notif.id === notificationId ? { ...notif, read: true } : notif\n            );\n          }\n        });\n        return updated;\n      });\n    } catch (error) {\n      console.error('Erreur marquage notification:', error);\n    }\n  };\n\n  // Charger les donn√©es initiales\n  useEffect(() => {\n    if (!userLoading && user) {\n      console.log('üöÄ Chargement donn√©es parent depuis Supabase');\n      loadParentProfile();\n      loadChildren();\n      loadSchools();\n      loadUpcomingEvents();\n    }\n  }, [userLoading, user]);\n\n  // Charger les donn√©es de l'enfant s√©lectionn√©\n  useEffect(() => {\n    if (selectedChild && !userLoading) {\n      console.log('üë∂ Chargement donn√©es enfant s√©lectionn√©:', selectedChild.id);\n      loadChildGrades(selectedChild.id, selectedSchool?.id);\n      loadChildAttendance(selectedChild.id, selectedSchool?.id);\n      loadChildPayments(selectedChild.id, selectedSchool?.id);\n      loadChildNotifications(selectedChild.id, selectedSchool?.id);\n    }\n  }, [selectedChild, selectedSchool, userLoading]);\n\n  return {\n    // Donn√©es\n    parentProfile,\n    children,\n    selectedChild,\n    selectedSchool,\n    gradesData,\n    attendanceData,\n    paymentData,\n    notificationsData,\n    upcomingEvents,\n    schools,\n    user,\n\n    // √âtats de chargement\n    loading,\n    userLoading,\n    errors,\n\n    // Actions\n    setSelectedChild,\n    setSelectedSchool,\n    loadParentProfile,\n    loadChildren,\n    loadChildGrades,\n    loadChildAttendance,\n    loadChildPayments,\n    loadChildNotifications,\n    loadUpcomingEvents,\n    loadSchools,\n    markNotificationAsRead,\n\n    // Utilitaires\n    isAnyLoading: Object.values(loading).some(Boolean) || userLoading,\n    hasErrors: Object.values(errors).some(Boolean)\n  };\n};\n\nexport default useParentDashboardData;\n","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst ChildSelector = ({ \r\n  children, \r\n  schools, \r\n  selectedChild, \r\n  selectedSchool, \r\n  onChildSelect, \r\n  onSchoolChange,\r\n  getChildrenBySchool,\r\n  onManageChild\r\n}) => {\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-lg border-2 border-gray-200 p-8\">\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 shadow-md\">\r\n            <Icon name=\"Users\" size={24} className=\"text-white\" />\r\n          </div>\r\n          <h2 className=\"font-display font-bold text-2xl text-gray-900\">\r\n            S√©lection Enfant & √âcole\r\n          </h2>\r\n        </div>\r\n        \r\n        {/* Multi-School Selector - Modernis√© */}\r\n        {schools?.length > 1 && (\r\n          <div className=\"flex items-center gap-3 bg-gradient-to-br from-blue-50 to-indigo-50 px-4 py-3 rounded-xl border-2 border-blue-200\">\r\n            <div className=\"p-1.5 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 shadow-sm\">\r\n              <Icon name=\"School\" size={18} className=\"text-white\" />\r\n            </div>\r\n            <select\r\n              value={selectedSchool || ''}\r\n              onChange={(e) => onSchoolChange(e?.target?.value)}\r\n              className=\"px-4 py-2 bg-white border-2 border-blue-200 rounded-lg font-body-bold text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"\">Toutes les √©coles</option>\r\n              {schools?.map(school => (\r\n                <option key={school?.id} value={school?.id}>\r\n                  {school?.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Children Cards - Modernis√©es */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {children?.map(child => {\r\n          // Show child if no school selected or if child belongs to selected school\r\n          const shouldShow = !selectedSchool || child?.schoolId === selectedSchool;\r\n          if (!shouldShow) return null;\r\n\r\n          const isSelected = selectedChild?.id === child?.id;\r\n\r\n          return (\r\n            <div\r\n              key={child?.id}\r\n              className={`relative p-5 rounded-2xl border-2 transition-all duration-200 group cursor-pointer ${\r\n                isSelected \r\n                  ? 'border-indigo-500 bg-gradient-to-br from-indigo-50 to-purple-50 shadow-xl scale-105' \r\n                  : 'border-gray-200 hover:border-indigo-300 hover:shadow-lg hover:scale-102'\r\n              }`}\r\n              onClick={() => onChildSelect(child)}\r\n            >\r\n              {/* Selection Indicator - Modernis√© */}\r\n              {isSelected && (\r\n                <div className=\"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md\">\r\n                  <Icon name=\"Check\" size={18} className=\"text-white\" />\r\n                </div>\r\n              )}\r\n\r\n              {/* Manage Button - Modernis√© */}\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  onManageChild?.(child);\r\n                }}\r\n                className=\"absolute top-3 right-3 p-2 bg-white hover:bg-gray-100 border-2 border-gray-200 rounded-lg shadow-md transition-all opacity-0 group-hover:opacity-100 hover:scale-110\"\r\n                title=\"G√©rer cet enfant\"\r\n              >\r\n                <Icon name=\"Settings\" size={16} className=\"text-gray-600\" />\r\n              </button>\r\n\r\n              <div className=\"flex items-center gap-4\">\r\n                {/* Child Photo - Modernis√© */}\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={child?.photo || 'https://via.placeholder.com/64'}\r\n                    alt={child?.name}\r\n                    className={`w-16 h-16 rounded-xl object-cover border-2 transition-all ${\r\n                      isSelected ? 'border-indigo-500' : 'border-gray-200 group-hover:border-indigo-300'\r\n                    }`}\r\n                  />\r\n                  {/* Notification Badge - Modernis√© */}\r\n                  {child?.unreadNotifications > 0 && (\r\n                    <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-br from-red-500 to-rose-600 rounded-full flex items-center justify-center shadow-md\">\r\n                      <span className=\"font-display font-bold text-xs text-white\">\r\n                        {child?.unreadNotifications}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Child Info - Modernis√© */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <h3 className=\"font-display font-bold text-lg text-gray-900 mb-1 truncate\">\r\n                    {child?.name}\r\n                  </h3>\r\n                  <p className=\"font-body-medium text-sm text-gray-600 mb-1\">\r\n                    {child?.class} ‚Ä¢ {child?.matricule}\r\n                  </p>\r\n                  <p className=\"font-body-medium text-xs text-gray-500 truncate\">\r\n                    {child?.school}\r\n                  </p>\r\n\r\n                  {/* Quick Stats - Modernis√©s */}\r\n                  <div className=\"flex items-center gap-3 mt-3\">\r\n                    {child?.averageGrade > 0 && (\r\n                      <div className=\"flex items-center gap-1 px-2 py-1 bg-green-100 rounded-lg\">\r\n                        <Icon name=\"TrendingUp\" size={12} className=\"text-green-600\" />\r\n                        <span className=\"font-body-bold text-xs text-green-700\">\r\n                          {child?.averageGrade}/20\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    {child?.attendanceRate > 0 && (\r\n                      <div className=\"flex items-center gap-1 px-2 py-1 bg-blue-100 rounded-lg\">\r\n                        <Icon name=\"Calendar\" size={12} className=\"text-blue-600\" />\r\n                        <span className=\"font-body-bold text-xs text-blue-700\">\r\n                          {child?.attendanceRate}%\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    {child?.pendingPayments > 0 && (\r\n                      <div className=\"flex items-center gap-1 px-2 py-1 bg-orange-100 rounded-lg\">\r\n                        <Icon name=\"CreditCard\" size={12} className=\"text-orange-600\" />\r\n                        <span className=\"font-body-bold text-xs text-orange-700\">\r\n                          {child?.pendingPayments}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n      {/* No Children Message - Modernis√© */}\r\n      {children?.length === 0 && (\r\n        <div className=\"text-center py-12 bg-gradient-to-br from-gray-50 to-white rounded-2xl border-2 border-gray-200\">\r\n          <div className=\"w-20 h-20 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center shadow-md\">\r\n            <Icon name=\"Users\" size={40} className=\"text-white\" />\r\n          </div>\r\n          <p className=\"font-body-bold text-gray-700 text-lg\">\r\n            Aucun enfant trouv√© pour cette √©cole\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChildSelector;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst ChildOverviewCard = ({ child }) => {\r\n  if (!child) return null;\r\n\r\n  const getPerformanceColor = (average) => {\r\n    if (average >= 16) return 'from-green-500 to-emerald-600';\r\n    if (average >= 14) return 'from-blue-500 to-indigo-600';\r\n    if (average >= 12) return 'from-orange-500 to-amber-600';\r\n    return 'from-red-500 to-rose-600';\r\n  };\r\n\r\n  const getPerformanceTextColor = (average) => {\r\n    if (average >= 16) return 'text-green-700';\r\n    if (average >= 14) return 'text-blue-700';\r\n    if (average >= 12) return 'text-orange-700';\r\n    return 'text-red-700';\r\n  };\r\n\r\n  const getAttendanceColor = (rate) => {\r\n    if (rate >= 95) return 'from-green-500 to-emerald-600';\r\n    if (rate >= 90) return 'from-blue-500 to-indigo-600';\r\n    if (rate >= 85) return 'from-orange-500 to-amber-600';\r\n    return 'from-red-500 to-rose-600';\r\n  };\r\n\r\n  const getAttendanceTextColor = (rate) => {\r\n    if (rate >= 95) return 'text-green-700';\r\n    if (rate >= 90) return 'text-blue-700';\r\n    if (rate >= 85) return 'text-orange-700';\r\n    return 'text-red-700';\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl shadow-xl p-8 text-white\">\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6\">\r\n        {/* Child Profile Section - Modernis√© */}\r\n        <div className=\"flex items-center gap-6\">\r\n          <div className=\"relative\">\r\n            <img\r\n              src={child?.photo || 'https://via.placeholder.com/80'}\r\n              alt={child?.name}\r\n              className=\"w-24 h-24 rounded-2xl object-cover border-4 border-white/30 shadow-lg backdrop-blur-sm\"\r\n            />\r\n            <div className=\"absolute -bottom-2 -right-2 w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl border-2 border-white flex items-center justify-center shadow-md\">\r\n              <Icon name=\"User\" size={16} className=\"text-white\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <h2 className=\"font-display font-bold text-3xl mb-3\">\r\n              {child?.name}\r\n            </h2>\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-lg px-3 py-1.5\">\r\n                <Icon name=\"GraduationCap\" size={16} />\r\n                <span className=\"font-body-bold text-sm\">{child?.class || 'Classe non renseign√©e'}</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-lg px-3 py-1.5\">\r\n                <Icon name=\"Hash\" size={16} />\r\n                <span className=\"font-body-medium text-sm\">{child?.matricule || 'Matricule non renseign√©'}</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-lg px-3 py-1.5\">\r\n                <Icon name=\"School\" size={16} />\r\n                <span className=\"font-body-medium text-sm\">{child?.school || '√âcole non renseign√©e'}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Performance Metrics - Modernis√©s */}\r\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {/* Academic Performance */}\r\n          <div className=\"bg-white rounded-2xl p-5 shadow-lg text-center hover:scale-105 transition-transform\">\r\n            <div className={`w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br ${getPerformanceColor(child?.averageGrade || 0)} flex items-center justify-center shadow-md`}>\r\n              <Icon name=\"TrendingUp\" size={24} className=\"text-white\" />\r\n            </div>\r\n            <div className={`font-display font-bold text-2xl ${getPerformanceTextColor(child?.averageGrade || 0)}`}>\r\n              {child?.averageGrade || 0}/20\r\n            </div>\r\n            <p className=\"font-body-medium text-xs text-gray-600 mt-2\">\r\n              Moyenne g√©n√©rale\r\n            </p>\r\n          </div>\r\n\r\n          {/* Attendance Rate */}\r\n          <div className=\"bg-white rounded-2xl p-5 shadow-lg text-center hover:scale-105 transition-transform\">\r\n            <div className={`w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br ${getAttendanceColor(child?.attendanceRate || 0)} flex items-center justify-center shadow-md`}>\r\n              <Icon name=\"Calendar\" size={24} className=\"text-white\" />\r\n            </div>\r\n            <div className={`font-display font-bold text-2xl ${getAttendanceTextColor(child?.attendanceRate || 0)}`}>\r\n              {child?.attendanceRate || 0}%\r\n            </div>\r\n            <p className=\"font-body-medium text-xs text-gray-600 mt-2\">\r\n              Taux de pr√©sence\r\n            </p>\r\n          </div>\r\n\r\n          {/* Notifications */}\r\n          <div className=\"bg-white rounded-2xl p-5 shadow-lg text-center hover:scale-105 transition-transform\">\r\n            <div className={`w-12 h-12 mx-auto mb-3 rounded-xl ${child?.unreadNotifications > 0 ? 'bg-gradient-to-br from-orange-500 to-amber-600' : 'bg-gray-300'} flex items-center justify-center shadow-md`}>\r\n              <Icon name=\"Bell\" size={24} className=\"text-white\" />\r\n            </div>\r\n            <div className={`font-display font-bold text-2xl ${child?.unreadNotifications > 0 ? 'text-orange-700' : 'text-gray-500'}`}>\r\n              {child?.unreadNotifications || 0}\r\n            </div>\r\n            <p className=\"font-body-medium text-xs text-gray-600 mt-2\">\r\n              Notifications\r\n            </p>\r\n          </div>\r\n\r\n          {/* Pending Payments */}\r\n          <div className=\"bg-white rounded-2xl p-5 shadow-lg text-center hover:scale-105 transition-transform\">\r\n            <div className={`w-12 h-12 mx-auto mb-3 rounded-xl ${child?.pendingPayments > 0 ? 'bg-gradient-to-br from-red-500 to-rose-600' : 'bg-gradient-to-br from-green-500 to-emerald-600'} flex items-center justify-center shadow-md`}>\r\n              <Icon name=\"CreditCard\" size={24} className=\"text-white\" />\r\n            </div>\r\n            <div className={`font-display font-bold text-2xl ${child?.pendingPayments > 0 ? 'text-red-700' : 'text-green-700'}`}>\r\n              {child?.pendingPayments || 0}\r\n            </div>\r\n            <p className=\"font-body-medium text-xs text-gray-600 mt-2\">\r\n              Paiements dus\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChildOverviewCard;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst AttendanceTracker = ({ attendance, childName }) => {\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'present': return <Icon name=\"Check\" size={14} className=\"text-success\" />;\r\n      case 'absent': return <Icon name=\"X\" size={14} className=\"text-error\" />;\r\n      case 'late': return <Icon name=\"Clock\" size={14} className=\"text-warning\" />;\r\n      case 'excused': return <Icon name=\"FileText\" size={14} className=\"text-primary\" />;\r\n      default: return <Icon name=\"Minus\" size={14} className=\"text-muted-foreground\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'present': return 'bg-success text-white';\r\n      case 'absent': return 'bg-error text-white';\r\n      case 'late': return 'bg-warning text-white';\r\n      case 'excused': return 'bg-primary text-white';\r\n      default: return 'bg-muted text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    switch (status) {\r\n      case 'present': return 'Pr√©sent(e)';\r\n      case 'absent': return 'Absent(e)';\r\n      case 'late': return 'En retard';\r\n      case 'excused': return 'Excus√©(e)';\r\n      default: return 'Non renseign√©';\r\n    }\r\n  };\r\n\r\n  // Calculate statistics\r\n  const dates = Object?.keys(attendance) || [];\r\n  const totalDays = dates?.length;\r\n  const presentDays = dates?.filter(date => attendance?.[date] === 'present')?.length;\r\n  const absentDays = dates?.filter(date => attendance?.[date] === 'absent')?.length;\r\n  const lateDays = dates?.filter(date => attendance?.[date] === 'late')?.length;\r\n  const excusedDays = dates?.filter(date => attendance?.[date] === 'excused')?.length;\r\n\r\n  const attendanceRate = totalDays > 0 ? ((presentDays + excusedDays) / totalDays * 100) : 0;\r\n\r\n  // Get last 14 days for display\r\n  const sortedDates = dates?.sort((a, b) => new Date(b) - new Date(a))?.slice(0, 14);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-xl border-2 border-gray-200 p-8\">\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 shadow-md\">\r\n            <Icon name=\"Calendar\" size={24} className=\"text-white\" />\r\n          </div>\r\n          <h3 className=\"font-display font-bold text-2xl text-gray-900\">\r\n            Suivi des Pr√©sences\r\n          </h3>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl shadow-md\">\r\n          <Icon name=\"TrendingUp\" size={18} className=\"text-white\" />\r\n          <span className=\"font-body-bold text-sm text-white\">\r\n            {attendanceRate?.toFixed(1)}%\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\r\n        <div className=\"text-center p-5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl shadow-lg text-white hover:scale-105 transition-transform\">\r\n          <Icon name=\"Check\" size={24} className=\"mx-auto mb-2\" />\r\n          <div className=\"font-display font-bold text-2xl\">{presentDays}</div>\r\n          <p className=\"font-body-medium text-xs mt-1 text-white/90\">Pr√©sent(e)</p>\r\n        </div>\r\n\r\n        <div className=\"text-center p-5 bg-gradient-to-br from-red-500 to-rose-600 rounded-xl shadow-lg text-white hover:scale-105 transition-transform\">\r\n          <Icon name=\"X\" size={24} className=\"mx-auto mb-2\" />\r\n          <div className=\"font-display font-bold text-2xl\">{absentDays}</div>\r\n          <p className=\"font-body-medium text-xs mt-1 text-white/90\">Absent(e)</p>\r\n        </div>\r\n\r\n        <div className=\"text-center p-5 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl shadow-lg text-white hover:scale-105 transition-transform\">\r\n          <Icon name=\"Clock\" size={24} className=\"mx-auto mb-2\" />\r\n          <div className=\"font-display font-bold text-2xl\">{lateDays}</div>\r\n          <p className=\"font-body-medium text-xs mt-1 text-white/90\">Retards</p>\r\n        </div>\r\n\r\n        <div className=\"text-center p-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg text-white hover:scale-105 transition-transform\">\r\n          <Icon name=\"FileText\" size={24} className=\"mx-auto mb-2\" />\r\n          <div className=\"font-display font-bold text-2xl\">{excusedDays}</div>\r\n          <p className=\"font-body-medium text-xs mt-1 text-white/90\">Excus√©(e)</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Attendance Calendar - Last 14 days */}\r\n      <div>\r\n        <h4 className=\"font-heading font-heading-semibold text-lg text-card-foreground mb-4\">\r\n          Derniers jours de classe\r\n        </h4>\r\n        <div className=\"grid grid-cols-7 gap-2\">\r\n          {sortedDates?.map(date => {\r\n            const status = attendance?.[date];\r\n            const dateObj = new Date(date);\r\n            const isToday = new Date()?.toDateString() === dateObj?.toDateString();\r\n            \r\n            return (\r\n              <div\r\n                key={date}\r\n                onClick={() => setSelectedDate(selectedDate === date ? null : date)}\r\n                className={`relative p-2 rounded-lg border-2 cursor-pointer transition-all duration-200 ${\r\n                  selectedDate === date ? 'border-primary shadow-md' : 'border-border hover:border-primary/50'\r\n                } ${isToday ? 'ring-2 ring-primary/30' : ''}`}\r\n              >\r\n                <div className=\"text-center\">\r\n                  <div className=\"font-caption font-caption-normal text-xs text-muted-foreground mb-1\">\r\n                    {dateObj?.toLocaleDateString('fr-FR', { weekday: 'short' })}\r\n                  </div>\r\n                  <div className=\"font-body font-body-semibold text-sm text-card-foreground mb-2\">\r\n                    {dateObj?.getDate()}\r\n                  </div>\r\n                  <div className={`w-6 h-6 rounded-full flex items-center justify-center mx-auto ${getStatusColor(status)}`}>\r\n                    {getStatusIcon(status)}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Tooltip on selection */}\r\n                {selectedDate === date && (\r\n                  <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg whitespace-nowrap z-10\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"font-caption font-caption-semibold\">\r\n                        {dateObj?.toLocaleDateString('fr-FR', { \r\n                          weekday: 'long', \r\n                          day: 'numeric', \r\n                          month: 'long' \r\n                        })}\r\n                      </div>\r\n                      <div className=\"font-caption font-caption-normal mt-1\">\r\n                        {getStatusText(status)}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900\"></div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Legend */}\r\n        <div className=\"flex flex-wrap items-center justify-center gap-4 mt-6 p-5 bg-gradient-to-r from-gray-100 to-gray-50 rounded-xl border-2 border-gray-200\">\r\n          <div className=\"flex items-center gap-2 px-3 py-2 bg-white rounded-lg shadow-sm\">\r\n            <div className=\"w-5 h-5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center\">\r\n              <Icon name=\"Check\" size={12} className=\"text-white\" />\r\n            </div>\r\n            <span className=\"font-body-bold text-xs text-gray-700\">Pr√©sent(e)</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2 px-3 py-2 bg-white rounded-lg shadow-sm\">\r\n            <div className=\"w-5 h-5 bg-gradient-to-br from-red-500 to-rose-600 rounded-full flex items-center justify-center\">\r\n              <Icon name=\"X\" size={12} className=\"text-white\" />\r\n            </div>\r\n            <span className=\"font-body-bold text-xs text-gray-700\">Absent(e)</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2 px-3 py-2 bg-white rounded-lg shadow-sm\">\r\n            <div className=\"w-5 h-5 bg-gradient-to-br from-orange-500 to-amber-600 rounded-full flex items-center justify-center\">\r\n              <Icon name=\"Clock\" size={12} className=\"text-white\" />\r\n            </div>\r\n            <span className=\"font-body-bold text-xs text-gray-700\">En retard</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2 px-3 py-2 bg-white rounded-lg shadow-sm\">\r\n            <div className=\"w-5 h-5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center\">\r\n              <Icon name=\"FileText\" size={12} className=\"text-white\" />\r\n            </div>\r\n            <span className=\"font-body-bold text-xs text-gray-700\">Excus√©(e)</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {totalDays === 0 && (\r\n        <div className=\"text-center py-12 px-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border-2 border-gray-200\">\r\n          <div className=\"p-4 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 w-20 h-20 flex items-center justify-center mx-auto mb-4 shadow-lg\">\r\n            <Icon name=\"Calendar\" size={40} className=\"text-white\" />\r\n          </div>\r\n          <p className=\"font-body-bold text-base text-gray-700\">\r\n            Aucune donn√©e de pr√©sence disponible\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceTracker;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst GradesOverview = ({ grades }) => {\r\n  const getTrendIcon = (trend) => {\r\n    switch (trend) {\r\n      case 'up': return <Icon name=\"TrendingUp\" size={14} className=\"text-success\" />;\r\n      case 'down': return <Icon name=\"TrendingDown\" size={14} className=\"text-error\" />;\r\n      default: return <Icon name=\"Minus\" size={14} className=\"text-muted-foreground\" />;\r\n    }\r\n  };\r\n\r\n  const getGradeColor = (average) => {\r\n    if (average >= 16) return 'text-success';\r\n    if (average >= 14) return 'text-primary';\r\n    if (average >= 12) return 'text-warning';\r\n    return 'text-error';\r\n  };\r\n\r\n  const getGradeBgColor = (average) => {\r\n    if (average >= 16) return 'bg-success/10';\r\n    if (average >= 14) return 'bg-primary/10';\r\n    if (average >= 12) return 'bg-warning/10';\r\n    return 'bg-error/10';\r\n  };\r\n\r\n  const overallAverage = grades?.length > 0 \r\n    ? grades?.reduce((sum, grade) => sum + (grade?.average * grade?.coefficient), 0) / \r\n      grades?.reduce((sum, grade) => sum + grade?.coefficient, 0)\r\n    : 0;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-xl border-2 border-gray-200 p-8\">\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 shadow-md\">\r\n            <Icon name=\"BookOpen\" size={24} className=\"text-white\" />\r\n          </div>\r\n          <h3 className=\"font-display font-bold text-2xl text-gray-900\">\r\n            Aper√ßu des Notes\r\n          </h3>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl shadow-md text-white\">\r\n          <Icon name=\"BarChart3\" size={18} />\r\n          <span className=\"font-body-bold text-sm\">\r\n            {overallAverage?.toFixed(1)}/20\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {grades?.map(subject => (\r\n          <div key={subject?.id} className=\"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <h4 className=\"font-heading font-heading-semibold text-lg text-card-foreground\">\r\n                  {subject?.subject}\r\n                </h4>\r\n                <span className=\"px-2 py-1 bg-muted rounded text-xs font-caption font-caption-semibold text-muted-foreground\">\r\n                  Coeff. {subject?.coefficient}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                {getTrendIcon(subject?.trend)}\r\n                <div className={`font-heading font-heading-bold text-xl ${getGradeColor(subject?.average)}`}>\r\n                  {subject?.average}/20\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"w-full bg-muted rounded-full h-2 mb-3\">\r\n              <div \r\n                className={`h-2 rounded-full transition-all duration-300 ${\r\n                  subject?.average >= 16 ? 'bg-success' :\r\n                  subject?.average >= 14 ? 'bg-primary' :\r\n                  subject?.average >= 12 ? 'bg-warning' : 'bg-error'\r\n                }`}\r\n                style={{ width: `${(subject?.average / 20) * 100}%` }}\r\n              ></div>\r\n            </div>\r\n\r\n            {/* Last Grade Info */}\r\n            {subject?.lastGrade && (\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"font-body font-body-normal text-muted-foreground\">\r\n                    Derni√®re √©valuation:\r\n                  </span>\r\n                  <span className={`font-body font-body-semibold px-2 py-1 rounded ${getGradeBgColor(subject?.lastGrade?.value)}`}>\r\n                    {subject?.lastGrade?.value}/20 ({subject?.lastGrade?.type})\r\n                  </span>\r\n                </div>\r\n                <span className=\"font-caption font-caption-normal text-muted-foreground\">\r\n                  {subject?.lastGrade?.date}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n\r\n        {grades?.length === 0 && (\r\n          <div className=\"text-center py-12 px-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border-2 border-purple-200\">\r\n            <div className=\"p-4 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-600 w-20 h-20 flex items-center justify-center mx-auto mb-4 shadow-lg\">\r\n              <Icon name=\"BookOpen\" size={40} className=\"text-white\" />\r\n            </div>\r\n            <p className=\"font-body-bold text-base text-gray-700\">\r\n              Aucune note disponible pour le moment\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GradesOverview;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst PaymentStatus = ({ payments }) => {\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'text-success';\r\n      case 'pending': return 'text-warning';\r\n      case 'overdue': return 'text-error';\r\n      default: return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const getStatusBg = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'bg-success/10';\r\n      case 'pending': return 'bg-warning/10';\r\n      case 'overdue': return 'bg-error/10';\r\n      default: return 'bg-muted/10';\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'Pay√©';\r\n      case 'pending': return 'En attente';\r\n      case 'overdue': return 'En retard';\r\n      default: return 'Inconnu';\r\n    }\r\n  };\r\n\r\n  const formatAmount = (amount) => {\r\n    return new Intl.NumberFormat('fr-FR', {\r\n      style: 'currency',\r\n      currency: 'XAF',\r\n      minimumFractionDigits: 0\r\n    })?.format(amount);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString)?.toLocaleDateString('fr-FR', {\r\n      day: 'numeric',\r\n      month: 'long',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const totalPending = payments?.filter(p => p?.status === 'pending')?.reduce((sum, p) => sum + p?.amount, 0) || 0;\r\n  const totalPaid = payments?.filter(p => p?.status === 'completed')?.reduce((sum, p) => sum + p?.amount, 0) || 0;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-xl border-2 border-gray-200 p-8\">\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 shadow-md\">\r\n            <Icon name=\"CreditCard\" size={24} className=\"text-white\" />\r\n          </div>\r\n          <h3 className=\"font-display font-bold text-2xl text-gray-900\">\r\n            Statut des Paiements\r\n          </h3>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Payment Summary */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8\">\r\n        <div className=\"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl p-6 text-center shadow-lg text-white hover:scale-105 transition-transform\">\r\n          <Icon name=\"CheckCircle\" size={28} className=\"mx-auto mb-3\" />\r\n          <div className=\"font-display font-bold text-2xl\">\r\n            {formatAmount(totalPaid)}\r\n          </div>\r\n          <p className=\"font-body-medium text-sm mt-1 text-white/90\">\r\n            Montant pay√©\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl p-6 text-center shadow-lg text-white hover:scale-105 transition-transform\">\r\n          <Icon name=\"Clock\" size={28} className=\"mx-auto mb-3\" />\r\n          <div className=\"font-display font-bold text-2xl\">\r\n            {formatAmount(totalPending)}\r\n          </div>\r\n          <p className=\"font-body-medium text-sm mt-1 text-white/90\">\r\n            Montant en attente\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Payment List */}\r\n      <div className=\"space-y-4\">\r\n        {payments?.map(payment => (\r\n          <div key={payment?.id} className=\"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 rounded-xl p-5 hover:shadow-lg transition-all\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className={`w-3 h-3 rounded-full ${\r\n                  payment?.status === 'completed' ? 'bg-success' :\r\n                  payment?.status === 'pending' ? 'bg-warning' : 'bg-error'\r\n                }`}></div>\r\n                <h4 className=\"font-heading font-heading-semibold text-lg text-card-foreground\">\r\n                  {payment?.type}\r\n                </h4>\r\n              </div>\r\n              \r\n              <div className=\"text-right\">\r\n                <div className=\"font-heading font-heading-bold text-xl text-card-foreground\">\r\n                  {formatAmount(payment?.amount)}\r\n                </div>\r\n                <span className={`px-2 py-1 rounded text-xs font-caption font-caption-semibold ${getStatusBg(payment?.status)} ${getStatusColor(payment?.status)}`}>\r\n                  {getStatusText(payment?.status)}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2 text-sm\">\r\n              <p className=\"font-body font-body-normal text-muted-foreground\">\r\n                {payment?.description}\r\n              </p>\r\n              \r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Icon name=\"Building\" size={14} className=\"text-muted-foreground\" />\r\n                  <span className=\"font-caption font-caption-normal text-muted-foreground\">\r\n                    {payment?.provider}\r\n                  </span>\r\n                </div>\r\n                \r\n                <span className=\"font-caption font-caption-normal text-muted-foreground\">\r\n                  {payment?.status === 'completed' && payment?.paidDate ? \r\n                    `Pay√© le ${formatDate(payment?.paidDate)}` :\r\n                    `√âch√©ance: ${formatDate(payment?.dueDate)}`\r\n                  }\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Action Button for Pending Payments */}\r\n            {payment?.status === 'pending' && (\r\n              <div className=\"mt-4 pt-3 border-t-2 border-gray-200\">\r\n                <button className=\"w-full bg-gradient-to-br from-orange-500 to-amber-600 hover:from-orange-600 hover:to-amber-700 text-white font-body-bold py-3 px-4 rounded-xl transition-all hover:scale-105 shadow-lg flex items-center justify-center gap-2\">\r\n                  <Icon name=\"Smartphone\" size={18} />\r\n                  Payer via Mobile Money\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n\r\n        {payments?.length === 0 && (\r\n          <div className=\"text-center py-12 px-4 bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl border-2 border-orange-200\">\r\n            <div className=\"p-4 rounded-2xl bg-gradient-to-br from-orange-500 to-amber-600 w-20 h-20 flex items-center justify-center mx-auto mb-4 shadow-lg\">\r\n              <Icon name=\"CreditCard\" size={40} className=\"text-white\" />\r\n            </div>\r\n            <p className=\"font-body-bold text-base text-gray-700\">\r\n              Aucun paiement en cours\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Mobile Money Notice */}\r\n      {totalPending > 0 && (\r\n        <div className=\"mt-6 p-4 bg-primary/5 border border-primary/20 rounded-lg\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <Icon name=\"Info\" size={16} className=\"text-primary mt-0.5\" />\r\n            <div className=\"text-sm\">\r\n              <p className=\"font-body font-body-semibold text-primary mb-1\">\r\n                Paiement Mobile Money\r\n              </p>\r\n              <p className=\"font-body font-body-normal text-muted-foreground\">\r\n                Vous pouvez effectuer vos paiements via MTN Mobile Money ou Orange Money. \r\n                Les re√ßus de paiement sont g√©n√©r√©s automatiquement apr√®s confirmation.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentStatus;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst CommunicationCenter = ({ notifications, childName }) => {\r\n  const [filter, setFilter] = useState('all');\r\n  const [selectedNotification, setSelectedNotification] = useState(null);\r\n\r\n  const getTypeIcon = (type) => {\r\n    switch (type) {\r\n      case 'grades': return <Icon name=\"BookOpen\" size={16} className=\"text-success\" />;\r\n      case 'absences': return <Icon name=\"Calendar\" size={16} className=\"text-error\" />;\r\n      case 'payments': return <Icon name=\"CreditCard\" size={16} className=\"text-warning\" />;\r\n      case 'meetings': return <Icon name=\"Users\" size={16} className=\"text-primary\" />;\r\n      case 'announcements': return <Icon name=\"Megaphone\" size={16} className=\"text-accent-foreground\" />;\r\n      default: return <Icon name=\"Bell\" size={16} className=\"text-muted-foreground\" />;\r\n    }\r\n  };\r\n\r\n  const getTypeColor = (type) => {\r\n    switch (type) {\r\n      case 'grades': return 'bg-success/10';\r\n      case 'absences': return 'bg-error/10';\r\n      case 'payments': return 'bg-warning/10';\r\n      case 'meetings': return 'bg-primary/10';\r\n      case 'announcements': return 'bg-accent/10';\r\n      default: return 'bg-muted/10';\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'high': return 'border-l-error';\r\n      case 'medium': return 'border-l-warning';\r\n      case 'low': return 'border-l-success';\r\n      default: return 'border-l-muted';\r\n    }\r\n  };\r\n\r\n  const getTypeText = (type) => {\r\n    switch (type) {\r\n      case 'grades': return 'Notes';\r\n      case 'absences': return 'Absences';\r\n      case 'payments': return 'Paiements';\r\n      case 'meetings': return 'R√©unions';\r\n      case 'announcements': return 'Annonces';\r\n      default: return 'Autre';\r\n    }\r\n  };\r\n\r\n  const filteredNotifications = notifications?.filter(notif => \r\n    filter === 'all' || notif?.type === filter\r\n  ) || [];\r\n\r\n  const unreadCount = notifications?.filter(n => !n?.read)?.length || 0;\r\n\r\n  const filters = [\r\n    { value: 'all', label: 'Toutes', count: notifications?.length || 0 },\r\n    { value: 'grades', label: 'Notes', count: notifications?.filter(n => n?.type === 'grades')?.length || 0 },\r\n    { value: 'absences', label: 'Absences', count: notifications?.filter(n => n?.type === 'absences')?.length || 0 },\r\n    { value: 'payments', label: 'Paiements', count: notifications?.filter(n => n?.type === 'payments')?.length || 0 },\r\n    { value: 'meetings', label: 'R√©unions', count: notifications?.filter(n => n?.type === 'meetings')?.length || 0 }\r\n  ];\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString)?.toLocaleDateString('fr-FR', {\r\n      day: 'numeric',\r\n      month: 'long',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-xl border-2 border-gray-200 p-8\">\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-cyan-500 to-teal-600 shadow-md\">\r\n            <Icon name=\"MessageSquare\" size={24} className=\"text-white\" />\r\n          </div>\r\n          <h3 className=\"font-display font-bold text-2xl text-gray-900\">\r\n            Centre de Communication\r\n          </h3>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-br from-cyan-500 to-teal-600 rounded-xl shadow-md text-white\">\r\n          <Icon name=\"Bell\" size={18} />\r\n          <span className=\"font-body-bold text-sm\">\r\n            {unreadCount} non lu{unreadCount > 1 ? 's' : ''}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-wrap gap-2 mb-6\">\r\n        {filters?.map(filterOption => (\r\n          <button\r\n            key={filterOption?.value}\r\n            onClick={() => setFilter(filterOption?.value)}\r\n            className={`px-4 py-2.5 rounded-xl font-body-bold text-sm transition-all hover:scale-105 ${\r\n              filter === filterOption?.value\r\n                ? 'bg-gradient-to-br from-cyan-500 to-teal-600 text-white shadow-lg'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200 border-2 border-gray-200'\r\n            }`}\r\n          >\r\n            {filterOption?.label}\r\n            {filterOption?.count > 0 && (\r\n              <span className={`ml-2 px-2 py-1 rounded-full text-xs font-bold ${\r\n                filter === filterOption?.value\r\n                  ? 'bg-white/20 text-white' : 'bg-gray-300 text-gray-700'\r\n              }`}>\r\n                {filterOption?.count}\r\n              </span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Notifications List */}\r\n      <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n        {filteredNotifications?.map(notification => (\r\n          <div\r\n            key={notification?.id}\r\n            onClick={() => setSelectedNotification(\r\n              selectedNotification?.id === notification?.id ? null : notification\r\n            )}\r\n            className={`border-l-4 ${getPriorityColor(notification?.priority)} bg-gradient-to-r from-white to-gray-50 rounded-xl p-4 cursor-pointer transition-all hover:shadow-lg border-2 border-gray-200 ${\r\n              !notification?.read ? 'ring-2 ring-cyan-300' : ''\r\n            } ${\r\n              selectedNotification?.id === notification?.id ? 'shadow-xl scale-[1.02]' : ''\r\n            }`}\r\n          >\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className={`p-2 rounded-lg ${getTypeColor(notification?.type)}`}>\r\n                {getTypeIcon(notification?.type)}\r\n              </div>\r\n\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <h4 className=\"font-heading font-heading-semibold text-base text-card-foreground truncate\">\r\n                    {notification?.title}\r\n                  </h4>\r\n                  <div className=\"flex items-center gap-2 ml-3\">\r\n                    {!notification?.read && (\r\n                      <div className=\"w-2 h-2 bg-primary rounded-full\"></div>\r\n                    )}\r\n                    <span className=\"font-caption font-caption-normal text-xs text-muted-foreground whitespace-nowrap\">\r\n                      {formatDate(notification?.date)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <p className=\"font-body font-body-normal text-sm text-muted-foreground mb-3 line-clamp-2\">\r\n                  {notification?.message}\r\n                </p>\r\n\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className={`px-2 py-1 rounded text-xs font-caption font-caption-semibold ${getTypeColor(notification?.type)}`}>\r\n                      {getTypeText(notification?.type)}\r\n                    </span>\r\n                    <span className=\"font-caption font-caption-normal text-xs text-muted-foreground\">\r\n                      {notification?.school}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center gap-1\">\r\n                    <Icon \r\n                      name={selectedNotification?.id === notification?.id ? \"ChevronUp\" : \"ChevronDown\"} \r\n                      size={14} \r\n                      className=\"text-muted-foreground\" \r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Expanded Content */}\r\n                {selectedNotification?.id === notification?.id && (\r\n                  <div className=\"mt-4 pt-3 border-t border-border\">\r\n                    <div className=\"space-y-2 text-sm\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <span className=\"font-body font-body-semibold text-muted-foreground\">√âcole:</span>\r\n                        <span className=\"font-body font-body-normal text-card-foreground\">{notification?.school}</span>\r\n                      </div>\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <span className=\"font-body font-body-semibold text-muted-foreground\">Priorit√©:</span>\r\n                        <span className={`font-body font-body-normal capitalize ${\r\n                          notification?.priority === 'high' ? 'text-error' :\r\n                          notification?.priority === 'medium' ? 'text-warning' : 'text-success'\r\n                        }`}>\r\n                          {notification?.priority === 'high' ? 'Haute' :\r\n                           notification?.priority === 'medium' ? 'Moyenne' : 'Faible'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex gap-2 mt-4\">\r\n                      <button className=\"flex-1 bg-primary text-white font-caption font-caption-semibold py-2 px-3 rounded-lg hover:bg-primary/90 transition-colors\">\r\n                        Marquer comme lu\r\n                      </button>\r\n                      <button className=\"px-3 py-2 border border-border rounded-lg hover:bg-muted/20 transition-colors\">\r\n                        <Icon name=\"Archive\" size={14} className=\"text-muted-foreground\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {filteredNotifications?.length === 0 && (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"Inbox\" size={48} className=\"text-muted-foreground mx-auto mb-3\" />\r\n            <p className=\"font-body font-body-normal text-muted-foreground\">\r\n              {filter === 'all' ? 'Aucune notification' : `Aucune notification de type \"${filters?.find(f => f?.value === filter)?.label}\"`}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* SMS History Note */}\r\n      {notifications?.length > 0 && (\r\n        <div className=\"mt-6 p-3 bg-muted/10 rounded-lg border border-border\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Icon name=\"MessageSquare\" size={14} className=\"text-primary\" />\r\n            <span className=\"font-caption font-caption-semibold text-sm text-primary\">\r\n              Historique SMS\r\n            </span>\r\n          </div>\r\n          <p className=\"font-caption font-caption-normal text-xs text-muted-foreground mt-1\">\r\n            Toutes les notifications importantes sont √©galement envoy√©es par SMS au {childName ? `parent de ${childName}` : 'parent'}.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommunicationCenter;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst UpcomingEvents = ({ events, selectedSchool, selectedChild }) => {\r\n  const getEventIcon = (type) => {\r\n    switch (type) {\r\n      case 'meeting': return <Icon name=\"Users\" size={20} className=\"text-primary\" />;\r\n      case 'ceremony': return <Icon name=\"Award\" size={20} className=\"text-success\" />;\r\n      case 'excursion': return <Icon name=\"MapPin\" size={20} className=\"text-warning\" />;\r\n      case 'exam': return <Icon name=\"FileText\" size={20} className=\"text-error\" />;\r\n      default: return <Icon name=\"Calendar\" size={20} className=\"text-muted-foreground\" />;\r\n    }\r\n  };\r\n\r\n  const getEventColor = (type) => {\r\n    switch (type) {\r\n      case 'meeting': return 'bg-primary/10';\r\n      case 'ceremony': return 'bg-success/10';\r\n      case 'excursion': return 'bg-warning/10';\r\n      case 'exam': return 'bg-error/10';\r\n      default: return 'bg-muted/10';\r\n    }\r\n  };\r\n\r\n  const getEventTypeText = (type) => {\r\n    switch (type) {\r\n      case 'meeting': return 'R√©union';\r\n      case 'ceremony': return 'C√©r√©monie';\r\n      case 'excursion': return 'Sortie';\r\n      case 'exam': return 'Examen';\r\n      default: return '√âv√©nement';\r\n    }\r\n  };\r\n\r\n  // Filter events based on selected school and child\r\n  const filteredEvents = events?.filter(event => {\r\n    if (selectedSchool && selectedChild) {\r\n      return event?.school === selectedChild?.school;\r\n    }\r\n    if (selectedSchool) {\r\n      const schoolName = event?.school;\r\n      return schoolName?.includes(selectedSchool) || event?.child === selectedChild?.name;\r\n    }\r\n    return true;\r\n  }) || [];\r\n\r\n  // Sort events by date\r\n  const sortedEvents = filteredEvents?.sort((a, b) => new Date(a?.date) - new Date(b?.date));\r\n\r\n  const formatEventDate = (dateString) => {\r\n    const eventDate = new Date(dateString);\r\n    const today = new Date();\r\n    const timeDiff = eventDate - today;\r\n    const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));\r\n\r\n    let dateFormatted = eventDate?.toLocaleDateString('fr-FR', {\r\n      weekday: 'long',\r\n      day: 'numeric',\r\n      month: 'long'\r\n    });\r\n\r\n    if (daysDiff === 0) {\r\n      dateFormatted = `Aujourd'hui`;\r\n    } else if (daysDiff === 1) {\r\n      dateFormatted = `Demain`;\r\n    } else if (daysDiff > 0 && daysDiff <= 7) {\r\n      dateFormatted = `Dans ${daysDiff} jour${daysDiff > 1 ? 's' : ''}`;\r\n    }\r\n\r\n    return dateFormatted;\r\n  };\r\n\r\n  const formatTime = (timeString) => {\r\n    return timeString?.substring(0, 5);\r\n  };\r\n\r\n  const getDaysUntilEvent = (dateString) => {\r\n    const eventDate = new Date(dateString);\r\n    const today = new Date();\r\n    const timeDiff = eventDate - today;\r\n    const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));\r\n    return daysDiff;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-xl border-2 border-gray-200 p-8\">\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 shadow-md\">\r\n            <Icon name=\"Calendar\" size={24} className=\"text-white\" />\r\n          </div>\r\n          <h3 className=\"font-display font-bold text-2xl text-gray-900\">\r\n            √âv√©nements √† Venir\r\n          </h3>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-md text-white\">\r\n          <Icon name=\"Star\" size={18} />\r\n          <span className=\"font-body-bold text-sm\">\r\n            {sortedEvents?.length}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedChild && (\r\n        <div className=\"mb-6 p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border-2 border-indigo-200 shadow-sm\">\r\n          <p className=\"font-body-medium text-sm text-gray-700\">\r\n            √âv√©nements concernant <span className=\"font-body-bold text-indigo-700\">{selectedChild?.name}</span> √† \r\n            <span className=\"font-body-bold text-indigo-700\"> {selectedChild?.school}</span>\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"space-y-4\">\r\n        {sortedEvents?.map(event => {\r\n          const daysUntil = getDaysUntilEvent(event?.date);\r\n          const isUrgent = daysUntil <= 2;\r\n          const isPast = daysUntil < 0;\r\n\r\n          return (\r\n            <div\r\n              key={event?.id}\r\n              className={`border-l-4 rounded-xl p-5 transition-all border-2 hover:scale-[1.02] ${\r\n                isPast ? 'border-l-gray-400 border-gray-200 bg-gray-50 opacity-60' : \r\n                isUrgent ? 'border-l-red-500 border-red-200 bg-gradient-to-r from-red-50 to-rose-50 shadow-lg' : \r\n                'border-l-indigo-500 border-indigo-200 bg-gradient-to-r from-indigo-50 to-purple-50 shadow-md'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-start gap-4\">\r\n                <div className={`p-3 rounded-lg ${getEventColor(event?.type)} ${isPast ? 'opacity-60' : ''}`}>\r\n                  {getEventIcon(event?.type)}\r\n                </div>\r\n\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <h4 className=\"font-heading font-heading-semibold text-lg text-card-foreground\">\r\n                      {event?.title}\r\n                    </h4>\r\n                    <div className=\"text-right ml-3\">\r\n                      {isUrgent && !isPast && (\r\n                        <div className=\"inline-flex items-center gap-1 px-2 py-1 bg-error/10 text-error rounded-full mb-1\">\r\n                          <Icon name=\"AlertCircle\" size={12} />\r\n                          <span className=\"font-caption font-caption-semibold text-xs\">Urgent</span>\r\n                        </div>\r\n                      )}\r\n                      <div className={`font-caption font-caption-semibold text-xs ${\r\n                        isPast ? 'text-muted-foreground' : 'text-primary'\r\n                      }`}>\r\n                        {formatEventDate(event?.date)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Icon name=\"User\" size={14} className=\"text-muted-foreground\" />\r\n                      <span className=\"font-body font-body-normal text-muted-foreground\">\r\n                        Concern√©: <span className=\"font-body-semibold\">{event?.child}</span>\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Icon name=\"School\" size={14} className=\"text-muted-foreground\" />\r\n                      <span className=\"font-body font-body-normal text-muted-foreground\">\r\n                        {event?.school}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Icon name=\"Clock\" size={14} className=\"text-muted-foreground\" />\r\n                        <span className=\"font-body font-body-normal text-muted-foreground\">\r\n                          {formatTime(event?.time)}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Icon name=\"MapPin\" size={14} className=\"text-muted-foreground\" />\r\n                        <span className=\"font-body font-body-normal text-muted-foreground\">\r\n                          {event?.location}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between pt-2\">\r\n                      <span className={`px-3 py-1 rounded-full text-xs font-caption font-caption-semibold ${getEventColor(event?.type)}`}>\r\n                        {getEventTypeText(event?.type)}\r\n                      </span>\r\n\r\n                      {!isPast && (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <button className=\"px-3 py-1 bg-primary/10 text-primary hover:bg-primary/20 rounded-lg transition-colors\">\r\n                            <Icon name=\"Bell\" size={12} className=\"inline mr-1\" />\r\n                            Rappel\r\n                          </button>\r\n                          <button className=\"px-3 py-1 bg-success/10 text-success hover:bg-success/20 rounded-lg transition-colors\">\r\n                            <Icon name=\"Calendar\" size={12} className=\"inline mr-1\" />\r\n                            Agenda\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {sortedEvents?.length === 0 && (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"Calendar\" size={48} className=\"text-muted-foreground mx-auto mb-3\" />\r\n            <p className=\"font-body font-body-normal text-muted-foreground\">\r\n              Aucun √©v√©nement programm√©\r\n              {selectedChild && ` pour ${selectedChild?.name}`}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Calendar Integration Note */}\r\n      {sortedEvents?.length > 0 && (\r\n        <div className=\"mt-6 p-4 bg-accent/5 border border-accent/20 rounded-lg\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <Icon name=\"Calendar\" size={16} className=\"text-accent-foreground mt-0.5\" />\r\n            <div className=\"text-sm\">\r\n              <p className=\"font-body font-body-semibold text-accent-foreground mb-1\">\r\n                Synchronisation Calendrier\r\n              </p>\r\n              <p className=\"font-body font-body-normal text-muted-foreground\">\r\n                Vous pouvez synchroniser ces √©v√©nements avec votre calendrier personnel \r\n                et recevoir des rappels automatiques.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpcomingEvents;","import React, { useState, useEffect } from 'react';\nimport Icon from '../../../components/AppIcon';\nimport Button from '../../../components/ui/Button';\n\nconst MultiSchoolChildrenOverview = ({ \n  parentGlobalId, \n  children = [], \n  schools = [], \n  isLoading = false,\n}) => {\n  const [selectedChild, setSelectedChild] = useState(null);\n\n  useEffect(() => {\n    if (children.length > 0 && !selectedChild) {\n      setSelectedChild(children[0]);\n    }\n  }, [children]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-10 border-2 border-blue-200 shadow-xl text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4\"></div>\n          <span className=\"text-blue-900 font-display font-bold\">Chargement de vos enfants...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (children.length === 0) {\n    return (\n      <div className=\"text-center py-12 bg-gradient-to-br from-gray-50 to-white rounded-2xl border-2 border-gray-200 p-10 shadow-md\">\n        <div className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center shadow-md\">\n          <Icon name=\"Users\" size={40} className=\"text-white\" />\n        </div>\n        <h3 className=\"text-xl font-display font-bold text-gray-800 mb-2\">Aucun enfant trouv√©</h3>\n        <p className=\"text-gray-600\">Contactez le secr√©tariat pour inscrire vos enfants.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Vue d'ensemble multi-√©tablissements - Modernis√©e */}\n      <div className=\"bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl shadow-xl p-8 text-white\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center text-4xl shadow-lg\">\n              üè´\n            </div>\n            <div>\n              <h2 className=\"text-2xl font-display font-bold\">\n                Vos Enfants Multi-√âtablissements\n              </h2>\n              <p className=\"text-blue-100 mt-1\">\n                Un seul compte pour tous vos enfants dans diff√©rentes √©coles\n              </p>\n            </div>\n          </div>\n          <div className=\"bg-white/20 backdrop-blur-sm rounded-xl px-6 py-4 shadow-md border border-white/30\">\n            <div className=\"text-3xl font-display font-bold\">{children.length}</div>\n            <div className=\"text-sm text-blue-100 mt-1\">Enfant(s)</div>\n          </div>\n        </div>\n\n        {/* Statistiques rapides - Modernis√©es */}\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n          <div className=\"bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center border border-white/30 shadow-md\">\n            <div className=\"text-2xl font-display font-bold\">\n              {schools?.length || new Set(children.map(c => c.schoolId || c.school?.id)).size}\n            </div>\n            <div className=\"text-sm text-blue-100 mt-1\">√âtablissement(s)</div>\n          </div>\n          <div className=\"bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center border border-white/30 shadow-md\">\n            <div className=\"text-2xl font-display font-bold\">\n              {new Set(children.map(c => typeof c.school === 'object' ? c.school?.name : c.school)).size}\n            </div>\n            <div className=\"text-sm text-blue-100 mt-1\">√âcole(s) diff√©rente(s)</div>\n          </div>\n          <div className=\"bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center border border-white/30 shadow-md\">\n            <div className=\"text-2xl font-display font-bold\">\n              {children.filter(c => c.averageGrade > 0).length}\n            </div>\n            <div className=\"text-sm text-blue-100 mt-1\">Avec notes</div>\n          </div>\n        </div>\n      </div>\n\n      {/* S√©lecteur d'enfant - Modernis√© */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {children.map((child, index) => {\n          const childName = child.full_name || child.name || `${child.firstName || ''} ${child.lastName || ''}`;\n          const childInitial = childName.charAt(0).toUpperCase();\n          const childClass = typeof child.class === 'object' ? child.class?.name : child.class;\n          const childSchool = typeof child.school === 'object' ? child.school?.name : child.school;\n          \n          return (\n            <div\n              key={child.id || index}\n              onClick={() => setSelectedChild(child)}\n              className={`group rounded-2xl p-5 cursor-pointer transition-all duration-300 border-2 shadow-md hover:shadow-xl hover:scale-102 ${\n                selectedChild?.id === child.id\n                  ? 'border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50'\n                  : 'border-gray-200 bg-white hover:border-blue-300'\n              }`}\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-display font-bold text-xl shadow-md group-hover:scale-110 transition-transform\">\n                    {childInitial}\n                  </div>\n                  <div>\n                    <h3 className=\"font-display font-bold text-gray-900\">\n                      {childName}\n                    </h3>\n                    <p className=\"text-sm text-gray-600 font-body-medium\">\n                      {childClass || 'Classe non renseign√©e'}\n                    </p>\n                  </div>\n                </div>\n                {selectedChild?.id === child.id && (\n                  <div className=\"p-1.5 bg-blue-500 rounded-lg shadow-md\">\n                    <Icon name=\"Check\" size={18} className=\"text-white\" />\n                  </div>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center text-sm bg-gray-50 rounded-lg p-2\">\n                  <div className=\"p-1 bg-indigo-100 rounded-md mr-2\">\n                    <Icon name=\"School\" size={14} className=\"text-indigo-600\" />\n                  </div>\n                  <span className=\"font-body-bold text-gray-800\">{childSchool || '√âcole non renseign√©e'}</span>\n                </div>\n                {child.matricule && (\n                  <div className=\"flex items-center text-sm bg-gray-50 rounded-lg p-2\">\n                    <div className=\"p-1 bg-purple-100 rounded-md mr-2\">\n                      <Icon name=\"Tag\" size={14} className=\"text-purple-600\" />\n                    </div>\n                    <span className=\"font-body-medium text-gray-700\">{child.matricule}</span>\n                  </div>\n                )}\n              </div>\n\n              {(child.averageGrade > 0 || child.attendanceRate > 0) && (\n                <div className=\"mt-4 pt-4 border-t-2 border-gray-100 flex justify-between\">\n                  {child.averageGrade > 0 && (\n                    <div className=\"text-center\">\n                      <div className=\"text-lg font-display font-bold text-blue-600\">{child.averageGrade.toFixed(1)}/20</div>\n                      <div className=\"text-xs text-gray-500\">Moyenne</div>\n                    </div>\n                  )}\n                  {child.attendanceRate > 0 && (\n                    <div className=\"text-center\">\n                      <div className=\"text-lg font-display font-bold text-green-600\">{child.attendanceRate}%</div>\n                      <div className=\"text-xs text-gray-500\">Pr√©sence</div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* D√©tails de l'enfant s√©lectionn√© - Modernis√© */}\n      {selectedChild && (\n        <div className=\"bg-white border-2 border-gray-200 rounded-2xl p-8 shadow-lg\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div className=\"flex items-center space-x-5\">\n              <div className=\"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white text-2xl font-display font-bold shadow-md\">\n                {(selectedChild.full_name || selectedChild.name || '?').charAt(0).toUpperCase()}\n              </div>\n              <div>\n                <h2 className=\"text-2xl font-display font-bold text-gray-900\">\n                  {selectedChild.full_name || selectedChild.name || 'Nom non disponible'}\n                </h2>\n                <p className=\"text-gray-600 font-body-medium mt-1\">\n                  {typeof selectedChild.class === 'object' ? selectedChild.class?.name : selectedChild.class} \n                  {' ‚Ä¢ '}\n                  {typeof selectedChild.school === 'object' ? selectedChild.school?.name : selectedChild.school}\n                </p>\n                {selectedChild.matricule && (\n                  <p className=\"text-sm text-gray-500 mt-1 flex items-center gap-2\">\n                    <Icon name=\"Tag\" size={14} />\n                    Matricule: {selectedChild.matricule}\n                  </p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Statistiques de l'enfant */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8\">\n            {selectedChild.averageGrade > 0 && (\n              <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 text-center border-2 border-blue-200\">\n                <div className=\"text-2xl font-display font-bold text-blue-600\">{selectedChild.averageGrade.toFixed(1)}/20</div>\n                <div className=\"text-sm text-gray-600 mt-1\">Moyenne g√©n√©rale</div>\n              </div>\n            )}\n            {selectedChild.attendanceRate > 0 && (\n              <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 text-center border-2 border-green-200\">\n                <div className=\"text-2xl font-display font-bold text-green-600\">{selectedChild.attendanceRate}%</div>\n                <div className=\"text-sm text-gray-600 mt-1\">Taux de pr√©sence</div>\n              </div>\n            )}\n            {selectedChild.unreadNotifications > 0 && (\n              <div className=\"bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl p-4 text-center border-2 border-orange-200\">\n                <div className=\"text-2xl font-display font-bold text-orange-600\">{selectedChild.unreadNotifications}</div>\n                <div className=\"text-sm text-gray-600 mt-1\">Notifications</div>\n              </div>\n            )}\n            {selectedChild.pendingPayments > 0 && (\n              <div className=\"bg-gradient-to-br from-red-50 to-rose-50 rounded-xl p-4 text-center border-2 border-red-200\">\n                <div className=\"text-2xl font-display font-bold text-red-600\">{selectedChild.pendingPayments}</div>\n                <div className=\"text-sm text-gray-600 mt-1\">Paiements en attente</div>\n              </div>\n            )}\n          </div>\n\n          {/* Informations d√©taill√©es simplifi√©es */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Informations scolaires */}\n            <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border-2 border-blue-200\">\n              <h3 className=\"font-display font-bold text-xl text-blue-900 mb-4 flex items-center gap-2\">\n                <Icon name=\"School\" size={24} className=\"text-blue-600\" />\n                Informations Scolaires\n              </h3>\n              <div className=\"space-y-3\">\n                <div className=\"bg-white rounded-lg p-3\">\n                  <span className=\"text-sm text-gray-500\">√âtablissement:</span>\n                  <p className=\"font-body-bold text-gray-900\">\n                    {typeof selectedChild.school === 'object' ? selectedChild.school?.name : selectedChild.school || 'Non renseign√©'}\n                  </p>\n                </div>\n                <div className=\"bg-white rounded-lg p-3\">\n                  <span className=\"text-sm text-gray-500\">Classe:</span>\n                  <p className=\"font-body-bold text-gray-900\">\n                    {typeof selectedChild.class === 'object' ? selectedChild.class?.name : selectedChild.class || 'Non renseign√©e'}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Contact et notifications */}\n            <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border-2 border-purple-200\">\n              <h3 className=\"font-display font-bold text-xl text-purple-900 mb-4 flex items-center gap-2\">\n                <Icon name=\"Bell\" size={24} className=\"text-purple-600\" />\n                Suivi et Notifications\n              </h3>\n              <div className=\"space-y-3\">\n                {selectedChild.email && (\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <span className=\"text-sm text-gray-500\">Email:</span>\n                    <p className=\"font-body-bold text-gray-900\">{selectedChild.email}</p>\n                  </div>\n                )}\n                {selectedChild.phone && (\n                  <div className=\"bg-white rounded-lg p-3\">\n                    <span className=\"text-sm text-gray-500\">T√©l√©phone:</span>\n                    <p className=\"font-body-bold text-gray-900\">{selectedChild.phone}</p>\n                  </div>\n                )}\n                {!selectedChild.email && !selectedChild.phone && (\n                  <div className=\"bg-white rounded-lg p-3 text-center text-gray-500\">\n                    <Icon name=\"Info\" size={20} className=\"mx-auto mb-2\" />\n                    <p className=\"text-sm\">Aucune information de contact disponible</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MultiSchoolChildrenOverview;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\n/**\r\n * Modal pour g√©rer les informations d'un enfant\r\n * Permet au parent de :\r\n * - Voir les informations de l'enfant\r\n * - Modifier le mot de passe de l'enfant\r\n * - Mettre √† jour le t√©l√©phone\r\n */\r\nconst ManageChildModal = ({ child, isOpen, onClose, onUpdate }) => {\r\n  const [activeTab, setActiveTab] = useState('info'); // 'info' ou 'password'\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // √âtat pour le changement de mot de passe\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  \r\n  // √âtat pour les informations\r\n  const [phone, setPhone] = useState(child?.phone || '');\r\n\r\n  if (!isOpen || !child) return null;\r\n\r\n  const handlePasswordChange = async () => {\r\n    // Validation\r\n    if (!newPassword) {\r\n      alert('Veuillez saisir un nouveau mot de passe');\r\n      return;\r\n    }\r\n\r\n    if (newPassword.length < 8) {\r\n      alert('Le mot de passe doit contenir au moins 8 caract√®res');\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      alert('Les mots de passe ne correspondent pas');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      // R√©cup√©rer l'URL de la Edge Function\r\n      const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\r\n      const functionUrl = `${supabaseUrl}/functions/v1/update-student-password`;\r\n      \r\n      // R√©cup√©rer la session courante pour l'authentification\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      \r\n      if (!session) {\r\n        alert('‚ùå Vous devez √™tre connect√© pour effectuer cette action');\r\n        return;\r\n      }\r\n\r\n      // Appeler la Edge Function\r\n      const response = await fetch(functionUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${session.access_token}`,\r\n          'apikey': import.meta.env.VITE_SUPABASE_ANON_KEY\r\n        },\r\n        body: JSON.stringify({\r\n          student_user_id: child.user_id,\r\n          new_password: newPassword,\r\n          parent_user_id: session.user.id\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(result.error || 'Erreur lors du changement de mot de passe');\r\n      }\r\n\r\n      alert(`‚úÖ Mot de passe modifi√© avec succ√®s pour ${child.full_name}\\n\\nNouveau mot de passe: ${newPassword}\\n\\n‚ö†Ô∏è Communiquez ce mot de passe √† votre enfant de mani√®re s√©curis√©e.`);\r\n      setNewPassword('');\r\n      setConfirmPassword('');\r\n      onClose();\r\n      \r\n    } catch (error) {\r\n      console.error('Erreur changement mot de passe:', error);\r\n      \r\n      // Si l'edge function n'existe pas ou n'est pas d√©ploy√©e\r\n      if (error.message.includes('fetch') || error.message.includes('404')) {\r\n        alert(\r\n          '‚ö†Ô∏è Service de modification de mot de passe non disponible\\n\\n' +\r\n          `Pour modifier le mot de passe de ${child.full_name}, veuillez:\\n\\n` +\r\n          `1. Contacter l'√©tablissement\\n` +\r\n          `2. Ou demander √† l'administrateur de d√©ployer la fonction Supabase\\n\\n` +\r\n          `Nouveau mot de passe souhait√©: ${newPassword}\\n\\n` +\r\n          'Instructions de d√©ploiement dans supabase/functions/update-student-password/'\r\n        );\r\n      } else {\r\n        alert(`‚ùå Erreur: ${error.message}`);\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateInfo = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Mettre √† jour le t√©l√©phone dans la table users\r\n      const { error } = await supabase\r\n        .from('users')\r\n        .update({ phone: phone })\r\n        .eq('id', child.user_id);\r\n\r\n      if (error) throw error;\r\n\r\n      alert(`‚úÖ Informations mises √† jour pour ${child.full_name}`);\r\n      onUpdate?.();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Erreur mise √† jour info:', error);\r\n      alert(`‚ùå Erreur: ${error.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateRandomPassword = () => {\r\n    const length = 12;\r\n    const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%';\r\n    let password = '';\r\n    for (let i = 0; i < length; i++) {\r\n      password += charset.charAt(Math.floor(Math.random() * charset.length));\r\n    }\r\n    setNewPassword(password);\r\n    setConfirmPassword(password);\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mr-3\">\r\n              <Icon name=\"User\" size={24} className=\"text-primary\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                G√©rer {child.full_name}\r\n              </h2>\r\n              <p className=\"text-sm text-gray-500\">\r\n                {child.class_name} ‚Ä¢ {child.matricule || 'N/A'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n          >\r\n            <Icon name=\"X\" size={20} className=\"text-gray-500\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"border-b px-6\">\r\n          <div className=\"flex space-x-4\">\r\n            <button\r\n              onClick={() => setActiveTab('info')}\r\n              className={`py-3 px-4 border-b-2 font-medium transition-colors ${\r\n                activeTab === 'info'\r\n                  ? 'border-primary text-primary'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\r\n              }`}\r\n            >\r\n              <Icon name=\"Info\" size={16} className=\"inline mr-2\" />\r\n              Informations\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('password')}\r\n              className={`py-3 px-4 border-b-2 font-medium transition-colors ${\r\n                activeTab === 'password'\r\n                  ? 'border-primary text-primary'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\r\n              }`}\r\n            >\r\n              <Icon name=\"Lock\" size={16} className=\"inline mr-2\" />\r\n              Mot de passe\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {activeTab === 'info' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                <div className=\"flex items-start\">\r\n                  <Icon name=\"Info\" size={20} className=\"text-blue-600 mr-3 flex-shrink-0 mt-0.5\" />\r\n                  <div className=\"text-sm text-blue-800\">\r\n                    <p className=\"font-medium\">Informations de l'√©l√®ve</p>\r\n                    <p className=\"mt-1\">\r\n                      Ces informations sont g√©r√©es par l'√©tablissement. Vous pouvez mettre √† jour le num√©ro de t√©l√©phone de contact.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Nom complet\r\n                  </label>\r\n                  <div className=\"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700\">\r\n                    {child.full_name}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Matricule\r\n                  </label>\r\n                  <div className=\"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700\">\r\n                    {child.matricule || 'Non assign√©'}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Classe\r\n                  </label>\r\n                  <div className=\"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700\">\r\n                    {child.class_name || 'Non assign√©'}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Email de connexion\r\n                  </label>\r\n                  <div className=\"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 text-sm\">\r\n                    {child.email || 'Non assign√©'}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <Input\r\n                    label=\"T√©l√©phone de contact\"\r\n                    value={phone}\r\n                    onChange={(e) => setPhone(e.target.value)}\r\n                    placeholder=\"+237 6XX XXX XXX\"\r\n                    helperText=\"Num√©ro pour contacter l'√©l√®ve\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n                <Button variant=\"outline\" onClick={onClose}>\r\n                  Annuler\r\n                </Button>\r\n                <Button onClick={handleUpdateInfo} disabled={loading}>\r\n                  {loading ? 'Enregistrement...' : 'Enregistrer'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'password' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\r\n                <div className=\"flex items-start\">\r\n                  <Icon name=\"AlertTriangle\" size={20} className=\"text-amber-600 mr-3 flex-shrink-0 mt-0.5\" />\r\n                  <div className=\"text-sm text-amber-800\">\r\n                    <p className=\"font-medium\">Modification du mot de passe</p>\r\n                    <p className=\"mt-1\">\r\n                      Apr√®s modification, votre enfant devra utiliser ce nouveau mot de passe pour se connecter.\r\n                      Assurez-vous de bien le noter et de le communiquer √† votre enfant.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    label=\"Nouveau mot de passe *\"\r\n                    type={showPassword ? 'text' : 'password'}\r\n                    value={newPassword}\r\n                    onChange={(e) => setNewPassword(e.target.value)}\r\n                    placeholder=\"Minimum 8 caract√®res\"\r\n                    helperText=\"Utilisez un mot de passe fort avec lettres, chiffres et caract√®res sp√©ciaux\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    className=\"absolute right-3 top-9 text-gray-500 hover:text-gray-700 transition-colors\"\r\n                  >\r\n                    <Icon name={showPassword ? 'EyeOff' : 'Eye'} size={18} />\r\n                  </button>\r\n                </div>\r\n\r\n                <Input\r\n                  label=\"Confirmer le mot de passe *\"\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  value={confirmPassword}\r\n                  onChange={(e) => setConfirmPassword(e.target.value)}\r\n                  placeholder=\"Retapez le mot de passe\"\r\n                />\r\n\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={generateRandomPassword}\r\n                  className=\"w-full\"\r\n                >\r\n                  <Icon name=\"RefreshCw\" size={16} className=\"mr-2\" />\r\n                  G√©n√©rer un mot de passe al√©atoire\r\n                </Button>\r\n              </div>\r\n\r\n              {newPassword && (\r\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                  <p className=\"text-sm font-medium text-green-800 mb-2\">\r\n                    Nouveau mot de passe √† communiquer :\r\n                  </p>\r\n                  <div className=\"bg-white px-3 py-2 rounded border border-green-300 font-mono text-sm\">\r\n                    {newPassword}\r\n                  </div>\r\n                  <p className=\"text-xs text-green-700 mt-2\">\r\n                    ‚ö†Ô∏è Notez ce mot de passe dans un endroit s√ªr avant de valider\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n                <Button variant=\"outline\" onClick={onClose}>\r\n                  Annuler\r\n                </Button>\r\n                <Button\r\n                  onClick={handlePasswordChange}\r\n                  disabled={loading || !newPassword || newPassword !== confirmPassword}\r\n                >\r\n                  {loading ? 'Modification...' : 'Modifier le mot de passe'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageChildModal;\r\n","import React, { useState, useEffect } from 'react';\nimport { Link, useSearchParams } from 'react-router-dom';\nimport Header from '../../components/ui/Header';\nimport Sidebar from '../../components/ui/Sidebar';\nimport Icon from '../../components/AppIcon';\nimport { useParentDashboardData } from '../../hooks/useParentDashboardData';\n\nimport ChildSelector from './components/ChildSelector';\nimport ChildOverviewCard from './components/ChildOverviewCard';\nimport AttendanceTracker from './components/AttendanceTracker';\nimport GradesOverview from './components/GradesOverview';\nimport PaymentStatus from './components/PaymentStatus';\nimport CommunicationCenter from './components/CommunicationCenter';\nimport UpcomingEvents from './components/UpcomingEvents';\nimport MultiSchoolChildrenOverview from './components/MultiSchoolChildrenOverview';\nimport ManageChildModal from './components/ManageChildModal';\n\nconst ParentDashboard = () => {\n  const [searchParams] = useSearchParams();\n  const currentTab = searchParams.get('tab') || 'dashboard';\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [viewMode, setViewMode] = useState('traditional'); // 'traditional' ou 'multischool'\n  const [managingChild, setManagingChild] = useState(null); // Pour le modal de gestion\n  const [isTransitioning, setIsTransitioning] = useState(false); // Pour transition fluide entre enfants\n\n  // Utiliser le hook unifi√© pour les donn√©es\n  const {\n    parentProfile,\n    children,\n    selectedChild,\n    selectedSchool,\n    gradesData,\n    attendanceData,\n    paymentData,\n    notificationsData,\n    upcomingEvents,\n    schools,\n    loading,\n    isLoading,\n    handleChildSelect,\n    handleSchoolChange,\n    getAllNotifications,\n    getUnreadCount,\n    getChildrenBySchool\n  } = useParentDashboardData();\n\n  // Donn√©es parent pour compatibilit√© avec les composants existants\n  const parentData = {\n    id: parentProfile?.id || \"parent-loading\",\n    name: parentProfile?.full_name || \"Chargement...\",\n    phone: parentProfile?.phone || \"\",\n    children: children.map(child => {\n      return {\n        id: child.id,\n        user_id: child.user_id, // Pour ManageChildModal\n        name: child.full_name || child.name,\n        full_name: child.full_name || child.name, // Pour ManageChildModal\n        matricule: child.matricule,\n        class: typeof child.class === 'object' ? child.class?.name : child.class,\n        class_name: typeof child.class === 'object' ? child.class?.name : child.class, // Pour ManageChildModal\n        school: typeof child.school === 'object' ? child.school?.name : child.school,\n        schoolId: typeof child.school === 'object' ? child.school?.id : child.schoolId,\n        photo: child.photo_url || child.photo,\n        email: child.email, // Pour ManageChildModal\n        phone: child.phone, // Pour ManageChildModal\n        averageGrade: child.averageGrade || 0,\n        attendanceRate: child.attendanceRate || 0,\n        unreadNotifications: child.unreadNotifications || 0,\n        pendingPayments: child.pendingPayments || 0\n      };\n    })\n  };\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  const getGreeting = () => {\n    const hour = currentTime?.getHours();\n    if (hour < 12) return \"Bonjour\";\n    if (hour < 18) return \"Bon apr√®s-midi\";\n    return \"Bonsoir\";\n  };\n\n  // Fonction helper pour transformer les √©coles\n  const getSchools = () => {\n    return schools.map(school => ({\n      id: school.id,\n      name: school.name\n    }));\n  };\n\n  // Trouver l'enfant s√©lectionn√© transform√©\n  const selectedChildTransformed = parentData.children.find(c => c.id === selectedChild?.id);\n\n  // Gestion de la transition entre enfants\n  const handleChildSelectWithTransition = (child) => {\n    setIsTransitioning(true);\n    handleChildSelect(child);\n    // R√©duire le temps de transition visible\n    setTimeout(() => setIsTransitioning(false), 300);\n  };\n\n  const renderTabContent = () => {\n    switch (currentTab) {\n      case 'children':\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"font-heading font-heading-bold text-2xl text-card-foreground\">Mes Enfants</h2>\n            <ChildSelector\n              children={parentData?.children}\n              schools={getSchools()}\n              selectedChild={selectedChild}\n              selectedSchool={selectedSchool}\n              onChildSelect={handleChildSelectWithTransition}\n              onSchoolChange={handleSchoolChange}\n              onManageChild={(child) => setManagingChild(child)}\n            />\n            \n            <div className=\"relative\">\n              {isTransitioning && (\n                <div className=\"absolute inset-0 bg-white/60 backdrop-blur-sm z-10 flex items-center justify-center rounded-2xl\">\n                  <div className=\"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border-2 border-indigo-200 shadow-xl\">\n                    <div className=\"animate-spin rounded-full h-10 w-10 border-4 border-indigo-200 border-t-indigo-600 mx-auto mb-3\"></div>\n                    <span className=\"text-indigo-900 font-body-bold text-sm\">Chargement...</span>\n                  </div>\n                </div>\n              )}\n              \n              <div className={`transition-opacity duration-300 ${isTransitioning ? 'opacity-50' : 'opacity-100'}`}>\n                {selectedChildTransformed && (\n                  <ChildOverviewCard child={selectedChildTransformed} />\n                )}\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'grades':\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"font-heading font-heading-bold text-2xl text-card-foreground\">Notes et R√©sultats</h2>\n            {selectedChildTransformed ? (\n              <GradesOverview \n                child={selectedChildTransformed}\n                grades={gradesData?.[selectedChild?.id] || []}\n              />\n            ) : (\n              <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border-2 border-blue-200 p-10 text-center shadow-md\">\n                <div className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-md\">\n                  <Icon name=\"BookOpen\" size={40} className=\"text-white\" />\n                </div>\n                <p className=\"text-blue-900 font-display font-bold text-lg\">S√©lectionnez un enfant pour voir les notes</p>\n              </div>\n            )}\n          </div>\n        );\n\n      case 'attendance':\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"font-heading font-heading-bold text-2xl text-card-foreground\">Pr√©sences et Absences</h2>\n            {selectedChildTransformed ? (\n              <AttendanceTracker \n                child={selectedChildTransformed}\n                attendance={attendanceData?.[selectedChild?.id] || {}}\n              />\n            ) : (\n              <div className=\"bg-gradient-to-br from-cyan-50 to-teal-50 rounded-2xl border-2 border-cyan-200 p-10 text-center shadow-md\">\n                <div className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-cyan-500 to-teal-600 flex items-center justify-center shadow-md\">\n                  <Icon name=\"Calendar\" size={40} className=\"text-white\" />\n                </div>\n                <p className=\"text-cyan-900 font-display font-bold text-lg\">S√©lectionnez un enfant pour voir les pr√©sences</p>\n              </div>\n            )}\n          </div>\n        );\n\n      case 'payments':\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"font-heading font-heading-bold text-2xl text-card-foreground\">Paiements et Frais</h2>\n            {selectedChildTransformed ? (\n              <PaymentStatus \n                child={selectedChildTransformed}\n                payments={paymentData?.[selectedChild?.id] || []}\n              />\n            ) : (\n              <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border-2 border-green-200 p-10 text-center shadow-md\">\n                <div className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-md\">\n                  <Icon name=\"CreditCard\" size={40} className=\"text-white\" />\n                </div>\n                <p className=\"text-green-900 font-display font-bold text-lg\">S√©lectionnez un enfant pour voir les paiements</p>\n              </div>\n            )}\n          </div>\n        );\n\n      case 'messages':\n        return (\n          <div className=\"space-y-6\">\n            <h2 className=\"font-heading font-heading-bold text-2xl text-card-foreground\">Communications</h2>\n            {selectedChildTransformed ? (\n              <CommunicationCenter \n                child={selectedChildTransformed}\n                notifications={notificationsData?.[selectedChild?.id] || []}\n              />\n            ) : (\n              <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl border-2 border-purple-200 p-10 text-center shadow-md\">\n                <div className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center shadow-md\">\n                  <Icon name=\"MessageCircle\" size={40} className=\"text-white\" />\n                </div>\n                <p className=\"text-purple-900 font-display font-bold text-lg\">S√©lectionnez un enfant pour voir les communications</p>\n              </div>\n            )}\n          </div>\n        );\n\n      default: // 'dashboard'\n        return (\n          <>\n            {/* S√©lecteur de mode de vue - Modernis√© */}\n            <div className=\"flex items-center justify-between bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 border-2 border-gray-200 shadow-md\">\n              <div>\n                <h3 className=\"font-display font-bold text-xl text-gray-900\">Mode d'affichage</h3>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  Choisissez comment voir vos enfants\n                </p>\n              </div>\n              <div className=\"flex bg-gray-100 rounded-xl p-1.5 shadow-inner\">\n                <button\n                  onClick={() => setViewMode('traditional')}\n                  className={`px-5 py-3 rounded-lg font-body-bold transition-all duration-200 ${\n                    viewMode === 'traditional'\n                      ? 'bg-gradient-to-br from-indigo-600 to-purple-600 text-white shadow-lg scale-105'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-200'\n                  }`}\n                >\n                  <Icon name=\"Users\" size={18} className=\"mr-2 inline\" />\n                  Vue Traditionnelle\n                </button>\n                <button\n                  onClick={() => setViewMode('multischool')}\n                  className={`px-5 py-3 rounded-lg font-body-bold transition-all duration-200 ${\n                    viewMode === 'multischool'\n                      ? 'bg-gradient-to-br from-purple-600 to-pink-600 text-white shadow-lg scale-105'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-200'\n                  }`}\n                >\n                  <Icon name=\"Globe\" size={18} className=\"mr-2 inline\" />\n                  Multi-√âtablissements\n                </button>\n              </div>\n            </div>\n\n            {/* Vue Multi-√âtablissements */}\n            {viewMode === 'multischool' && (\n              <MultiSchoolChildrenOverview \n                parentGlobalId={parentProfile?.id || \"global-parent-1\"}\n                children={parentData.children}\n                schools={schools}\n                isLoading={isLoading}\n              />\n            )}\n\n            {/* Vue Traditionnelle */}\n            {viewMode === 'traditional' && (\n              <>\n                {/* Multi-School Child Selector */}\n                <ChildSelector\n                  children={parentData?.children}\n                  schools={getSchools()}\n                  selectedChild={selectedChild}\n                  selectedSchool={selectedSchool}\n                  onChildSelect={handleChildSelectWithTransition}\n                  onSchoolChange={handleSchoolChange}\n                  onManageChild={(child) => setManagingChild(child)}\n                />\n\n                {/* Container avec transition fluide */}\n                <div className=\"relative\">\n                  {/* Overlay de transition */}\n                  {isTransitioning && (\n                    <div className=\"absolute inset-0 bg-white/60 backdrop-blur-sm z-10 flex items-center justify-center rounded-2xl\">\n                      <div className=\"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-6 border-2 border-indigo-200 shadow-xl\">\n                        <div className=\"animate-spin rounded-full h-10 w-10 border-4 border-indigo-200 border-t-indigo-600 mx-auto mb-3\"></div>\n                        <span className=\"text-indigo-900 font-body-bold text-sm\">Chargement...</span>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Contenu avec transition d'opacit√© */}\n                  <div className={`transition-opacity duration-300 ${isTransitioning ? 'opacity-50' : 'opacity-100'}`}>\n                    {/* Child Overview Card */}\n                    {selectedChildTransformed && (\n                      <ChildOverviewCard child={selectedChildTransformed} />\n                    )}\n\n                    {/* Main Dashboard Content */}\n                    {selectedChildTransformed && (\n                      <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6 mt-6\">\n                        {/* Left Column - Grades and Attendance */}\n                        <div className=\"xl:col-span-2 space-y-6\">\n                          <GradesOverview \n                            child={selectedChildTransformed}\n                            grades={gradesData?.[selectedChild?.id] || []}\n                          />\n                          <AttendanceTracker \n                            child={selectedChildTransformed}\n                            attendance={attendanceData?.[selectedChild?.id] || {}}\n                          />\n                        </div>\n\n                        {/* Right Column - Payment and Communication */}\n                        <div className=\"space-y-6\">\n                          <PaymentStatus \n                            child={selectedChildTransformed}\n                            payments={paymentData?.[selectedChild?.id] || []}\n                          />\n                          <CommunicationCenter \n                            child={selectedChildTransformed}\n                            notifications={notificationsData?.[selectedChild?.id] || []}\n                          />\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Upcoming Events */}\n                    <UpcomingEvents events={upcomingEvents} />\n                  </div>\n                </div>\n              </>\n            )}\n          </>\n        );\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n        <Header \n          userRole=\"parent\" \n          userName={parentData?.name}\n          onToggleSidebar={() => setSidebarCollapsed(!sidebarCollapsed)}\n        />\n        <Sidebar \n          userRole=\"parent\"\n          isCollapsed={sidebarCollapsed}\n          onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\n        />\n        <main className={`pt-20 sm:pt-16 transition-all duration-300 ${\n          sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-64'\n        }`}>\n          <div className=\"px-2 sm:px-4 lg:px-6 py-2 sm:py-3 space-y-2 sm:space-y-3 w-full overflow-x-hidden\">\n            {/* Loading State - Modernis√© */}\n            {isLoading && children.length === 0 && (\n              <div className=\"flex items-center justify-center min-h-[400px]\">\n                <div className=\"text-center bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-10 border-2 border-indigo-200 shadow-xl\">\n                  <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-indigo-200 border-t-indigo-600 mx-auto mb-6\"></div>\n                  <p className=\"text-indigo-900 font-display font-bold text-xl\">Chargement des donn√©es...</p>\n                  <p className=\"text-indigo-600 text-sm mt-2\">Veuillez patienter</p>\n                </div>\n              </div>\n            )}\n\n            {/* Welcome Section - Modernis√© */}\n            {!isLoading && (\n              <div className=\"bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl shadow-xl p-8 text-white\">\n                <div className=\"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-4 mb-3\">\n                      <div className=\"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center text-4xl shadow-lg\">\n                        üëã\n                      </div>\n                      <div>\n                        <h1 className=\"font-display font-bold text-3xl lg:text-4xl\">\n                          {getGreeting()}, M./Mme {parentData?.name?.split(' ')?.[1] || parentData?.name} !\n                        </h1>\n                        <p className=\"text-indigo-100 text-sm mt-1\">\n                          {currentTime?.toLocaleDateString('fr-FR', { \n                            weekday: 'long',\n                            day: 'numeric',\n                            month: 'long',\n                            year: 'numeric'\n                          })} ‚Ä¢ {currentTime?.toLocaleTimeString('fr-FR', { \n                            hour: '2-digit',\n                            minute: '2-digit'\n                          })}\n                        </p>\n                      </div>\n                    </div>\n                    <p className=\"font-body-medium text-white text-lg mt-4\">\n                      Suivez le parcours scolaire de vos enfants et restez inform√©(e) de leur progression.\n                    </p>\n                  </div>\n                  <div className=\"flex flex-wrap items-center gap-3\">\n                    <div className=\"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-3 shadow-md border border-white/30\">\n                      <div className=\"text-2xl font-display font-bold\">{parentData?.children?.length || 0}</div>\n                      <div className=\"text-xs text-indigo-100 mt-1\">Enfant{(parentData?.children?.length || 0) > 1 ? 's' : ''}</div>\n                    </div>\n                    <div className=\"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-3 shadow-md border border-white/30\">\n                      <div className=\"text-2xl font-display font-bold\">{schools?.length || 0}</div>\n                      <div className=\"text-xs text-indigo-100 mt-1\">√âcole{(schools?.length || 0) > 1 ? 's' : ''}</div>\n                    </div>\n                    <div className=\"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-3 shadow-md border border-white/30\">\n                      <div className=\"text-2xl font-display font-bold\">{getUnreadCount()}</div>\n                      <div className=\"text-xs text-indigo-100 mt-1\">Notification{getUnreadCount() > 1 ? 's' : ''}</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Tab Content */}\n            {!isLoading && renderTabContent()}\n          </div>\n        </main>\n\n        {/* Manage Child Modal */}\n        <ManageChildModal\n          child={managingChild}\n          isOpen={!!managingChild}\n          onClose={() => setManagingChild(null)}\n          onUpdate={() => {\n            // Recharger les donn√©es si n√©cessaire\n            window.location.reload();\n          }}\n        />\n      </div>\n  );\n};\n\nexport default ParentDashboard;"],"names":["parentProductionDataService","parentId","data","error","supabase","parentData","parentError","parentTableId","children","item","student","_a","_b","child","childId","verifyData","verifyError","grades","grade","_c","attendance","absence","status","studentData","studentError","notifications","notif","childrenData","childrenError","childIds","events","event","schoolsMap","school","existing","schools","notificationId","useParentDashboardData","user","setUser","useState","userLoading","setUserLoading","parentProfile","setParentProfile","setChildren","selectedChild","setSelectedChild","selectedSchool","setSelectedSchool","gradesData","setGradesData","attendanceData","setAttendanceData","paymentData","setPaymentData","notificationsData","setNotificationsData","upcomingEvents","setUpcomingEvents","setSchools","loading","setLoading","errors","setErrors","useEffect","authUser","loadParentProfile","prev","result","loadChildren","loadChildGrades","schoolId","key","loadChildAttendance","loadChildPayments","loadChildNotifications","loadUpcomingEvents","loadSchools","markNotificationAsRead","updated","ChildSelector","onChildSelect","onSchoolChange","getChildrenBySchool","onManageChild","jsxs","jsx","Icon","e","isSelected","ChildOverviewCard","getPerformanceColor","average","getPerformanceTextColor","getAttendanceColor","rate","getAttendanceTextColor","AttendanceTracker","childName","selectedDate","setSelectedDate","getStatusIcon","getStatusColor","getStatusText","dates","totalDays","presentDays","date","absentDays","lateDays","excusedDays","_d","attendanceRate","sortedDates","_e","a","b","dateObj","isToday","GradesOverview","getTrendIcon","trend","getGradeColor","getGradeBgColor","overallAverage","sum","subject","PaymentStatus","payments","getStatusBg","formatAmount","amount","formatDate","dateString","totalPending","p","totalPaid","payment","CommunicationCenter","filter","setFilter","selectedNotification","setSelectedNotification","getTypeIcon","type","getTypeColor","getPriorityColor","priority","getTypeText","filteredNotifications","unreadCount","n","filters","filterOption","notification","_f","f","UpcomingEvents","getEventIcon","getEventColor","getEventTypeText","filteredEvents","schoolName","sortedEvents","formatEventDate","eventDate","timeDiff","daysDiff","dateFormatted","formatTime","timeString","getDaysUntilEvent","daysUntil","isUrgent","isPast","MultiSchoolChildrenOverview","parentGlobalId","isLoading","c","index","childInitial","childClass","childSchool","ManageChildModal","isOpen","onClose","onUpdate","activeTab","setActiveTab","newPassword","setNewPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","phone","setPhone","handlePasswordChange","functionUrl","session","response","handleUpdateInfo","generateRandomPassword","charset","password","i","Input","Button","ParentDashboard","searchParams","useSearchParams","currentTab","sidebarCollapsed","setSidebarCollapsed","currentTime","setCurrentTime","viewMode","setViewMode","managingChild","setManagingChild","isTransitioning","setIsTransitioning","handleChildSelect","handleSchoolChange","getUnreadCount","timer","getGreeting","hour","getSchools","selectedChildTransformed","handleChildSelectWithTransition","renderTabContent","Fragment","Header","Sidebar"],"mappings":"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"}